{"patch": "diff --git a/.gitignore b/.gitignore\nindex d6b8b714dc..20a5dca7fa 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -45,3 +45,14 @@ src/H5version.h\n /.classpath\n /CMakeUserPresets.json\n HDF5Examples/CMakeUserPresets.json\n+build/\n+Build/\n+bin/\n+lib/\n+*.o\n+*.out\n+*.obj\n+*.exe\n+*.dll\n+*.so\n+*.dylib\ndiff --git a/src/H5F.c b/src/H5F.c\nindex 5dcda18924..5c326a58fd 100644\n--- a/src/H5F.c\n+++ b/src/H5F.c\n@@ -164,7 +164,7 @@ H5Fget_access_plist(hid_t file_id)\n     FUNC_ENTER_API(H5I_INVALID_HID)\n \n     /* Check args */\n-    if (NULL == (vol_obj = (H5VL_object_t *)H5I_object(file_id)))\n+    if (NULL == (vol_obj = (H5VL_object_t *)H5I_object_verify(file_id, H5I_FILE)))\n         HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, H5I_INVALID_HID, \"invalid file identifier\");\n \n     /* Set up VOL callback arguments */\n@@ -439,7 +439,7 @@ H5Fget_vfd_handle(hid_t file_id, hid_t fapl_id, void **file_handle /*out*/)\n         HGOTO_ERROR(H5E_ARGS, H5E_BADVALUE, FAIL, \"invalid file handle pointer\");\n \n     /* Get the file object */\n-    if (NULL == (vol_obj = (H5VL_object_t *)H5I_object(file_id)))\n+    if (NULL == (vol_obj = (H5VL_object_t *)H5I_object_verify(file_id, H5I_FILE)))\n         HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, \"invalid file identifier\");\n \n     /* Set up VOL callback arguments */\n@@ -1555,7 +1555,7 @@ H5Fget_intent(hid_t file_id, unsigned *intent_flags /*out*/)\n         H5VL_file_get_args_t vol_cb_args; /* Arguments to VOL callback */\n \n         /* Get the internal file structure */\n-        if (NULL == (vol_obj = (H5VL_object_t *)H5I_object(file_id)))\n+        if (NULL == (vol_obj = (H5VL_object_t *)H5I_object_verify(file_id, H5I_FILE)))\n             HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, \"invalid file identifier\");\n \n         /* Set up VOL callback arguments */\n@@ -1594,7 +1594,7 @@ H5Fget_fileno(hid_t file_id, unsigned long *fnumber /*out*/)\n         H5VL_file_get_args_t vol_cb_args; /* Arguments to VOL callback */\n \n         /* Get the internal file structure */\n-        if (NULL == (vol_obj = (H5VL_object_t *)H5I_object(file_id)))\n+        if (NULL == (vol_obj = (H5VL_object_t *)H5I_object_verify(file_id, H5I_FILE)))\n             HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, \"invalid file identifier\");\n \n         /* Set up VOL callback arguments */\n@@ -1631,7 +1631,7 @@ H5Fget_freespace(hid_t file_id)\n     FUNC_ENTER_API((-1))\n \n     /* Get the file object */\n-    if (NULL == (vol_obj = (H5VL_object_t *)H5I_object(file_id)))\n+    if (NULL == (vol_obj = (H5VL_object_t *)H5I_object_verify(file_id, H5I_FILE)))\n         HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, (-1), \"invalid file identifier\");\n \n     /* Set up VOL callback arguments */\ndiff --git a/src/H5VLcallback.c b/src/H5VLcallback.c\nindex 1662776ef9..775709d67a 100644\n--- a/src/H5VLcallback.c\n+++ b/src/H5VLcallback.c\n@@ -3763,8 +3763,11 @@ H5VL_file_get(const H5VL_object_t *vol_obj, H5VL_file_get_args_t *args, hid_t dx\n     FUNC_ENTER_NOAPI(FAIL)\n \n     /* Set wrapper info in API context */\n+    if (vol_obj == NULL || vol_obj->data == NULL)\n+        HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, \"not a file object\");\n     if (H5VL_set_vol_wrapper(vol_obj) < 0)\n         HGOTO_ERROR(H5E_VOL, H5E_CANTSET, FAIL, \"can't set VOL wrapper info\");\n+\n     vol_wrapper_set = true;\n \n     /* Call the corresponding internal VOL routine */\ndiff --git a/src/H5VLnative_file.c b/src/H5VLnative_file.c\nindex 33a19bfd91..821d6f0414 100644\n--- a/src/H5VLnative_file.c\n+++ b/src/H5VLnative_file.c\n@@ -166,18 +166,22 @@ H5VL__native_file_get(void *obj, H5VL_file_get_args_t *args, hid_t H5_ATTR_UNUSE\n \n         /* H5Fget_access_plist */\n         case H5VL_FILE_GET_FAPL: {\n-            if ((args->args.get_fapl.fapl_id = H5F_get_access_plist((H5F_t *)obj, true)) < 0)\n+            f = (H5F_t *)obj;\n+            if (NULL == f)\n+                HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, \"not a file object\");\n+            if ((args->args.get_fapl.fapl_id = H5F_get_access_plist(f, true)) < 0)\n                 HGOTO_ERROR(H5E_FILE, H5E_CANTGET, FAIL, \"can't get file access property list\");\n-\n             break;\n         }\n \n+\n+\n         /* H5Fget_create_plist */\n         case H5VL_FILE_GET_FCPL: {\n             H5P_genplist_t *plist; /* Property list */\n \n             f = (H5F_t *)obj;\n-            if (NULL == (plist = (H5P_genplist_t *)H5I_object(f->shared->fcpl_id)))\n+            if (NULL == f || NULL == f->shared || NULL == (plist = (H5P_genplist_t *)H5I_object(f->shared->fcpl_id)))\n                 HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, \"not a property list\");\n \n             /* Create the property list object to return */\n", "result": true}