{"patch": "--- a/src/H5VLcallback.c\n+++ b/src/H5VLcallback.c\n@@ -5092,29 +5092,40 @@\n herr_t\n H5VL_link_move(const H5VL_object_t *src_vol_obj, const H5VL_loc_params_t *loc_params1,\n                const H5VL_object_t *dst_vol_obj, const H5VL_loc_params_t *loc_params2, hid_t lcpl_id,\n                hid_t lapl_id, hid_t dxpl_id, void **req)\n {\n-    const H5VL_object_t *vol_obj;                   /* VOL object for object with data */\n-    bool                 vol_wrapper_set = false;   /* Whether the VOL object wrapping context was set up */\n-    herr_t               ret_value       = SUCCEED; /* Return value */\n-\n-    FUNC_ENTER_NOAPI(FAIL)\n-\n-    /* Set wrapper info in API context */\n-    vol_obj = (src_vol_obj->data ? src_vol_obj : dst_vol_obj);\n-    if (H5VL_set_vol_wrapper(vol_obj) < 0)\n-        HGOTO_ERROR(H5E_VOL, H5E_CANTSET, FAIL, \"can't set VOL wrapper info\");\n-    vol_wrapper_set = true;\n-\n-    /* Call the corresponding internal VOL routine */\n-    if (H5VL__link_move(src_vol_obj->data, loc_params1, (dst_vol_obj ? dst_vol_obj->data : NULL), loc_params2,\n-                        vol_obj->connector->cls, lcpl_id, lapl_id, dxpl_id, req) < 0)\n-        HGOTO_ERROR(H5E_VOL, H5E_CANTMOVE, FAIL, \"link move failed\");\n-\n-done:\n-    /* Reset object wrapping info in API context */\n-    if (vol_wrapper_set && H5VL_reset_vol_wrapper() < 0)\n-        HDONE_ERROR(H5E_VOL, H5E_CANTRESET, FAIL, \"can't reset VOL wrapper info\");\n-\n-    FUNC_LEAVE_NOAPI(ret_value)\n+    const H5VL_object_t *vol_obj = NULL;            /* VOL object for object with data */\n+    bool                 vol_wrapper_set = false;   /* Whether the VOL object wrapping context was set up */\n+    herr_t               ret_value       = SUCCEED; /* Return value */\n+\n+    FUNC_ENTER_NOAPI(FAIL)\n+\n+    /* Check for NULL pointers */\n+    if (!src_vol_obj && !dst_vol_obj)\n+        HGOTO_ERROR(H5E_VOL, H5E_BADVALUE, FAIL, \"both src_vol_obj and dst_vol_obj are NULL\");\n+\n+    /* Set wrapper info in API context */\n+    if (src_vol_obj && src_vol_obj->data)\n+        vol_obj = src_vol_obj;\n+    else if (dst_vol_obj && dst_vol_obj->data)\n+        vol_obj = dst_vol_obj;\n+    else\n+        HGOTO_ERROR(H5E_VOL, H5E_BADVALUE, FAIL, \"no valid VOL object with data\");\n+\n+    if (H5VL_set_vol_wrapper(vol_obj) < 0)\n+        HGOTO_ERROR(H5E_VOL, H5E_CANTSET, FAIL, \"can't set VOL wrapper info\");\n+    vol_wrapper_set = true;\n+\n+    /* Call the corresponding internal VOL routine */\n+    if (H5VL__link_move(src_vol_obj ? src_vol_obj->data : NULL, loc_params1,\n+                        dst_vol_obj ? dst_vol_obj->data : NULL, loc_params2,\n+                        vol_obj->connector->cls, lcpl_id, lapl_id, dxpl_id, req) < 0)\n+        HGOTO_ERROR(H5E_VOL, H5E_CANTMOVE, FAIL, \"link move failed\");\n+\n+done:\n+    /* Reset object wrapping info in API context */\n+    if (vol_wrapper_set && H5VL_reset_vol_wrapper() < 0)\n+        HDONE_ERROR(H5E_VOL, H5E_CANTRESET, FAIL, \"can't reset VOL wrapper info\");\n+\n+    FUNC_LEAVE_NOAPI(ret_value)\n } /* end H5VL_link_move() */\n", "result": true}