{"patch": "diff --git a/src/H5VLcallback.c b/src/H5VLcallback.c\nindex 58e839c998..fbec0882bb 100644\n--- a/src/H5VLcallback.c\n+++ b/src/H5VLcallback.c\n@@ -5101,15 +5101,37 @@ H5VL_link_move(const H5VL_object_t *src_vol_obj, const H5VL_loc_params_t *loc_pa\n     FUNC_ENTER_NOAPI(FAIL)\n \n     /* Set wrapper info in API context */\n-    vol_obj = (src_vol_obj->data ? src_vol_obj : dst_vol_obj);\n-    if (H5VL_set_vol_wrapper(vol_obj) < 0)\n-        HGOTO_ERROR(H5E_VOL, H5E_CANTSET, FAIL, \"can't set VOL wrapper info\");\n+    if (src_vol_obj && src_vol_obj->data)\n+        vol_obj = src_vol_obj;\n+    else if (dst_vol_obj && dst_vol_obj->data)\n+        vol_obj = dst_vol_obj;\n+    else {\n+        vol_obj = NULL;\n+        ret_value = FAIL;\n+        goto done;\n+    }\n+    if (H5VL_set_vol_wrapper(vol_obj) < 0) {\n+        ret_value = FAIL;\n+        goto done;\n+    }\n     vol_wrapper_set = true;\n \n     /* Call the corresponding internal VOL routine */\n-    if (H5VL__link_move(src_vol_obj->data, loc_params1, (dst_vol_obj ? dst_vol_obj->data : NULL), loc_params2,\n-                        vol_obj->connector->cls, lcpl_id, lapl_id, dxpl_id, req) < 0)\n-        HGOTO_ERROR(H5E_VOL, H5E_CANTMOVE, FAIL, \"link move failed\");\n+    void *src_data = NULL;\n+    void *dst_data = NULL;\n+    if (src_vol_obj)\n+        src_data = src_vol_obj->data;\n+    if (dst_vol_obj)\n+        dst_data = dst_vol_obj->data;\n+    if (!src_data && !dst_data) {\n+        ret_value = FAIL;\n+        goto done;\n+    }\n+    if (H5VL__link_move(src_data, loc_params1, dst_data, loc_params2,\n+                        vol_obj->connector->cls, lcpl_id, lapl_id, dxpl_id, req) < 0) {\n+        ret_value = FAIL;\n+        goto done;\n+    }\n \n done:\n     /* Reset object wrapping info in API context */\n", "result": true}