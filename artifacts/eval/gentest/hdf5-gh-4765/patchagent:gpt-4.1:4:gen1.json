{"patch": "--- a/src/H5VLcallback.c\n+++ b/src/H5VLcallback.c\n@@ -5092,22 +5092,42 @@\n herr_t\n H5VL_link_move(const H5VL_object_t *src_vol_obj, const H5VL_loc_params_t *loc_params1,\n                const H5VL_object_t *dst_vol_obj, const H5VL_loc_params_t *loc_params2, hid_t lcpl_id,\n                hid_t lapl_id, hid_t dxpl_id, void **req)\n {\n-    const H5VL_object_t *vol_obj;                   /* VOL object for object with data */\n-    bool                 vol_wrapper_set = false;   /* Whether the VOL object wrapping context was set up */\n-    herr_t               ret_value       = SUCCEED; /* Return value */\n-\n-    FUNC_ENTER_NOAPI(FAIL)\n-\n-    /* Set wrapper info in API context */\n-    vol_obj = (src_vol_obj->data ? src_vol_obj : dst_vol_obj);\n-    if (H5VL_set_vol_wrapper(vol_obj) < 0)\n-        HGOTO_ERROR(H5E_VOL, H5E_CANTSET, FAIL, \"can't set VOL wrapper info\");\n-    vol_wrapper_set = true;\n-\n-    /* Call the corresponding internal VOL routine */\n-    if (H5VL__link_move(src_vol_obj->data, loc_params1, (dst_vol_obj ? dst_vol_obj->data : NULL), loc_params2,\n-                        vol_obj->connector->cls, lcpl_id, lapl_id, dxpl_id, req) < 0)\n-        HGOTO_ERROR(H5E_VOL, H5E_CANTMOVE, FAIL, \"link move failed\");\n+    const H5VL_object_t *vol_obj = NULL;                   /* VOL object for object with data */\n+    bool                 vol_wrapper_set = false;   /* Whether the VOL object wrapping context was set up */\n+    herr_t               ret_value       = SUCCEED; /* Return value */\n+\n+    FUNC_ENTER_NOAPI(FAIL)\n+\n+    /* Check for valid VOL objects and their data pointers */\n+    if ((src_vol_obj == NULL || src_vol_obj->data == NULL) &&\n+        (dst_vol_obj == NULL || dst_vol_obj->data == NULL)) {\n+        HGOTO_ERROR(H5E_VOL, H5E_BADVALUE, FAIL, \"both source and destination VOL objects are NULL or have NULL data\");\n+    }\n+\n+    /* Set wrapper info in API context */\n+    if (src_vol_obj && src_vol_obj->data)\n+        vol_obj = src_vol_obj;\n+    else if (dst_vol_obj && dst_vol_obj->data)\n+        vol_obj = dst_vol_obj;\n+    else {\n+        HGOTO_ERROR(H5E_VOL, H5E_BADVALUE, FAIL, \"no valid VOL object with data\");\n+    }\n+    if (H5VL_set_vol_wrapper(vol_obj) < 0)\n+        HGOTO_ERROR(H5E_VOL, H5E_CANTSET, FAIL, \"can't set VOL wrapper info\");\n+    vol_wrapper_set = true;\n+\n+    /* Call the corresponding internal VOL routine */\n+    if (H5VL__link_move(\n+            (src_vol_obj && src_vol_obj->data) ? src_vol_obj->data : NULL,\n+            loc_params1,\n+            (dst_vol_obj && dst_vol_obj->data) ? dst_vol_obj->data : NULL,\n+            loc_params2,\n+            vol_obj->connector->cls,\n+            lcpl_id,\n+            lapl_id,\n+            dxpl_id,\n+            req) < 0)\n+        HGOTO_ERROR(H5E_VOL, H5E_CANTMOVE, FAIL, \"link move failed\");\n \n", "result": true}