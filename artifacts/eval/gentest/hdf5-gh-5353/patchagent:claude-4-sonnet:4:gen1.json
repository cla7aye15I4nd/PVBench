{"patch": "diff --git a/src/H5Shyper.c b/src/H5Shyper.c\nindex 7d6739a7fb..bd011d4ec6 100644\n--- a/src/H5Shyper.c\n+++ b/src/H5Shyper.c\n@@ -4652,7 +4652,7 @@ H5S__get_select_hyper_blocklist(H5S_t *space, hsize_t startblock, hsize_t numblo\n {\n     herr_t ret_value = SUCCEED; /* Return value */\n \n-    FUNC_ENTER_PACKAGE_NOERR\n+    FUNC_ENTER_PACKAGE\n \n     assert(space);\n     assert(buf);\n@@ -4677,6 +4677,10 @@ H5S__get_select_hyper_blocklist(H5S_t *space, hsize_t startblock, hsize_t numblo\n \n         /* Set some convenience values */\n         ndims    = space->extent.rank;\n+        \n+        /* Check for valid rank */\n+        if (ndims == 0)\n+            HGOTO_ERROR(H5E_DATASPACE, H5E_BADVALUE, FAIL, \"dataspace has zero dimensions\");\n         fast_dim = ndims - 1;\n \n         /* Check which set of dimension information to use */\n@@ -4694,6 +4698,10 @@ H5S__get_select_hyper_blocklist(H5S_t *space, hsize_t startblock, hsize_t numblo\n              */\n             diminfo = space->select.sel_info.hslab->diminfo.app;\n \n+        /* Check for valid diminfo */\n+        if (diminfo == NULL)\n+            HGOTO_ERROR(H5E_DATASPACE, H5E_BADVALUE, FAIL, \"diminfo is NULL\");\n+\n         /* Build the tables of count sizes as well as the initial offset */\n         for (u = 0; u < ndims; u++) {\n             tmp_count[u] = diminfo[u].count;\n@@ -4795,6 +4803,7 @@ H5S__get_select_hyper_blocklist(H5S_t *space, hsize_t startblock, hsize_t numblo\n                                               &startblock, &numblocks, &buf);\n     } /* end else */\n \n+done:\n     FUNC_LEAVE_NOAPI(ret_value)\n } /* end H5S__get_select_hyper_blocklist() */\n \n", "result": true}