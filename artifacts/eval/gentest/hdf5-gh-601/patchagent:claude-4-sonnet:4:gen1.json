{"patch": "diff --git a/src/H5Pfapl.c b/src/H5Pfapl.c\nindex c085b71886..fee728cbc3 100644\n--- a/src/H5Pfapl.c\n+++ b/src/H5Pfapl.c\n@@ -4237,10 +4237,8 @@ H5Pset_mdc_log_options(hid_t plist_id, hbool_t is_enabled, const char *location,\n     if (NULL == (plist = H5P_object_verify(plist_id, H5P_FILE_ACCESS)))\n         HGOTO_ERROR(H5E_ARGS, H5E_BADVALUE, FAIL, \"plist_id is not a file access property list\")\n \n-    /* Get the current location string and free it */\n-    if (H5P_get(plist, H5F_ACS_MDC_LOG_LOCATION_NAME, &tmp_location) < 0)\n-        HGOTO_ERROR(H5E_PLIST, H5E_CANTGET, FAIL, \"can't get current log location\")\n-    H5MM_xfree(tmp_location);\n+    /* Note: The property system will automatically free the old location string\n+     * when we set the new value, so we don't need to manually free it here */\n \n     /* Make a copy of the passed-in location */\n     if (NULL == (tmp_location = H5MM_xstrdup(location)))\n@@ -4254,7 +4252,12 @@ H5Pset_mdc_log_options(hid_t plist_id, hbool_t is_enabled, const char *location,\n     if (H5P_set(plist, H5F_ACS_START_MDC_LOG_ON_ACCESS_NAME, &start_on_access) < 0)\n         HGOTO_ERROR(H5E_PLIST, H5E_CANTSET, FAIL, \"can't set start_on_access flag\")\n \n+    /* Clear tmp_location since it's now owned by the property list */\n+    tmp_location = NULL;\n+\n done:\n+    /* Clean up on error */\n+    H5MM_xfree(tmp_location);\n     FUNC_LEAVE_API(ret_value)\n } /* end H5Pset_mdc_log_options() */\n \n", "result": true}