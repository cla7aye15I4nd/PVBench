{"patch": "diff --git a/.gitignore b/.gitignore\nindex 2663b13e874..fdfd1f9bf45 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -292,3 +292,6 @@ icu4c/build_qnx/nto-x86_64-o/*\n icu4c/build_qnx/linux-x86_64-o/Makefile\n icu4c/build_qnx/nto-aarch64-le/Makefile\n icu4c/build_qnx/nto-x86_64-o/Makefile\n+build/\n+Build/\n+*.exe\ndiff --git a/icu4c/source/common/messagepattern.cpp b/icu4c/source/common/messagepattern.cpp\nindex 9e318295f9a..caa323f64a9 100644\n--- a/icu4c/source/common/messagepattern.cpp\n+++ b/icu4c/source/common/messagepattern.cpp\n@@ -76,6 +76,8 @@ static const char16_t u_leftCurlyBrace=0x7B;\n static const char16_t u_pipe=0x7C;\n static const char16_t u_rightCurlyBrace=0x7D;\n static const char16_t u_lessOrEqual=0x2264;  // U+2264 is <=\n+// Maximum nesting level to prevent stack overflow\n+static const int32_t MAX_NESTING_LEVEL = 200;\n \n static const char16_t kOffsetColon[]={  // \"offset:\"\n     u_o, u_f, u_f, u_s, u_e, u_t, u_colon\n@@ -437,10 +439,11 @@ MessagePattern::parseMessage(int32_t index, int32_t msgStartLength,\n     if(U_FAILURE(errorCode)) {\n         return 0;\n     }\n-    if(nestingLevel>Part::MAX_VALUE) {\n-        errorCode=U_INDEX_OUTOFBOUNDS_ERROR;\n+    if(nestingLevel>MAX_NESTING_LEVEL) {\n+        errorCode=U_ILLEGAL_ARGUMENT_ERROR;\n         return 0;\n     }\n+\n     int32_t msgStart=partsLength;\n     addPart(UMSGPAT_PART_TYPE_MSG_START, index, msgStartLength, nestingLevel, errorCode);\n     index+=msgStartLength;\n", "result": false, "error": ".test_binary_3: /gentest/proj/icu/icu-issue-22798/generated3/generated.cc:39: int main(): Assertion `status == U_INDEX_OUTOFBOUNDS_ERROR' failed.\n"}