{"patch": "diff --git a/.gitignore b/.gitignore\nindex c2918f31a..6bf18697a 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -32,3 +32,13 @@ compile_flags.txt\n cscope.files\n cscope.out\n tags\n+build/\n+Build/\n+bin/\n+lib/\n+*.out\n+*.obj\n+*.exe\n+*.dll\n+*.so\n+*.dylib\ndiff --git a/src/string.c b/src/string.c\nindex 1bd3f6f8f..775e3fead 100644\n--- a/src/string.c\n+++ b/src/string.c\n@@ -2950,9 +2950,15 @@ str_bytesplice(mrb_state *mrb, mrb_value str, mrb_int idx1, mrb_int len1, mrb_va\n   if (RSTR_LEN(s) < idx1 || RSTRING_LEN(replace) < idx2) {\n     mrb_raise(mrb, E_INDEX_ERROR, \"index out of string\");\n   }\n+  if (idx1 > MRB_INT_MAX - len1) {\n+    mrb_raise(mrb, E_INDEX_ERROR, \"index+len1 overflow\");\n+  }\n   if (RSTR_LEN(s) <= idx1+len1) {\n     len1 = RSTR_LEN(s) - idx1;\n   }\n+  if (idx2 > MRB_INT_MAX - len2) {\n+    mrb_raise(mrb, E_INDEX_ERROR, \"index+len2 overflow\");\n+  }\n   if (RSTRING_LEN(replace) <= idx2+len2) {\n     len2 = RSTRING_LEN(replace) - idx2;\n   }\n", "result": false, "error": "/tmp/mruby-gh-5986/build/src/string.c:2953:26: runtime error: signed integer overflow: 9223372036854775807 - -10 cannot be represented in type 'long'\n    #0 0x56073801ea7f in str_bytesplice /tmp/mruby-gh-5986/build/src/string.c:2953:26\n    #1 0x560738017698 in mrb_str_bytesplice /tmp/mruby-gh-5986/build/src/string.c:3013:14\n    #2 0x5607380685af in mrb_vm_exec /tmp/mruby-gh-5986/build/src/vm.c:1809:18\n    #3 0x560738045a21 in mrb_vm_run /tmp/mruby-gh-5986/build/src/vm.c:1300:12\n    #4 0x56073803ffc1 in mrb_top_run /tmp/mruby-gh-5986/build/src/vm.c:3125:10\n    #5 0x560738176680 in mrb_load_exec /tmp/mruby-gh-5986/build/mrbgems/mruby-compiler/core/parse.y:6917:7\n    #6 0x560738176e47 in mrb_load_detect_file_cxt /tmp/mruby-gh-5986/build/mrbgems/mruby-compiler/core/parse.y:6960:12\n    #7 0x560737f70df7 in main /tmp/mruby-gh-5986/build/mrbgems/mruby-bin-mruby/tools/mruby/mruby.c:356:11\n    #8 0x7fecd8a631c9  (/lib/x86_64-linux-gnu/libc.so.6+0x2a1c9) (BuildId: 274eec488d230825a136fa9c4d85370fed7a0a5e)\n    #9 0x7fecd8a6328a in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2a28a) (BuildId: 274eec488d230825a136fa9c4d85370fed7a0a5e)\n    #10 0x560737f44cf4 in _start (/tmp/mruby-gh-5986/build/build/host/bin/mruby+0x22fcf4) (BuildId: bb0266a56127a8dcd0de8e26d375d4f0ff31bac7)\n\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior /tmp/mruby-gh-5986/build/src/string.c:2953:26 \n"}