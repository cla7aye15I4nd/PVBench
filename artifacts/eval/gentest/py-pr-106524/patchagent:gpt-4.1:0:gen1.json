{"patch": "diff --git a/Modules/_sre/sre.c b/Modules/_sre/sre.c\nindex 3f11916f9e1..37809fbfb8d 100644\n--- a/Modules/_sre/sre.c\n+++ b/Modules/_sre/sre.c\n@@ -1566,7 +1566,10 @@ _sre_template_impl(PyObject *module, PyObject *pattern, PyObject *template)\n \n bad_template:\n     PyErr_SetString(PyExc_TypeError, \"invalid template\");\n-    Py_XDECREF(self);\n+    if (self) {\n+        // self may be partially initialized, so do not call Py_XDECREF (which would call tp_dealloc)\n+        PyObject_GC_Del(self);\n+    }\n     return NULL;\n }\n \n", "result": false, "error": "AddressSanitizer:DEADLYSIGNAL\n=================================================================\n==1712247==ERROR: AddressSanitizer: SEGV on unknown address (pc 0x559d21d4115f bp 0x7ffe434106f0 sp 0x7ffe43410650 T0)\n==1712247==The signal is caused by a READ memory access.\n==1712247==Hint: this fault was caused by a dereference of a high value address (see register values below).  Disassemble the provided pc to learn which register was used.\n    #0 0x559d21d4115f in _Py_IsImmortal /tmp/py-pr-106524/build/./Include/object.h:227:12\n    #1 0x559d21d4115f in Py_DECREF /tmp/py-pr-106524/build/./Include/object.h:689:9\n    #2 0x559d21d4115f in template_clear /tmp/py-pr-106524/build/./Modules/_sre/sre.c:2794:9\n    #3 0x559d21d40c0a in template_dealloc /tmp/py-pr-106524/build/./Modules/_sre/sre.c:2805:11\n    #4 0x559d2179b8f3 in _Py_Dealloc /tmp/py-pr-106524/build/Objects/object.c:2578:5\n    #5 0x559d21ce9904 in Py_DECREF /tmp/py-pr-106524/build/./Include/object.h:694:9\n    #6 0x559d21ce9904 in _sre_template_impl /tmp/py-pr-106524/build/./Modules/_sre/sre.c:1547:13\n    #7 0x559d21ce4f0e in _sre_template /tmp/py-pr-106524/build/./Modules/_sre/clinic/sre.c.h:1104:20\n    #8 0x559d21787aad in cfunction_vectorcall_FASTCALL /tmp/py-pr-106524/build/Objects/methodobject.c:423:24\n    #9 0x559d2168e68f in _PyObject_VectorcallTstate /tmp/py-pr-106524/build/./Include/internal/pycore_call.h:186:11\n    #10 0x559d21690139 in PyObject_Vectorcall /tmp/py-pr-106524/build/Objects/call.c:326:12\n    #11 0x559d219dae9d in _PyEval_EvalFrameDefault /tmp/py-pr-106524/build/Python/bytecodes.c:2813:19\n    #12 0x559d219ae581 in _PyEval_EvalFrame /tmp/py-pr-106524/build/./Include/internal/pycore_ceval.h:88:16\n    #13 0x559d219ae43e in _PyEval_Vector /tmp/py-pr-106524/build/Python/ceval.c:1609:12\n    #14 0x559d219addcf in PyEval_EvalCode /tmp/py-pr-106524/build/Python/ceval.c:572:21\n    #15 0x559d21b62f04 in run_eval_code_obj /tmp/py-pr-106524/build/Python/pythonrun.c:1724:9\n    #16 0x559d21b5bd05 in run_mod /tmp/py-pr-106524/build/Python/pythonrun.c:1745:19\n    #17 0x559d21b59f8e in pyrun_file /tmp/py-pr-106524/build/Python/pythonrun.c:1645:15\n    #18 0x559d21b58a39 in _PyRun_SimpleFileObject /tmp/py-pr-106524/build/Python/pythonrun.c:462:13\n    #19 0x559d21b58218 in _PyRun_AnyFileObject /tmp/py-pr-106524/build/Python/pythonrun.c:78:15\n    #20 0x559d21be4be6 in pymain_run_file_obj /tmp/py-pr-106524/build/Modules/main.c:360:15\n    #21 0x559d21be3b5b in pymain_run_file /tmp/py-pr-106524/build/Modules/main.c:379:15\n    #22 0x559d21be1b4d in pymain_run_python /tmp/py-pr-106524/build/Modules/main.c:610:21\n    #23 0x559d21be12b8 in Py_RunMain /tmp/py-pr-106524/build/Modules/main.c:688:5\n    #24 0x559d21be1f88 in pymain_main /tmp/py-pr-106524/build/Modules/main.c:718:12\n    #25 0x559d21be2097 in Py_BytesMain /tmp/py-pr-106524/build/Modules/main.c:742:12\n    #26 0x559d214c9481 in main /tmp/py-pr-106524/build/./Programs/python.c:15:12\n    #27 0x7f6a8656e1c9  (/lib/x86_64-linux-gnu/libc.so.6+0x2a1c9) (BuildId: 274eec488d230825a136fa9c4d85370fed7a0a5e)\n    #28 0x7f6a8656e28a in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2a28a) (BuildId: 274eec488d230825a136fa9c4d85370fed7a0a5e)\n    #29 0x559d213f0074 in _start (/tmp/py-pr-106524/build/python+0x277074) (BuildId: e299924ce68e4e13b36bc03705261a64fc71e4f1)\n\nAddressSanitizer can not provide additional info.\nSUMMARY: AddressSanitizer: SEGV /tmp/py-pr-106524/build/./Include/object.h:227:12 in _Py_IsImmortal\n==1712247==ABORTING\n"}