{"patch": "diff --git a/Objects/unicodeobject.c b/Objects/unicodeobject.c\nindex 4b03cc3f4da..bbf0defcbb3 100644\n--- a/Objects/unicodeobject.c\n+++ b/Objects/unicodeobject.c\n@@ -2696,8 +2696,12 @@ unicode_fromformat_arg(_PyUnicodeWriter *writer,\n                 return NULL;\n         }\n         else {\n-            /* UTF-8 */\n+             /* UTF-8 */\n             const char *s = va_arg(*vargs, const char*);\n+            if (s == NULL || (void*)s < (void*)4096) {\n+                PyErr_SetString(PyExc_SystemError, \"Invalid string pointer in format\");\n+                return NULL;\n+            }\n             if (unicode_fromformat_write_cstr(writer, s, width, precision, flags) < 0)\n                 return NULL;\n         }\n", "result": false, "error": "Traceback (most recent call last):\n  File \"/gentest-cpython/py-pr-114067/generated_3.py\", line 61, in <module>\n    main()\n    ~~~~^^\n  File \"/gentest-cpython/py-pr-114067/generated_3.py\", line 57, in main\n    run_subprocess_tests()\n    ~~~~~~~~~~~~~~~~~~~~^^\n  File \"/gentest-cpython/py-pr-114067/generated_3.py\", line 47, in run_subprocess_tests\n    rc, out, err = assert_python_ok('-c', code)\n                   ~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File \"/tmp/py-pr-114067/build/Lib/test/support/script_helper.py\", line 180, in assert_python_ok\n    return _assert_python(True, *args, **env_vars)\n           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/tmp/py-pr-114067/build/Lib/test/support/script_helper.py\", line 165, in _assert_python\n    res.fail(cmd_line)\n    ~~~~~~~~^^^^^^^^^^\n  File \"/tmp/py-pr-114067/build/Lib/test/support/script_helper.py\", line 75, in fail\n    raise AssertionError(\"Process return code is %d\\n\"\n    ...<13 lines>...\n                            err))\nAssertionError: Process return code is 1\ncommand line: ['/tmp/py-pr-114067/build/python', '-X', 'faulthandler', '-I', '-c', 'if 1:\\n        # Trigger int() with more than two positional arguments and validate\\n        # that it raises TypeError with a sensible message and does not crash.\\n        def check(n):\\n            # Build args like: int(\\'10\\', 2, 0, 0, ...)\\n            args = [\\'10\\', 2] + [0] * (n - 2)\\n            try:\\n                int(*args)\\n                raise AssertionError(f\"Expected TypeError for {n} args, but no exception was raised\")\\n            except TypeError as e:\\n                msg = str(e)\\n                # Validate contents of the error message. Different Python versions\\n                # may have slightly different phrasings, e.g.:\\n                # - \"int expected at most 2 arguments, got 3\"\\n                # - \"int() takes at most 2 arguments (3 given)\"\\n                # We assert the essentials to ensure the bug is fixed and message is sane.\\n                assert \\'int\\' in msg, f\"Error message missing \\'int\\': {msg!r}\"\\n                assert \\'2\\' in msg, f\"Error message missing \\'2\\': {msg!r}\"\\n                assert \\'argument\\' in msg, f\"Error message missing \\'argument(s)\\': {msg!r}\"\\n                assert str(n) in msg, f\"Error message missing arg count {n}: {msg!r}\"\\n                assert (\\'got\\' in msg) or (\\'given\\' in msg), (\\n                    f\"Expected \\'got\\' or \\'given\\' in message, got: {msg!r}\")\\n        for n in (3, 4, 5):\\n            check(n)\\n\\n        # Sanity check: two-argument form should succeed and return the expected value\\n        v = int(\\'10\\', 2)\\n        assert v == 2, f\"Expected int(\\'10\\', 2) == 2, got {v}\"\\n\\n        print(\\'SUBPROCESS_OK\\')\\n    ']\n\nstdout:\n---\n\n---\n\nstderr:\n---\nTraceback (most recent call last):\n  File \"<string>\", line 24, in <module>\n    check(n)\n    ~~~~~^^^\n  File \"<string>\", line 8, in check\n    int(*args)\n    ~~~^^^^^^^\nSystemError: Invalid string pointer in format\n---\n"}