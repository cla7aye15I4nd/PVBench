{"patch": "diff --git a/Modules/_lsprof.c b/Modules/_lsprof.c\nindex 5cf9eba243b..8d31364d60d 100644\n--- a/Modules/_lsprof.c\n+++ b/Modules/_lsprof.c\n@@ -59,6 +59,7 @@ typedef struct {\n #define POF_ENABLED     0x001\n #define POF_SUBCALLS    0x002\n #define POF_BUILTINS    0x004\n+#define POF_IN_TIMER    0x008\n #define POF_NOMEMORY    0x100\n \n /*[clinic input]\n@@ -117,8 +118,13 @@ static PyTime_t CallExternalTimer(ProfilerObject *pObj)\n static inline PyTime_t\n call_timer(ProfilerObject *pObj)\n {\n+    PyTime_t result;\n     if (pObj->externalTimer != NULL) {\n-        return CallExternalTimer(pObj);\n+        int old_flags = pObj->flags;\n+        pObj->flags |= POF_IN_TIMER;\n+        result = CallExternalTimer(pObj);\n+        pObj->flags = old_flags;\n+        return result;\n     }\n     else {\n         PyTime_t t;\n@@ -778,6 +784,8 @@ static PyObject*\n profiler_disable(ProfilerObject *self, PyObject* noarg)\n {\n     if (self->flags & POF_ENABLED) {\n+        if (self->flags & POF_IN_TIMER)\n+            Py_RETURN_NONE;  /* Prevent re-entrant disable during timer calls */\n         PyObject* result = NULL;\n         PyObject* monitoring = _PyImport_GetModuleAttrString(\"sys\", \"monitoring\");\n \n", "result": true}