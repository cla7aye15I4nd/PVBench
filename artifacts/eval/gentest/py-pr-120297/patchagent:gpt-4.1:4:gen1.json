{"patch": "diff --git a/Modules/_lsprof.c b/Modules/_lsprof.c\nindex 5cf9eba243b..4768c8d49d2 100644\n--- a/Modules/_lsprof.c\n+++ b/Modules/_lsprof.c\n@@ -760,11 +760,19 @@ flush_unmatched(ProfilerObject *pObj)\n         ProfilerEntry *profEntry= pContext->ctxEntry;\n         if (profEntry)\n             Stop(pObj, pContext, profEntry);\n-        else\n+        else {\n             pObj->currentProfilerContext = pContext->previous;\n-        if (pContext)\n-            PyMem_Free(pContext);\n+            if (pContext)\n+                PyMem_Free(pContext);\n+        }\n+    }\n+    // Free all ProfilerContexts in the freelist\n+    while (pObj->freelistProfilerContext) {\n+        ProfilerContext *c = pObj->freelistProfilerContext;\n+        pObj->freelistProfilerContext = c->previous;\n+        PyMem_Free(c);\n     }\n+    pObj->freelistProfilerContext = NULL;\n \n }\n \n", "result": true}