{"patch": "diff --git a/Objects/listobject.c b/Objects/listobject.c\nindex d09bb639103..2bc1982558f 100644\n--- a/Objects/listobject.c\n+++ b/Objects/listobject.c\n@@ -3380,15 +3380,22 @@ list_richcompare_impl(PyObject *v, PyObject *w, int op)\n     if (op == Py_NE) {\n         Py_RETURN_TRUE;\n     }\n-\n+// FIXME: Crash CWE-416: Use After Free\n+ \n     /* Compare the final item again using the proper operator */\n-    return PyObject_RichCompare(vl->ob_item[i], wl->ob_item[i], op);\n+    PyObject *left_item = vl->ob_item[i];\n+    PyObject *right_item = wl->ob_item[i];\n+    Py_INCREF(left_item);\n+    Py_INCREF(right_item);\n+    PyObject *result = PyObject_RichCompare(left_item, right_item, op);\n+    Py_DECREF(left_item);\n+    Py_DECREF(right_item);\n+    return result;\n }\n \n static PyObject *\n list_richcompare(PyObject *v, PyObject *w, int op)\n-{\n-    PyObject *ret;\n+{    PyObject *ret;\n     Py_BEGIN_CRITICAL_SECTION2(v, w);\n     ret = list_richcompare_impl(v, w, op);\n     Py_END_CRITICAL_SECTION2()\n", "result": true}