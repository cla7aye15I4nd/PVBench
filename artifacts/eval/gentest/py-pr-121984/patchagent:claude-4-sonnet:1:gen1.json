{"patch": "diff --git a/Modules/_lsprof.c b/Modules/_lsprof.c\nindex 5cf9eba243b..b28225dca56 100644\n--- a/Modules/_lsprof.c\n+++ b/Modules/_lsprof.c\n@@ -291,7 +291,7 @@ static void clearEntries(ProfilerObject *pObj)\n }\n \n static void\n-initContext(ProfilerObject *pObj, ProfilerContext *self, ProfilerEntry *entry)\n+initContext(ProfilerObject *pObj, ProfilerContext *self, ProfilerEntry *entry, PyTime_t timer_value)\n {\n     self->ctxEntry = entry;\n     self->subt = 0;\n@@ -307,13 +307,13 @@ initContext(ProfilerObject *pObj, ProfilerContext *self, ProfilerEntry *entry)\n         if (subentry)\n             ++subentry->recursionLevel;\n     }\n-    self->t0 = call_timer(pObj);\n+    self->t0 = timer_value;\n }\n \n static void\n-Stop(ProfilerObject *pObj, ProfilerContext *self, ProfilerEntry *entry)\n+Stop(ProfilerObject *pObj, ProfilerContext *self, ProfilerEntry *entry, PyTime_t timer_value)\n {\n-    PyTime_t tt = call_timer(pObj) - self->t0;\n+    PyTime_t tt = timer_value - self->t0;\n     PyTime_t it = tt - self->subt;\n     if (self->previous)\n         self->previous->subt += tt;\n@@ -376,7 +376,8 @@ ptrace_enter_call(PyObject *self, void *key, PyObject *userObj)\n             goto restorePyerr;\n         }\n     }\n-    initContext(pObj, pContext, profEntry);\n+    PyTime_t timer_value = call_timer(pObj);\n+    initContext(pObj, pContext, profEntry, timer_value);\n \n restorePyerr:\n     PyErr_SetRaisedException(exc);\n@@ -389,13 +390,15 @@ ptrace_leave_call(PyObject *self, void *key)\n     ProfilerObject *pObj = (ProfilerObject*)self;\n     ProfilerEntry *profEntry;\n     ProfilerContext *pContext;\n+    PyTime_t timer_value;\n \n+    timer_value = call_timer(pObj);\n     pContext = pObj->currentProfilerContext;\n     if (pContext == NULL)\n         return;\n     profEntry = getEntry(pObj, key);\n     if (profEntry) {\n-        Stop(pObj, pContext, profEntry);\n+        Stop(pObj, pContext, profEntry, timer_value);\n     }\n     else {\n         pObj->currentProfilerContext = pContext->previous;\n@@ -759,7 +762,7 @@ flush_unmatched(ProfilerObject *pObj)\n         ProfilerContext *pContext = pObj->currentProfilerContext;\n         ProfilerEntry *profEntry= pContext->ctxEntry;\n         if (profEntry)\n-            Stop(pObj, pContext, profEntry);\n+            Stop(pObj, pContext, profEntry, call_timer(pObj));\n         else\n             pObj->currentProfilerContext = pContext->previous;\n         if (pContext)\n", "result": true}