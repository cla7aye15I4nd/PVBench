{"patch": "diff --git a/Modules/_lsprof.c b/Modules/_lsprof.c\nindex 5cf9eba243b..4fa7287774f 100644\n--- a/Modules/_lsprof.c\n+++ b/Modules/_lsprof.c\n@@ -758,12 +758,15 @@ flush_unmatched(ProfilerObject *pObj)\n     while (pObj->currentProfilerContext) {\n         ProfilerContext *pContext = pObj->currentProfilerContext;\n         ProfilerEntry *profEntry= pContext->ctxEntry;\n-        if (profEntry)\n+        if (profEntry) {\n             Stop(pObj, pContext, profEntry);\n-        else\n+            // Do not free or add to freelist here; Stop() just unlinked it.\n+        } else {\n             pObj->currentProfilerContext = pContext->previous;\n-        if (pContext)\n-            PyMem_Free(pContext);\n+            // Add pContext to freelist instead of freeing directly\n+            pContext->previous = pObj->freelistProfilerContext;\n+            pObj->freelistProfilerContext = pContext;\n+        }\n     }\n \n }\n", "result": true}