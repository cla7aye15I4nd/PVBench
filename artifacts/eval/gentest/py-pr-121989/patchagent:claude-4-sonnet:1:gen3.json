{"patch": "diff --git a/Modules/_lsprof.c b/Modules/_lsprof.c\nindex 257de4387c0..8432ecbba39 100644\n--- a/Modules/_lsprof.c\n+++ b/Modules/_lsprof.c\n@@ -56,6 +56,7 @@ typedef struct {\n #define POF_ENABLED     0x001\n #define POF_SUBCALLS    0x002\n #define POF_BUILTINS    0x004\n+#define POF_IN_TIMER    0x008\n #define POF_NOMEMORY    0x100\n \n /*[clinic input]\n@@ -114,12 +115,21 @@ static _PyTime_t CallExternalTimer(ProfilerObject *pObj)\n static inline _PyTime_t\n call_timer(ProfilerObject *pObj)\n {\n+    if (pObj->flags & POF_IN_TIMER) {\n+        /* Prevent re-entrant timer calls that could trigger profiler_disable */\n+        return _PyTime_GetPerfCounter();\n+    }\n+    \n+    pObj->flags |= POF_IN_TIMER;\n+    _PyTime_t result;\n     if (pObj->externalTimer != NULL) {\n-        return CallExternalTimer(pObj);\n+        result = CallExternalTimer(pObj);\n     }\n     else {\n-        return _PyTime_GetPerfCounter();\n+        result = _PyTime_GetPerfCounter();\n     }\n+    pObj->flags &= ~POF_IN_TIMER;\n+    return result;\n }\n \n \n@@ -773,6 +783,11 @@ Stop collecting profiling information.\\n\\\n static PyObject*\n profiler_disable(ProfilerObject *self, PyObject* noarg)\n {\n+    if (self->flags & POF_IN_TIMER) {\n+        /* Defer disable until timer operation completes */\n+        Py_RETURN_NONE;\n+    }\n+    \n     if (self->flags & POF_ENABLED) {\n         PyObject* result = NULL;\n         PyObject* monitoring = _PyImport_GetModuleAttrString(\"sys\", \"monitoring\");\n", "result": true}