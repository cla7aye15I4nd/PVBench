{"patch": "diff --git a/Modules/_cursesmodule.c b/Modules/_cursesmodule.c\nindex 743b9e37fbc..af624ff82f7 100644\n--- a/Modules/_cursesmodule.c\n+++ b/Modules/_cursesmodule.c\n@@ -3259,6 +3259,17 @@ _curses_initscr_impl(PyObject *module)\n         return (PyObject *)PyCursesWindow_New(stdscr, NULL);\n     }\n \n+    /* Defensive: check TERM and isatty before calling initscr() to avoid crash */\n+    const char *term_env = getenv(\"TERM\");\n+    if (!term_env || !term_env[0] || strcmp(term_env, \"dumb\") == 0) {\n+        PyErr_SetString(PyCursesError, \"No valid terminal type in TERM environment variable\");\n+        return NULL;\n+    }\n+    if (!isatty(fileno(stdin))) {\n+        PyErr_SetString(PyCursesError, \"Not running in a TTY (isatty check failed)\");\n+        return NULL;\n+    }\n+\n     win = initscr();\n \n     if (win == NULL) {\n", "result": true}