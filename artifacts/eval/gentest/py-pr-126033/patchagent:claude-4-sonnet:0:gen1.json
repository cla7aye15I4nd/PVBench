{"patch": "diff --git a/Modules/_elementtree.c b/Modules/_elementtree.c\nindex b73bd844626..d4a621fc4e9 100644\n--- a/Modules/_elementtree.c\n+++ b/Modules/_elementtree.c\n@@ -1630,6 +1630,7 @@ _elementtree_Element_remove_impl(ElementObject *self, PyObject *subelement)\n {\n     Py_ssize_t i;\n     int rc;\n+    ElementObjectExtra *extra;\n     PyObject *found;\n \n     if (!self->extra) {\n@@ -1641,17 +1642,38 @@ _elementtree_Element_remove_impl(ElementObject *self, PyObject *subelement)\n         return NULL;\n     }\n \n-    for (i = 0; i < self->extra->length; i++) {\n-        if (self->extra->children[i] == subelement)\n+    /* Store a local copy to prevent race conditions */\n+    extra = self->extra;\n+    if (!extra) {\n+        PyErr_SetString(PyExc_ValueError, \"list.remove(x): x not in list\");\n+        return NULL;\n+    }\n+\n+    for (i = 0; i < extra->length; i++) {\n+        /* Check if extra is still valid before each access */\n+        if (!self->extra || self->extra != extra) {\n+            PyErr_SetString(PyExc_ValueError, \"list.remove(x): x not in list\");\n+            return NULL;\n+        }\n+        \n+        if (extra->children[i] == subelement)\n             break;\n-        rc = PyObject_RichCompareBool(self->extra->children[i], subelement, Py_EQ);\n+        rc = PyObject_RichCompareBool(extra->children[i], subelement, Py_EQ);\n+        \n+        /* Check again after the potentially dangerous call */\n+        if (!self->extra || self->extra != extra) {\n+            PyErr_SetString(PyExc_ValueError, \"list.remove(x): x not in list\");\n+            return NULL;\n+        }\n+        \n         if (rc > 0)\n             break;\n         if (rc < 0)\n             return NULL;\n     }\n \n-    if (i >= self->extra->length) {\n+    /* Final check before proceeding */\n+    if (!self->extra || self->extra != extra || i >= extra->length) {\n         /* subelement is not in children, so raise exception */\n         PyErr_SetString(\n             PyExc_ValueError,\n@@ -1660,11 +1682,11 @@ _elementtree_Element_remove_impl(ElementObject *self, PyObject *subelement)\n         return NULL;\n     }\n \n-    found = self->extra->children[i];\n+    found = extra->children[i];\n \n-    self->extra->length--;\n-    for (; i < self->extra->length; i++)\n-        self->extra->children[i] = self->extra->children[i+1];\n+    extra->length--;\n+    for (; i < extra->length; i++)\n+        extra->children[i] = extra->children[i+1];\n \n     Py_DECREF(found);\n     Py_RETURN_NONE;\n", "result": false, "error": "Traceback (most recent call last):\n  File \"/gentest-cpython/py-pr-126033/generated_1.py\", line 210, in <module>\n    test_remove_with_clear_assume_existing()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/gentest-cpython/py-pr-126033/generated_1.py\", line 112, in test_remove_with_clear_assume_existing\n    result = root.remove(R('missing'))\nValueError: list.remove(x): x not in list\n"}