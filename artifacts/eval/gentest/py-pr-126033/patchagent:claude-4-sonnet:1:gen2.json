{"patch": "diff --git a/Modules/_elementtree.c b/Modules/_elementtree.c\nindex b73bd844626..271af7a7b0a 100644\n--- a/Modules/_elementtree.c\n+++ b/Modules/_elementtree.c\n@@ -1630,6 +1630,7 @@ _elementtree_Element_remove_impl(ElementObject *self, PyObject *subelement)\n {\n     Py_ssize_t i;\n     int rc;\n+    ElementObjectExtra *extra;\n     PyObject *found;\n \n     if (!self->extra) {\n@@ -1641,17 +1642,28 @@ _elementtree_Element_remove_impl(ElementObject *self, PyObject *subelement)\n         return NULL;\n     }\n \n-    for (i = 0; i < self->extra->length; i++) {\n-        if (self->extra->children[i] == subelement)\n+    /* Store a local reference to extra to detect if it gets cleared */\n+    extra = self->extra;\n+\n+    for (i = 0; i < extra->length; i++) {\n+        if (extra->children[i] == subelement)\n             break;\n-        rc = PyObject_RichCompareBool(self->extra->children[i], subelement, Py_EQ);\n+        rc = PyObject_RichCompareBool(extra->children[i], subelement, Py_EQ);\n+        /* Check if extra was cleared during the callback */\n+        if (self->extra != extra) {\n+            PyErr_SetString(\n+                PyExc_ValueError,\n+                \"list.remove(x): x not in list\"\n+                );\n+            return NULL;\n+        }\n         if (rc > 0)\n             break;\n         if (rc < 0)\n             return NULL;\n     }\n \n-    if (i >= self->extra->length) {\n+    if (i >= extra->length) {\n         /* subelement is not in children, so raise exception */\n         PyErr_SetString(\n             PyExc_ValueError,\n@@ -1660,11 +1672,11 @@ _elementtree_Element_remove_impl(ElementObject *self, PyObject *subelement)\n         return NULL;\n     }\n \n-    found = self->extra->children[i];\n+    found = extra->children[i];\n \n-    self->extra->length--;\n-    for (; i < self->extra->length; i++)\n-        self->extra->children[i] = self->extra->children[i+1];\n+    extra->length--;\n+    for (; i < extra->length; i++)\n+        extra->children[i] = extra->children[i+1];\n \n     Py_DECREF(found);\n     Py_RETURN_NONE;\n", "result": true}