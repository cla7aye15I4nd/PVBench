{"patch": "diff --git a/Modules/_ctypes/stgdict.c b/Modules/_ctypes/stgdict.c\nindex ad82e4891c5..7189866eb3c 100644\n--- a/Modules/_ctypes/stgdict.c\n+++ b/Modules/_ctypes/stgdict.c\n@@ -568,9 +568,14 @@ PyCStructUnionType_update_stginfo(PyObject *type, PyObject *fields, int isStruct\n     if (!isStruct) {\n         size = union_size;\n     }\n-\n+// FIXME: Crash CWE-369: Divide By Zero\n+ \n     /* Adjust the size according to the alignment requirements */\n-    aligned_size = ((size + total_align - 1) / total_align) * total_align;\n+    if (total_align <= 0) {\n+        aligned_size = size;\n+    } else {\n+        aligned_size = ((size + total_align - 1) / total_align) * total_align;\n+    }\n \n     if (isStruct) {\n         char *ptr;\n@@ -580,8 +585,7 @@ PyCStructUnionType_update_stginfo(PyObject *type, PyObject *fields, int isStruct\n         padding = aligned_size - size;\n         if (padding > 0) {\n             ptr = stginfo->format;\n-            stginfo->format = _ctypes_alloc_format_padding(ptr, padding);\n-            PyMem_Free(ptr);\n+            stginfo->format = _ctypes_alloc_format_padding(ptr, padding);            PyMem_Free(ptr);\n             if (stginfo->format == NULL) {\n                 return -1;\n             }\n", "result": false, "error": "Traceback (most recent call last):\n  File \"/gentest-cpython/py-pr-132673/generated_3.py\", line 114, in <module>\n    test_subprocess_zero_align_empty_fields_no_crash()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/gentest-cpython/py-pr-132673/generated_3.py\", line 59, in test_subprocess_zero_align_empty_fields_no_crash\n    assert label in out, f\"Missing expected output {label!r}. Full stdout: {out!r}\"\n           ^^^^^^^^^^^^\nAssertionError: Missing expected output b'LEStruct:type_align=1'. Full stdout: b'Struct:type_align=0\\nStruct:inst_align=0\\nLEStruct:type_align=0\\nLEStruct:inst_align=0\\nBEStruct:type_align=1\\nBEStruct:inst_align=1\\nUnion:type_align=0\\nUnion:inst_align=0\\n'\n"}