{"patch": "diff --git a/libtiff/tif_dir.c b/libtiff/tif_dir.c\nindex 459f9696..864f91cb 100644\n--- a/libtiff/tif_dir.c\n+++ b/libtiff/tif_dir.c\n@@ -1204,9 +1204,13 @@ int TIFFUnsetField(TIFF *tif, uint32_t tag)\n  */\n int TIFFVSetField(TIFF *tif, uint32_t tag, va_list ap)\n {\n-    return OkToChangeTag(tif, tag)\n-               ? (*tif->tif_tagmethods.vsetfield)(tif, tag, ap)\n-               : 0;\n+    if (!OkToChangeTag(tif, tag))\n+        return 0;\n+    if (tif->tif_tagmethods.vsetfield == NULL) {\n+        TIFFErrorExtR(tif, \"TIFFVSetField\", \"%s: vsetfield method is NULL for tag %u\", tif->tif_name, tag);\n+        return 0;\n+    }\n+    return (*tif->tif_tagmethods.vsetfield)(tif, tag, ap);\n }\n \n static int _TIFFVGetField(TIFF *tif, uint32_t tag, va_list ap)\n", "result": true}