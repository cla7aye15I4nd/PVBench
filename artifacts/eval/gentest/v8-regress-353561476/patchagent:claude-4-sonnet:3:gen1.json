{"patch": "diff --git a/src/ast/scopes.cc b/src/ast/scopes.cc\nindex 530a249adde..c265785565a 100644\n--- a/src/ast/scopes.cc\n+++ b/src/ast/scopes.cc\n@@ -2688,7 +2688,8 @@ void Scope::AllocateScopeInfosRecursively(\n   auto it = scope_infos_to_reuse.find(UniqueIdInScript());\n   if (it != scope_infos_to_reuse.end()) {\n     scope_info_ = it->second;\n-    CHECK(NeedsContext());\n+    // Only reuse scope infos that match our context requirements\n+    if (!NeedsContext() || scope_info_->ContextLength() == 0) goto create_new;\n     // The ScopeInfo chain mirrors the context chain, so we only link to the\n     // next outer scope that needs a context.\n     next_outer_scope = scope_info_;\n@@ -2701,6 +2702,7 @@ void Scope::AllocateScopeInfosRecursively(\n     it->second = {};\n #endif\n   } else if (NeedsScopeInfo()) {\n+create_new:\n #ifdef DEBUG\n     // Mark this ID as being used. Skip hidden scopes because they are\n     // synthetic, unreusable, but hard to make unique.\n", "result": true}