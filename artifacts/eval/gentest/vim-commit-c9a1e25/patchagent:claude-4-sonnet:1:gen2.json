{"patch": "diff --git a/src/misc1.c b/src/misc1.c\nindex 90cf91474..2948b5abd 100644\n--- a/src/misc1.c\n+++ b/src/misc1.c\n@@ -547,6 +547,9 @@ gchar_pos(pos_T *pos)\n     // When searching columns is sometimes put at the end of a line.\n     if (pos->col == MAXCOL)\n \treturn NUL;\n+    // Check if column is beyond line length\n+    if (pos->col >= ml_get_len(pos->lnum))\n+\treturn NUL;\n     ptr = ml_get_pos(pos);\n     if (has_mbyte)\n \treturn (*mb_ptr2char)(ptr);\ndiff --git a/src/register.c b/src/register.c\nindex 3ca425b45..957948072 100644\n--- a/src/register.c\n+++ b/src/register.c\n@@ -1268,8 +1268,10 @@ op_yank(oparg_T *oap, int deleting, int mess)\n \n \t\t    charwise_block_prep(oap->start, oap->end, &bd, lnum, oap->inclusive);\n \n-\t\t    // make sure bd.textlen is not longer than the text\n-\t\t    tmp = (int)STRLEN(bd.textstart);\n+\t\t    // make sure bd.textlen is not longer than the available text\n+\t\t    tmp = (int)ml_get_len(lnum) - bd.textcol;\n+\t\t    if (tmp < 0)\n+\t\t\ttmp = 0;\n \t\t    if (tmp < bd.textlen)\n \t\t\tbd.textlen = tmp;\n \n", "result": true}