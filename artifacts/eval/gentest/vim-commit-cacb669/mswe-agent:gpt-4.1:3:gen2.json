{"patch": "diff --git a/.gitignore b/.gitignore\nindex 048ced9db..6bfd5ec11 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -119,3 +119,11 @@ src/cscope.out\n /.cache/clangd/\n /.ccls-cache/\n /compile_commands.json\n+build/\n+Build/\n+bin/\n+lib/\n+*.out\n+*.dll\n+*.so\n+*.dylib\ndiff --git a/src/search.c b/src/search.c\nindex 01c143f69..0c4039ede 100644\n--- a/src/search.c\n+++ b/src/search.c\n@@ -1551,8 +1551,10 @@ do_search(\n \t\t\t    // move reversed text to beginning of buffer\n \t\t\t    while (*r != NUL && *r == ' ')\n \t\t\t\tr++;\n-\t\t\t    pat_len = msgbuf + msgbuflen - r;\n-\t\t\t    mch_memmove(msgbuf, r, pat_len);\n+                pat_len = msgbuf + msgbuflen - r;\n+                if (pat_len > msgbuflen || pat_len > STRLEN(msgbuf) || pat_len < 0)\n+                    pat_len = 0;\n+                mch_memmove(msgbuf, r, pat_len);\n \t\t\t    // overwrite old text\n \t\t\t    if ((size_t)(r - msgbuf) >= pat_len)\n \t\t\t\tvim_memset(r, ' ', pat_len);\n", "result": true}