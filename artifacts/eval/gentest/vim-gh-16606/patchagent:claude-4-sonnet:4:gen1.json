{"patch": "diff --git a/src/message.c b/src/message.c\nindex 24984123b..13575c5f0 100644\n--- a/src/message.c\n+++ b/src/message.c\n@@ -518,7 +518,7 @@ get_emsg_lnum(void)\n \n     // lnum is 0 when executing a command from the command line\n     // argument, we don't want a line number then\n-    if (SOURCING_NAME != NULL\n+    if (HAVE_SOURCING_INFO && SOURCING_NAME != NULL\n \t    && (other_sourcing_name() || SOURCING_LNUM != last_sourcing_lnum)\n \t    && SOURCING_LNUM != 0)\n     {\n@@ -564,10 +564,10 @@ msg_source(int attr)\n     }\n \n     // remember the last sourcing name printed, also when it's empty\n-    if (SOURCING_NAME == NULL || other_sourcing_name())\n+    if (!HAVE_SOURCING_INFO || SOURCING_NAME == NULL || other_sourcing_name())\n     {\n \tVIM_CLEAR(last_sourcing_name);\n-\tif (SOURCING_NAME != NULL)\n+\tif (HAVE_SOURCING_INFO && SOURCING_NAME != NULL)\n \t    last_sourcing_name = vim_strsave(SOURCING_NAME);\n     }\n     --no_wait_return;\n", "result": true}