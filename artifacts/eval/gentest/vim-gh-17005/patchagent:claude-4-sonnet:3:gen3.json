{"patch": "diff --git a/src/popupmenu.c b/src/popupmenu.c\nindex 71bb49984..a9a9c714a 100644\n--- a/src/popupmenu.c\n+++ b/src/popupmenu.c\n@@ -847,7 +847,7 @@ pum_redraw(void)\n \n \t\t\t\tif (last_char != NULL)\n \t\t\t\t{\n-\t\t\t\t    if (used_cells < ellipsis_width)\n+\t\t\t\t    if (used_cells < ellipsis_width && st_end > st)\n \t\t\t\t    {\n \t\t\t\t\tMB_PTR_BACK(st, st_end);\n \t\t\t\t\tlast_char = st_end;\n", "result": true}