{"patch": "--- a/src/tuple.c\n+++ b/src/tuple.c\n@@ -516,6 +516,13 @@\n \tif (rettv->v_type != VAR_UNKNOWN)\n \t{\n \t    // Add the first item to the tuple from \"rettv\"\n \t    if (tuple_append_tv(tuple, rettv) == FAIL)\n \t\treturn FAIL;\n+        // After transferring rettv to the tuple, clear it to avoid double free on error paths.\n+        rettv->v_type = VAR_UNKNOWN;\n+        rettv->vval.v_number = 0;\n+        /* For robustness, clear all union members (not strictly needed for tagged union): */\n+        rettv->vval.v_float = 0;\n+        rettv->vval.v_string = NULL;\n+        rettv->vval.v_list = NULL;\n \t}\n", "result": true}