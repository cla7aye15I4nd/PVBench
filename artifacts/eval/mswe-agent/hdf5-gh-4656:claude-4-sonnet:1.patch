
diff --git a/.gitignore b/.gitignore
index d6b8b714dc..20a5dca7fa 100644
--- a/.gitignore
+++ b/.gitignore
@@ -45,3 +45,14 @@ src/H5version.h
 /.classpath
 /CMakeUserPresets.json
 HDF5Examples/CMakeUserPresets.json
+build/
+Build/
+bin/
+lib/
+*.o
+*.out
+*.obj
+*.exe
+*.dll
+*.so
+*.dylib
diff --git a/install/cmake/hdf5-config-version.cmake b/install/cmake/hdf5-config-version.cmake
new file mode 100644
index 0000000000..1de56f387e
--- /dev/null
+++ b/install/cmake/hdf5-config-version.cmake
@@ -0,0 +1,85 @@
+# This is a basic version file for the Config-mode of find_package().
+# It is used by write_basic_package_version_file() as input file for configure_file()
+# to create a version-file which can be installed along a config.cmake file.
+#
+# The created file sets PACKAGE_VERSION_EXACT if the current version string and
+# the requested version string are exactly the same and it sets
+# PACKAGE_VERSION_COMPATIBLE if the current version is >= requested version,
+# but only if the requested major and minor versions are the same as the current
+# one.
+# The variable CVF_VERSION must be set before calling configure_file().
+
+
+set(PACKAGE_VERSION "1.15.0")
+
+if(PACKAGE_VERSION VERSION_LESS PACKAGE_FIND_VERSION)
+  set(PACKAGE_VERSION_COMPATIBLE FALSE)
+else()
+
+  if("1.15.0" MATCHES "^([0-9]+)\\.([0-9]+)")
+    set(CVF_VERSION_MAJOR "${CMAKE_MATCH_1}")
+    set(CVF_VERSION_MINOR "${CMAKE_MATCH_2}")
+
+    if(NOT CVF_VERSION_MAJOR VERSION_EQUAL 0)
+      string(REGEX REPLACE "^0+" "" CVF_VERSION_MAJOR "${CVF_VERSION_MAJOR}")
+    endif()
+    if(NOT CVF_VERSION_MINOR VERSION_EQUAL 0)
+      string(REGEX REPLACE "^0+" "" CVF_VERSION_MINOR "${CVF_VERSION_MINOR}")
+    endif()
+  else()
+    set(CVF_VERSION_MAJOR "1.15.0")
+    set(CVF_VERSION_MINOR "")
+  endif()
+
+  if(PACKAGE_FIND_VERSION_RANGE)
+    # both endpoints of the range must have the expected major and minor versions
+    math (EXPR CVF_VERSION_MINOR_NEXT "${CVF_VERSION_MINOR} + 1")
+    if (NOT (PACKAGE_FIND_VERSION_MIN_MAJOR STREQUAL CVF_VERSION_MAJOR
+          AND PACKAGE_FIND_VERSION_MIN_MINOR STREQUAL CVF_VERSION_MINOR)
+        OR ((PACKAGE_FIND_VERSION_RANGE_MAX STREQUAL "INCLUDE"
+            AND NOT (PACKAGE_FIND_VERSION_MAX_MAJOR STREQUAL CVF_VERSION_MAJOR
+              AND PACKAGE_FIND_VERSION_MAX_MINOR STREQUAL CVF_VERSION_MINOR))
+          OR (PACKAGE_FIND_VERSION_RANGE_MAX STREQUAL "EXCLUDE"
+            AND NOT PACKAGE_FIND_VERSION_MAX VERSION_LESS_EQUAL ${CVF_VERSION_MAJOR}.${CVF_VERSION_MINOR_NEXT})))
+      set(PACKAGE_VERSION_COMPATIBLE FALSE)
+    elseif(PACKAGE_FIND_VERSION_MIN_MAJOR STREQUAL CVF_VERSION_MAJOR
+        AND PACKAGE_FIND_VERSION_MIN_MINOR STREQUAL CVF_VERSION_MINOR
+        AND ((PACKAGE_FIND_VERSION_RANGE_MAX STREQUAL "INCLUDE" AND PACKAGE_VERSION VERSION_LESS_EQUAL PACKAGE_FIND_VERSION_MAX)
+        OR (PACKAGE_FIND_VERSION_RANGE_MAX STREQUAL "EXCLUDE" AND PACKAGE_VERSION VERSION_LESS PACKAGE_FIND_VERSION_MAX)))
+      set(PACKAGE_VERSION_COMPATIBLE TRUE)
+    else()
+      set(PACKAGE_VERSION_COMPATIBLE FALSE)
+    endif()
+  else()
+    if(NOT PACKAGE_FIND_VERSION_MAJOR VERSION_EQUAL 0)
+      string(REGEX REPLACE "^0+" "" PACKAGE_FIND_VERSION_MAJOR "${PACKAGE_FIND_VERSION_MAJOR}")
+    endif()
+    if(NOT PACKAGE_FIND_VERSION_MINOR VERSION_EQUAL 0)
+      string(REGEX REPLACE "^0+" "" PACKAGE_FIND_VERSION_MINOR "${PACKAGE_FIND_VERSION_MINOR}")
+    endif()
+
+    if((PACKAGE_FIND_VERSION_MAJOR STREQUAL CVF_VERSION_MAJOR) AND
+        (PACKAGE_FIND_VERSION_MINOR STREQUAL CVF_VERSION_MINOR))
+      set(PACKAGE_VERSION_COMPATIBLE TRUE)
+    else()
+      set(PACKAGE_VERSION_COMPATIBLE FALSE)
+    endif()
+
+    if(PACKAGE_FIND_VERSION STREQUAL PACKAGE_VERSION)
+      set(PACKAGE_VERSION_EXACT TRUE)
+    endif()
+  endif()
+endif()
+
+
+# if the installed or the using project don't have CMAKE_SIZEOF_VOID_P set, ignore it:
+if("${CMAKE_SIZEOF_VOID_P}" STREQUAL "" OR "8" STREQUAL "")
+  return()
+endif()
+
+# check that the installed version has the same 32/64bit-ness as the one which is currently searching:
+if(NOT CMAKE_SIZEOF_VOID_P STREQUAL "8")
+  math(EXPR installedBits "8 * 8")
+  set(PACKAGE_VERSION "${PACKAGE_VERSION} (${installedBits}bit)")
+  set(PACKAGE_VERSION_UNSUITABLE TRUE)
+endif()
diff --git a/install/cmake/hdf5-config.cmake b/install/cmake/hdf5-config.cmake
new file mode 100644
index 0000000000..bcc223c202
--- /dev/null
+++ b/install/cmake/hdf5-config.cmake
@@ -0,0 +1,267 @@
+#
+# Copyright by The HDF Group.
+# All rights reserved.
+#
+# This file is part of HDF5.  The full HDF5 copyright notice, including
+# terms governing use, modification, and redistribution, is contained in
+# the COPYING file, which can be found at the root of the source code
+# distribution tree, or in https://www.hdfgroup.org/licenses.
+# If you do not have access to either file, you may request a copy from
+# help@hdfgroup.org.
+#
+#-----------------------------------------------------------------------------
+# HDF5 Config file for compiling against hdf5 build/install directory
+#-----------------------------------------------------------------------------
+
+####### Expanded from @PACKAGE_INIT@ by configure_package_config_file() #######
+####### Any changes to this file will be overwritten by the next CMake run ####
+####### The input file was hdf5-config.cmake.in                            ########
+
+get_filename_component(PACKAGE_PREFIX_DIR "${CMAKE_CURRENT_LIST_DIR}/../" ABSOLUTE)
+
+macro(set_and_check _var _file)
+  set(${_var} "${_file}")
+  if(NOT EXISTS "${_file}")
+    message(FATAL_ERROR "File or directory ${_file} referenced by variable ${_var} does not exist !")
+  endif()
+endmacro()
+
+macro(check_required_components _NAME)
+  foreach(comp ${${_NAME}_FIND_COMPONENTS})
+    if(NOT ${_NAME}_${comp}_FOUND)
+      if(${_NAME}_FIND_REQUIRED_${comp})
+        set(${_NAME}_FOUND FALSE)
+      endif()
+    endif()
+  endforeach()
+endmacro()
+
+####################################################################################
+
+string(TOUPPER hdf5 HDF5_PACKAGE_NAME)
+
+set (${HDF5_PACKAGE_NAME}_VALID_COMPONENTS
+    static
+    shared
+    C
+    CXX
+    Fortran
+    HL
+    CXX_HL
+    Fortran_HL
+    Java
+    Tools
+)
+
+set (${HDF5_PACKAGE_NAME}_BUILD_MODE       Release)
+
+#-----------------------------------------------------------------------------
+# User Options
+#-----------------------------------------------------------------------------
+# Languages:
+#-----------------------------------------------------------------------------
+set (${HDF5_PACKAGE_NAME}_BUILD_FORTRAN        OFF)
+set (${HDF5_PACKAGE_NAME}_BUILD_CPP_LIB        OFF)
+set (${HDF5_PACKAGE_NAME}_BUILD_JAVA           OFF)
+set (${HDF5_PACKAGE_NAME}_INSTALL_MOD_FORTRAN "")
+#-----------------------------------------------------------------------------
+# Features:
+#-----------------------------------------------------------------------------
+set (${HDF5_PACKAGE_NAME}_BUILD_HL_LIB          ON)
+set (${HDF5_PACKAGE_NAME}_BUILD_SHARED_LIBS     YES)
+set (${HDF5_PACKAGE_NAME}_BUILD_STATIC_LIBS     YES)
+set (${HDF5_PACKAGE_NAME}_ENABLE_THREADSAFE     OFF)
+set (${HDF5_PACKAGE_NAME}_ENABLE_PARALLEL       OFF)
+set (${HDF5_PACKAGE_NAME}_DEFAULT_API_VERSION  "v116")
+set (${HDF5_PACKAGE_NAME}_ENABLE_DEPRECATED_SYMBOLS ON)
+set (${HDF5_PACKAGE_NAME}_BUILD_DIMENSION_SCALES_WITH_NEW_REF )
+#-----------------------------------------------------------------------------
+set (${HDF5_PACKAGE_NAME}_BUILD_TOOLS           ON)
+set (${HDF5_PACKAGE_NAME}_BUILD_HL_GIF_TOOLS    OFF)
+set (${HDF5_PACKAGE_NAME}_BUILD_STATIC_TOOLS    OFF)
+#-----------------------------------------------------------------------------
+set (${HDF5_PACKAGE_NAME}_ENABLE_NONSTANDARD_FEATURE_FLOAT16 ON)
+#-----------------------------------------------------------------------------
+set (${HDF5_PACKAGE_NAME}_ENABLE_Z_LIB_SUPPORT  ON)
+set (${HDF5_PACKAGE_NAME}_ENABLE_SZIP_SUPPORT   OFF)
+set (${HDF5_PACKAGE_NAME}_ENABLE_SZIP_ENCODING  ON)
+#-----------------------------------------------------------------------------
+set (${HDF5_PACKAGE_NAME}_ENABLE_MAP_API        OFF)
+set (${HDF5_PACKAGE_NAME}_ENABLE_DIRECT_VFD     OFF)
+set (${HDF5_PACKAGE_NAME}_ENABLE_MIRROR_VFD     OFF)
+set (${HDF5_PACKAGE_NAME}_ENABLE_ROS3_VFD       OFF)
+set (${HDF5_PACKAGE_NAME}_ENABLE_HDFS_VFD       OFF)
+set (${HDF5_PACKAGE_NAME}_ENABLE_SUBFILING_VFD  OFF)
+set (${HDF5_PACKAGE_NAME}_ENABLE_PLUGIN_SUPPORT OFF)
+#-----------------------------------------------------------------------------
+set (${HDF5_PACKAGE_NAME}_PACKAGE_EXTLIBS       OFF)
+set (${HDF5_PACKAGE_NAME}_EXPORT_LIBRARIES      hdf5-static;hdf5-shared;hdf5_tools-static;hdf5_tools-shared;hdf5_hl-static;hdf5_hl-shared)
+set (${HDF5_PACKAGE_NAME}_ARCHITECTURE         "")
+set (${HDF5_PACKAGE_NAME}_TOOLSET              "")
+
+#-----------------------------------------------------------------------------
+# Dependencies
+#-----------------------------------------------------------------------------
+if (${HDF5_PACKAGE_NAME}_ENABLE_PARALLEL)
+  set (${HDF5_PACKAGE_NAME}_MPI_C_INCLUDE_PATH "")
+  set (${HDF5_PACKAGE_NAME}_MPI_C_LIBRARIES    "")
+  if (${HDF5_PACKAGE_NAME}_BUILD_FORTRAN)
+    set (${HDF5_PACKAGE_NAME}_MPI_Fortran_INCLUDE_PATH "")
+    set (${HDF5_PACKAGE_NAME}_MPI_Fortran_LIBRARIES    "")
+  endif ()
+  set (${HDF5_PACKAGE_NAME}_PARALLEL_FILTERED_WRITES )
+  set (${HDF5_PACKAGE_NAME}_LARGE_PARALLEL_IO        )
+
+  find_package(MPI QUIET REQUIRED)
+endif ()
+
+if (${HDF5_PACKAGE_NAME}_ENABLE_THREADSAFE OR ${HDF5_PACKAGE_NAME}_ENABLE_SUBFILING_VFD)
+  set(THREADS_PREFER_PTHREAD_FLAG ON)
+  find_package(Threads QUIET REQUIRED)
+endif ()
+
+if (${HDF5_PACKAGE_NAME}_BUILD_JAVA)
+  set (${HDF5_PACKAGE_NAME}_JAVA_INCLUDE_DIRS
+      ${PACKAGE_PREFIX_DIR}/lib/jarhdf5-1.15.0.jar
+      ${PACKAGE_PREFIX_DIR}/lib/slf4j-api-2.0.6.jar
+      ${PACKAGE_PREFIX_DIR}/lib/slf4j-nop-2.0.6.jar
+  )
+endif ()
+
+#-----------------------------------------------------------------------------
+# Directories
+#-----------------------------------------------------------------------------
+set (${HDF5_PACKAGE_NAME}_INCLUDE_DIR "${PACKAGE_PREFIX_DIR}/include" "${${HDF5_PACKAGE_NAME}_MPI_C_INCLUDE_DIRS}")
+
+set (${HDF5_PACKAGE_NAME}_SHARE_DIR "${PACKAGE_PREFIX_DIR}/cmake")
+set_and_check (${HDF5_PACKAGE_NAME}_BUILD_DIR "${PACKAGE_PREFIX_DIR}")
+
+if (${HDF5_PACKAGE_NAME}_BUILD_CPP_LIB)
+  set (${HDF5_PACKAGE_NAME}_INCLUDE_DIR_CPP "${PACKAGE_PREFIX_DIR}/include")
+endif ()
+
+if (${HDF5_PACKAGE_NAME}_BUILD_HL_LIB)
+  set (${HDF5_PACKAGE_NAME}_INCLUDE_DIR_HL "${PACKAGE_PREFIX_DIR}/include")
+endif ()
+
+if (${HDF5_PACKAGE_NAME}_BUILD_HL_LIB AND ${HDF5_PACKAGE_NAME}_BUILD_CPP_LIB)
+  set (${HDF5_PACKAGE_NAME}_INCLUDE_DIR_HL_CPP "${PACKAGE_PREFIX_DIR}/include")
+endif ()
+
+if (${HDF5_PACKAGE_NAME}_BUILD_TOOLS)
+  set (${HDF5_PACKAGE_NAME}_INCLUDE_DIR_TOOLS "${PACKAGE_PREFIX_DIR}/include")
+  set_and_check (${HDF5_PACKAGE_NAME}_TOOLS_DIR "${PACKAGE_PREFIX_DIR}/bin")
+endif ()
+
+#-----------------------------------------------------------------------------
+# Version Strings
+#-----------------------------------------------------------------------------
+set (${HDF5_PACKAGE_NAME}_VERSION_STRING 1.15.0)
+set (${HDF5_PACKAGE_NAME}_VERSION_MAJOR  1.15)
+set (${HDF5_PACKAGE_NAME}_VERSION_MINOR  0)
+
+#-----------------------------------------------------------------------------
+# Don't include targets if this file is being picked up by another
+# project which has already built hdf5 as a subproject
+#-----------------------------------------------------------------------------
+if (NOT TARGET "hdf5")
+  if (${HDF5_PACKAGE_NAME}_ENABLE_Z_LIB_SUPPORT AND ${HDF5_PACKAGE_NAME}_PACKAGE_EXTLIBS)
+    include (${PACKAGE_PREFIX_DIR}/cmake/-targets.cmake)
+  endif ()
+  if (${HDF5_PACKAGE_NAME}_ENABLE_SZIP_SUPPORT AND ${HDF5_PACKAGE_NAME}_PACKAGE_EXTLIBS)
+    include (${PACKAGE_PREFIX_DIR}/cmake/-targets.cmake)
+  endif ()
+  include (${PACKAGE_PREFIX_DIR}/cmake/hdf5-targets.cmake)
+endif ()
+
+# Handle default component(static) :
+if (NOT ${HDF5_PACKAGE_NAME}_FIND_COMPONENTS)
+  if (${HDF5_PACKAGE_NAME}_BUILD_STATIC_LIBS)
+    set (${HDF5_PACKAGE_NAME}_LIB_TYPE)
+    set (${HDF5_PACKAGE_NAME}_FIND_COMPONENTS C HL static)
+    set (${HDF5_PACKAGE_NAME}_FIND_REQUIRED_static_C true)
+  else ()
+    set (${HDF5_PACKAGE_NAME}_LIB_TYPE)
+    set (${HDF5_PACKAGE_NAME}_FIND_COMPONENTS C HL shared)
+    set (${HDF5_PACKAGE_NAME}_FIND_REQUIRED_shared_C true)
+  endif ()
+endif ()
+
+# Handle requested components:
+list (REMOVE_DUPLICATES ${HDF5_PACKAGE_NAME}_FIND_COMPONENTS)
+foreach (comp IN LISTS ${HDF5_PACKAGE_NAME}_FIND_COMPONENTS)
+  if (comp STREQUAL "shared")
+    list (REMOVE_ITEM ${HDF5_PACKAGE_NAME}_FIND_COMPONENTS ${comp})
+    set (${HDF5_PACKAGE_NAME}_LIB_TYPE ${${HDF5_PACKAGE_NAME}_LIB_TYPE} ${comp})
+
+    if (${HDF5_PACKAGE_NAME}_BUILD_FORTRAN AND ${HDF5_PACKAGE_NAME}_INSTALL_MOD_FORTRAN STREQUAL "SHARED")
+      set (${HDF5_PACKAGE_NAME}_INCLUDE_DIR_FORTRAN "${PACKAGE_PREFIX_DIR}/include/shared")
+    endif ()
+  elseif (comp STREQUAL "static")
+    list (REMOVE_ITEM ${HDF5_PACKAGE_NAME}_FIND_COMPONENTS ${comp})
+    set (${HDF5_PACKAGE_NAME}_LIB_TYPE ${${HDF5_PACKAGE_NAME}_LIB_TYPE} ${comp})
+
+    if (${HDF5_PACKAGE_NAME}_BUILD_FORTRAN AND ${HDF5_PACKAGE_NAME}_INSTALL_MOD_FORTRAN STREQUAL "STATIC")
+      set (${HDF5_PACKAGE_NAME}_INCLUDE_DIR_FORTRAN "${PACKAGE_PREFIX_DIR}/include/static")
+    endif ()
+  endif ()
+endforeach ()
+foreach (libtype IN LISTS ${HDF5_PACKAGE_NAME}_LIB_TYPE)
+  foreach (comp IN LISTS ${HDF5_PACKAGE_NAME}_FIND_COMPONENTS)
+    set (hdf5_comp2)
+    if (comp STREQUAL "C")
+      set (hdf5_comp "hdf5")
+    elseif (comp STREQUAL "CXX")
+      set (hdf5_comp "hdf5_cpp")
+    elseif (comp STREQUAL "HL")
+      set (hdf5_comp "hdf5_hl")
+    elseif (comp STREQUAL "CXX_HL")
+      set (hdf5_comp "hdf5_hl_cpp")
+    elseif (comp STREQUAL "Java")
+      set (hdf5_comp "hdf5_java")
+    elseif (comp STREQUAL "Tools")
+      set (hdf5_comp "hdf5_tools")
+    elseif (comp STREQUAL "Fortran")
+      set (hdf5_comp2 "hdf5_f90cstub")
+      set (hdf5_comp "hdf5_fortran")
+    elseif (comp STREQUAL "Fortran_HL")
+      set (hdf5_comp2 "hdf5_hl_f90cstub")
+      set (hdf5_comp "hdf5_hl_fortran")
+    endif ()
+    if (comp STREQUAL "Java")
+      list (FIND ${HDF5_PACKAGE_NAME}_EXPORT_LIBRARIES "${hdf5_comp}" HAVE_COMP)
+    else ()
+      list (FIND ${HDF5_PACKAGE_NAME}_EXPORT_LIBRARIES "${hdf5_comp}-${libtype}" HAVE_COMP)
+    endif ()
+    if (${HAVE_COMP} LESS 0)
+      if (comp STREQUAL "Java")
+        set (${HDF5_PACKAGE_NAME}_${comp}_FOUND 0)
+      else ()
+        set (${HDF5_PACKAGE_NAME}_${libtype}_${comp}_FOUND 0)
+      endif ()
+    else ()
+      if (hdf5_comp2)
+        list (FIND ${HDF5_PACKAGE_NAME}_EXPORT_LIBRARIES "${hdf5_comp2}-${libtype}" HAVE_COMP2)
+        if (${HAVE_COMP2} LESS 0)
+          set (${HDF5_PACKAGE_NAME}_${libtype}_${comp}_FOUND 0)
+        else ()
+          set (${HDF5_PACKAGE_NAME}_${libtype}_${comp}_FOUND ...ake specific
+            files may change before the next release.
+
+         2. CMake for HDF5 development should be usable on any system
+            where CMake is supported. Please send us any comments on how
+            CMake support can be improved on any system.
+
+         3. See the appendix at the bottom of this file for an example
+            of using a ctest script for building and testing. See
+            INSTALL_CMake.txt for more information.
+
+         4. See https://cmake.org/cmake/help/latest/command/find_package.html
+            for more information on the CMake "Config Mode Search Procedure".
+
+
+========================================================================
+I. Preconditions
+========================================================================
+
+   1. We suggest you obtain the latest CMake for your platform from the Kitware
+      web site. The HDF5 1.15.x product requires a minimum CMake version
+      of 3.18. If you are using VS2022, the minimum CMake version is 3.21.
+
+   2. You have installed the HDF5 library built with CMake, by executing
+      the HDF Install Utility (the *.msi file in the binary package for
+      Windows or the *.sh on Linux). You can obtain pre-built binaries
+      from The HDF Group's website at www.hdfgroup.org.
+
+   3. Set the HDF5_ROOT CMake variable, -DHDF5_ROOT=<install_path>
+      or environment variable, set(ENV{HDF5_ROOT} "<install_path>")
+      to the installed location of HDF5.
+         On Windows:
+            HDF5_ROOT=C:/Program Files/HDF_Group/HDF5/1.15.x/
+         On unix:
+            HDF5_ROOT=<install root folder>/HDF_Group/HDF5/1.15.x/
+
+      If you are using shared libraries, you may need to add to the path
+      environment variable. Set the path environment variable to the
+      installed location of the library files for HDF5.
+         On Windows (*.dll):
+            PATH=%PATH%;C:/Program Files/HDF_Group/HDF5/1.15.x/bin
+         On unix (*.so):
+            LD_LIBRARY_PATH=$LD_LIBRARY_PATH:<install root folder>/HDF_Group/HDF5/1.15.x/lib
+
+      If you are using filter plugin libraries, you will need to set the
+      HDF5_PLUGIN_PATH environment variable.
+         On Windows:
+            HDF5_PLUGIN_PATH=C:/Program Files/HDF_Group/HDF5/1.15.x/lib/plugin
+         On unix:
+            HDF5_PLUGIN_PATH=<install root folder>/HDF_Group/HDF5/1.15.x/lib/plugin
+
+      (Note there are no quote characters used on Windows and all platforms
+      use forward slashes)
+
+   4. Created separate source and build directories.
+      (CMake commands are executed in the build directory)
+
+   5. Created a CMakeLists.txt file(s) for your source. See Section III
+      below.
+
+
+
+========================================================================
+II. Building HDF5 Applications with CMake
+========================================================================
+
+Go through these steps to build HDF5 applications with CMake.
+   (The application must support building with CMake.)
+
+   1. Run CMake
+   2. Configure the cache settings
+   3. Build HDF5 Applications
+   4. Test HDF5 Applications
+
+These steps are described in more detail below.
+   1. Run CMake
+
+      The visual CMake executable is named "cmake-gui.exe" on Windows and should be
+      available in your Start menu. For Linux, UNIX, and Mac users the
+      executable is named "cmake-gui" and can be found where CMake was
+      installed.
+
+      Specify the source and build directories. Make the build and source
+      directories different. For example on Windows, if the source is at
+      c:\MyHDFstuff\hdf5, then use c:\MyHDFstuff\hdf5\build or
+      c:\MyHDFstuff\build\hdf5 for the build directory.
+
+      PREFERRED:
+        Users can perform the configuration step without using the visual
+        cmake-gui program. The following is an example command line
+        configuration step executed within the build directory:
+
+        cmake -G "<generator>"  [-D<options>]  <sourcepath>
+
+        Where <generator> is
+            * MinGW Makefiles
+            * NMake Makefiles
+            * Unix Makefiles
+            * Visual Studio 15 2017
+            * Visual Studio 15 2017 Win64
+            * Visual Studio 16 2019
+            * ... in addition VS2019 will need to set the "-A" option,
+            * ... [Win32, x64, ARM, ARM64]
+            * Visual Studio 17 2022
+            * ... in addition VS2022 will need to set the "-A" option,
+            * ... [Win32, x64, ARM, ARM64]
+
+        <options> is:
+            * BUILD_TESTING:BOOL=ON
+            * BUILD_SHARED_LIBS:BOOL=[ON | OFF]
+
+   2. Configure the cache settings
+
+      2.1  Visual CMake users, click the Configure button. If this is the first time you are
+           running cmake-gui in this directory, you will be prompted for the
+           generator you wish to use (for example on Windows, Visual Studio 16 2019).
+           CMake will read in the CMakeLists.txt files from the source directory and
+           display options for the HDF5 project. After the first configure you
+           can adjust the cache settings and/or specify locations of other programs.
+
+           Any conflicts or new values will be highlighted by the configure
+           process in red. Once you are happy with all the settings and there are no
+           more values in red, click the Generate button to produce the appropriate
+           build files.
+
+           On Windows, if you are using a Visual Studio generator, the solution and
+           project files will be created in the build folder.
+
+           On linux, if you are using the Unix Makefiles generator, the Makefiles will
+           be created in the build folder.
+
+      2.2  Alternative command line example on Windows in c:\MyHDFstuff\hdf5\build directory:
+
+           cmake -G "Visual Studio 16 2019" -A "x64" -DBUILD_TESTING:BOOL=ON ..
+
+   3. Build HDF5 Applications
+
+      On Windows, you can build HDF5 applications using either the Visual Studio Environment
+      or the command line. The command line is normally used on linux, Unix, and Mac.
+
+      To build from the command line, navigate to your build directory and
+      execute the following:
+
+              cmake --build . --config {Debug | Release}
+
+      NOTE: "--config {Debug | Release}" may be optional on your platform. We
+            recommend choosing either Debug or Release on Windows. If you are
+            using the pre-built binaries from HDF, use Release.
+
+      3.1  If you wish to use the Visual Studio environment, open the solution
+           file in your build directory. Be sure to select either Debug or
+           Release and build the solution.
+
+   4. Test HDF5 Applications
+
+      To test the build, navigate to your build directory and execute:
+
+              ctest . -C {Debug | Release}
+
+      NOTE: "-C {Debug | Release}" may be optional on your platform. We
+            recommend choosing either Debug or Release to match the build
+            step on Windows.
+
+   5. The files that support building with CMake are all of the files in the
+      config/cmake folder, the CMakeLists.txt files in each source folder, and
+      CTestConfig.cmake. CTestConfig.cmake is specific to the internal testing
+      performed by The HDF Group. It should be altered for the user's
+      installation and needs. The cacheinit.cmake file settings are used by
+      The HDF Group for daily testing. It should be altered/ignored for the user's
+      installation and needs.
+
+
+
+========================================================================
+III. Minimum C Project Files for CMake
+========================================================================
+
+Given the preconditions in section I, create a CMakeLists.txt file at the
+source root. Include the following text in the file:
+
+##########################################################
+cmake_minimum_required (VERSION 3.18)
+project (HDF5MyApp C)
+
+set (LIB_TYPE STATIC) # or SHARED
+string(TOLOWER ${LIB_TYPE} SEARCH_TYPE)
+
+find_package (HDF5 NAMES hdf5 COMPONENTS C ${SEARCH_TYPE})
+# find_package (HDF5) # Find non-cmake built HDF5
+set_directory_properties(PROPERTIES INCLUDE_DIRECTORIES "${HDF5_INCLUDE_DIR}")
+set (LINK_LIBS ${LINK_LIBS} ${HDF5_C_${LIB_TYPE}_LIBRARY})
+
+set (example hdf_example)
+
+add_executable (${example} ${PROJECT_SOURCE_DIR}/${example}.c)
+target_link_libraries (${example} ${LINK_LIBS})
+
+enable_testing ()
+include (CTest)
+
+add_test (NAME test_example COMMAND ${example})
+##########################################################
+
+
+
+========================================================================
+IV. APPENDIX
+========================================================================
+
+Below is an example of a ctest script that can be used to build the examples.
+Adjust the values as necessary. Note that the defaults can be entered on the
+command line and the build folder is created as a sub-folder. Windows should
+adjust the forward slash to double backslashes, except for the HDF_DIR
+environment variable.
+
+NOTE: this file is available in the HDF5 repository, for more information see:
+    https://github.com/HDFGroup/hdf5/blob/develop/release_docs/USING_CMake_Examples.txt
+
+           ctest -S HDF5_Examples.cmake -C Release -V -O test.log
+
+Also available at the HDF web site is a CMake application framework template.
+You can quickly add files to the framework and execute the script to compile
+your application with an installed HDF5 binary.
+
+
+========================================================================
+For further assistance, send email to help@hdfgroup.org
+========================================================================
+
+
diff --git a/poc b/poc
new file mode 100755
index 0000000000..cae1a52915
Binary files /dev/null and b/poc differ
diff --git a/poc.c b/poc.c
new file mode 100644
index 0000000000..cd731fccfc
--- /dev/null
+++ b/poc.c
@@ -0,0 +1,83 @@
+#include "hdf5.h"
+#include <stdio.h>
+#include <stdlib.h>
+
+#define FILE_NAME "tid.h5"
+#define DSET_NAME "Dataset 1"
+
+static int
+test_appropriate_ids(void)
+{
+    hid_t    file_id  = H5I_INVALID_HID;
+    hid_t    fapl_id  = H5I_INVALID_HID;
+    hid_t    fcpl_id  = H5I_INVALID_HID;
+    hid_t    plist    = H5I_INVALID_HID;
+    hid_t    dset_id  = H5I_INVALID_HID;
+    hid_t    space_id = H5I_INVALID_HID;
+    hsize_t  dims     = 2;
+    hssize_t free_space;
+    herr_t   ret = 0; /* Generic return value */
+
+    fcpl_id = H5Pcreate(H5P_FILE_CREATE);
+    file_id = H5Fcreate(FILE_NAME, H5F_ACC_TRUNC, fcpl_id, H5P_DEFAULT);
+
+    space_id = H5Screate_simple(1, &dims, NULL);
+    dset_id = H5Dcreate2(file_id, DSET_NAME, H5T_NATIVE_INT, space_id, H5P_DEFAULT, H5P_DEFAULT, H5P_DEFAULT);
+
+    ret = H5Pclose(fcpl_id);
+    ret = H5Sclose(space_id);
+    ret = H5Dclose(dset_id);
+    ret = H5Fclose(file_id);
+
+    file_id = H5Fopen(FILE_NAME, H5F_ACC_RDONLY, H5P_DEFAULT);
+    fcpl_id = H5Fget_create_plist(file_id);
+    fapl_id = H5Fget_access_plist(file_id);
+    dset_id = H5Dopen2(file_id, DSET_NAME, H5P_DEFAULT);
+
+    H5E_BEGIN_TRY
+    {
+        plist = H5Fget_create_plist(dset_id); /* dset_id is not file ID */
+    }
+    H5E_END_TRY
+    H5E_BEGIN_TRY
+    {
+        plist = H5Fget_access_plist(fapl_id); /* fapl_id is not file ID */
+    }
+    H5E_END_TRY
+    H5E_BEGIN_TRY
+    {
+        unsigned intent;                       /* File access flags */
+        ret = H5Fget_intent(dset_id, &intent); /* dset_id is not file ID */
+    }
+    H5E_END_TRY
+    H5E_BEGIN_TRY
+    {
+        unsigned long fileno = 0;
+        ret                  = H5Fget_fileno(dset_id, &fileno); /* dset_id is not file ID */
+    }
+    H5E_END_TRY
+    H5E_BEGIN_TRY
+    {
+        free_space = H5Fget_freespace(dset_id); /* dset_id is not file ID */
+    }
+    H5E_END_TRY
+    H5E_BEGIN_TRY
+    {
+        void *os_file_handle = NULL;                                    /* OS file handle */
+        ret = H5Fget_vfd_handle(fapl_id, H5P_DEFAULT, &os_file_handle); /* fapl_id is not file ID */
+    }
+    H5E_END_TRY
+
+    ret = H5Pclose(fapl_id);
+    ret = H5Pclose(fcpl_id);
+    ret = H5Dclose(dset_id);
+    ret = H5Fclose(file_id);
+
+    return 0;
+}
+int main(void)
+{
+    test_appropriate_ids();
+    printf("Script completed successfully, no errors.\n");
+    return 0;
+}
diff --git a/src/H5F.c b/src/H5F.c
index 5dcda18924..4b7af47edf 100644
--- a/src/H5F.c
+++ b/src/H5F.c
@@ -118,6 +118,8 @@ H5Fget_create_plist(hid_t file_id)
     FUNC_ENTER_API(H5I_INVALID_HID)
 
     /* check args */
+    if (H5I_FILE != H5I_get_type(file_id))
+        HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, H5I_INVALID_HID, "not a file ID");
     if (NULL == (vol_obj = (H5VL_object_t *)H5I_object(file_id)))
         HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, H5I_INVALID_HID, "invalid file identifier");
 
@@ -164,6 +166,8 @@ H5Fget_access_plist(hid_t file_id)
     FUNC_ENTER_API(H5I_INVALID_HID)
 
     /* Check args */
+    if (H5I_FILE != H5I_get_type(file_id))
+        HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, H5I_INVALID_HID, "not a file ID");
     if (NULL == (vol_obj = (H5VL_object_t *)H5I_object(file_id)))
         HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, H5I_INVALID_HID, "invalid file identifier");
 
@@ -438,6 +442,10 @@ H5Fget_vfd_handle(hid_t file_id, hid_t fapl_id, void **file_handle /*out*/)
     if (!file_handle)
         HGOTO_ERROR(H5E_ARGS, H5E_BADVALUE, FAIL, "invalid file handle pointer");
 
+    /* Check that file_id is a file ID */
+    if (H5I_FILE != H5I_get_type(file_id))
+        HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, "not a file ID");
+
     /* Get the file object */
     if (NULL == (vol_obj = (H5VL_object_t *)H5I_object(file_id)))
         HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, "invalid file identifier");
@@ -1554,6 +1562,10 @@ H5Fget_intent(hid_t file_id, unsigned *intent_flags /*out*/)
         H5VL_object_t       *vol_obj;     /* File for file_id */
         H5VL_file_get_args_t vol_cb_args; /* Arguments to VOL callback */
 
+        /* Check that file_id is a file ID */
+        if (H5I_FILE != H5I_get_type(file_id))
+            HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, "not a file ID");
+
         /* Get the internal file structure */
         if (NULL == (vol_obj = (H5VL_object_t *)H5I_object(file_id)))
             HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, "invalid file identifier");
@@ -1592,6 +1604,9 @@ H5Fget_fileno(hid_t file_id, unsigned long *fnumber /*out*/)
     if (fnumber) {
         H5VL_object_t       *vol_obj;     /* File for file_id */
         H5VL_file_get_args_t vol_cb_args; /* Arguments to VOL callback */
+        /* Check that file_id is a file ID */
+        if (H5I_FILE != H5I_get_type(file_id))
+            HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, "not a file ID");
 
         /* Get the internal file structure */
         if (NULL == (vol_obj = (H5VL_object_t *)H5I_object(file_id)))
@@ -1630,6 +1645,10 @@ H5Fget_freespace(hid_t file_id)
 
     FUNC_ENTER_API((-1))
 
+    /* Check that file_id is a file ID */
+    if (H5I_FILE != H5I_get_type(file_id))
+        HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, (-1), "not a file ID");
+
     /* Get the file object */
     if (NULL == (vol_obj = (H5VL_object_t *)H5I_object(file_id)))
         HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, (-1), "invalid file identifier");
diff --git a/src/H5VLnative_file.c b/src/H5VLnative_file.c
index 33a19bfd91..171fbf60b5 100644
--- a/src/H5VLnative_file.c
+++ b/src/H5VLnative_file.c
@@ -158,7 +158,10 @@ H5VL__native_file_get(void *obj, H5VL_file_get_args_t *args, hid_t H5_ATTR_UNUSE
     switch (args->op_type) {
         /* "get container info" */
         case H5VL_FILE_GET_CONT_INFO: {
-            if (H5F__get_cont_info((H5F_t *)obj, args->args.get_cont_info.info) < 0)
+            if (H5VL_native_get_file_struct(obj, H5I_FILE, &f) < 0)
+                HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, "not a file or file object");
+
+            if (H5F__get_cont_info(f, args->args.get_cont_info.info) < 0)
                 HGOTO_ERROR(H5E_FILE, H5E_CANTGET, FAIL, "can't get file container info");
 
             break;
@@ -166,7 +169,10 @@ H5VL__native_file_get(void *obj, H5VL_file_get_args_t *args, hid_t H5_ATTR_UNUSE
 
         /* H5Fget_access_plist */
         case H5VL_FILE_GET_FAPL: {
-            if ((args->args.get_fapl.fapl_id = H5F_get_access_plist((H5F_t *)obj, true)) < 0)
+            if (H5VL_native_get_file_struct(obj, H5I_FILE, &f) < 0)
+                HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, "not a file or file object");
+
+            if ((args->args.get_fapl.fapl_id = H5F_get_access_plist(f, true)) < 0)
                 HGOTO_ERROR(H5E_FILE, H5E_CANTGET, FAIL, "can't get file access property list");
 
             break;
@@ -176,7 +182,9 @@ H5VL__native_file_get(void *obj, H5VL_file_get_args_t *args, hid_t H5_ATTR_UNUSE
         case H5VL_FILE_GET_FCPL: {
             H5P_genplist_t *plist; /* Property list */
 
-            f = (H5F_t *)obj;
+            if (H5VL_native_get_file_struct(obj, H5I_FILE, &f) < 0)
+                HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, "not a file or file object");
+
             if (NULL == (plist = (H5P_genplist_t *)H5I_object(f->shared->fcpl_id)))
                 HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, "not a property list");
 
@@ -189,7 +197,8 @@ H5VL__native_file_get(void *obj, H5VL_file_get_args_t *args, hid_t H5_ATTR_UNUSE
 
         /* H5Fget_intent */
         case H5VL_FILE_GET_INTENT: {
-            f = (H5F_t *)obj;
+            if (H5VL_native_get_file_struct(obj, H5I_FILE, &f) < 0)
+                HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, "not a file or file object");
 
             /* HDF5 uses some flags internally that users don't know about.
              * Simplify things for them so that they only get either H5F_ACC_RDWR
@@ -217,7 +226,10 @@ H5VL__native_file_get(void *obj, H5VL_file_get_args_t *args, hid_t H5_ATTR_UNUSE
         case H5VL_FILE_GET_FILENO: {
             unsigned long fileno = 0;
 
-            H5F_GET_FILENO((H5F_t *)obj, fileno);
+            if (H5VL_native_get_file_struct(obj, H5I_FILE, &f) < 0)
+                HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, "not a file or file object");
+
+            H5F_GET_FILENO(f, fileno);
             *args->args.get_fileno.fileno = fileno;
 
             break;
@@ -246,7 +258,10 @@ H5VL__native_file_get(void *obj, H5VL_file_get_args_t *args, hid_t H5_ATTR_UNUSE
 
         /* H5Fget_obj_count */
         case H5VL_FILE_GET_OBJ_COUNT: {
-            if (H5F_get_obj_count((H5F_t *)obj, args->args.get_obj_count.types, true,
+            if (H5VL_native_get_file_struct(obj, H5I_FILE, &f) < 0)
+                HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, "not a file or file object");
+
+            if (H5F_get_obj_count(f, args->args.get_obj_count.types, true,
                                   args->args.get_obj_count.count) < 0)
                 HGOTO_ERROR(H5E_FILE, H5E_CANTGET, FAIL, "can't retrieve object count");
 
@@ -257,7 +272,10 @@ H5VL__native_file_get(void *obj, H5VL_file_get_args_t *args, hid_t H5_ATTR_UNUSE
         case H5VL_FILE_GET_OBJ_IDS: {
             H5VL_file_get_obj_ids_args_t *file_args = &args->args.get_obj_ids;
 
-            if (H5F_get_obj_ids((H5F_t *)obj, file_args->types, file_args->max_objs, file_args->oid_list,
+            if (H5VL_native_get_file_struct(obj, H5I_FILE, &f) < 0)
+                HGOTO_ERROR(H5E_ARGS, H5E_BADTYPE, FAIL, "not a file or file object");
+
+            if (H5F_get_obj_ids(f, file_args->types, file_args->max_objs, file_args->oid_list,
                                 true, file_args->count) < 0)
                 HGOTO_ERROR(H5E_FILE, H5E_CANTGET, FAIL, "can't retrieve object IDs");
 
diff --git a/tid.h5 b/tid.h5
new file mode 100644
index 0000000000..88dbd35493
Binary files /dev/null and b/tid.h5 differ
