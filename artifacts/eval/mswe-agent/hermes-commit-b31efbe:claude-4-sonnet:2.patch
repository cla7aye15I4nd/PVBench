
diff --git a/.gitignore b/.gitignore
index 6da7d9204..71c032a2d 100644
--- a/.gitignore
+++ b/.gitignore
@@ -34,3 +34,14 @@ android/intltest/java/com/facebook/hermes/test/assets/**
 
 # clangd cache
 .cache/
+build/
+Build/
+bin/
+lib/
+*.o
+*.out
+*.obj
+*.exe
+*.dll
+*.so
+*.dylib
diff --git a/lib/AST/ES6Class.cpp b/lib/AST/ES6Class.cpp
index 42155e587..38c3e2c3f 100644
--- a/lib/AST/ES6Class.cpp
+++ b/lib/AST/ES6Class.cpp
@@ -223,16 +223,28 @@ class ES6ClassesTransformations {
   }
 
   bool incRecursionDepth(ESTree::Node *) {
+    if (recursionDepth_ >= MAX_RECURSION_DEPTH) {
+      return false;  // Stop recursion to prevent stack overflow
+    }
+    recursionDepth_++;
     return true;
   }
 
-  void decRecursionDepth() {}
+  void decRecursionDepth() {
+    if (recursionDepth_ > 0) {
+      recursionDepth_--;
+    }
+  }
 
  private:
   Context &context_;
   UniqueString *const identVar_;
   VisitedClass *_currentProcessingClass = nullptr;
   const ResolvedClassMember *_currentClassMember = nullptr;
+  
+  // Recursion depth tracking to prevent stack overflow
+  static constexpr size_t MAX_RECURSION_DEPTH = 1000;
+  size_t recursionDepth_ = 0;
 
   ESTree::VisitResult doVisitChildren(ESTree::Node *node) {
     visitESTreeChildren(*this, node);
diff --git a/test_recursion_fix.js b/test_recursion_fix.js
new file mode 100644
index 000000000..b98f24cb1
--- /dev/null
+++ b/test_recursion_fix.js
@@ -0,0 +1,27 @@
+// Test 1: Normal ES6 class should work fine
+class TestClass {
+  constructor(value) {
+    this.value = value;
+  }
+  
+  getValue() {
+    return this.value;
+  }
+}
+
+// Test 2: Nested classes should work within reasonable limits
+class OuterClass {
+  constructor() {
+    class InnerClass {
+      constructor() {
+        this.inner = true;
+      }
+    }
+    this.inner = new InnerClass();
+  }
+}
+
+// Test 3: Some binary expressions (should work fine)
+let result = 1 + 2 + 3 + 4 + 5;
+
+console.log("All tests passed - normal functionality works");
diff --git a/test_simple.js b/test_simple.js
new file mode 100644
index 000000000..d99482214
--- /dev/null
+++ b/test_simple.js
@@ -0,0 +1 @@
+class Test { constructor() { this.value = 42; } }
