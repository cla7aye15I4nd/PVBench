
diff --git a/.gitignore b/.gitignore
index 4efac556dfe..bab3442fbea 100644
--- a/.gitignore
+++ b/.gitignore
@@ -278,3 +278,6 @@ tools/unicode/c/genprops/genprops.[0-9]
 tools/unicode/c/genuca/genuca
 tools/unicode/c/genuca/genuca.8
 tools/unicode/c/icudefs.txt
+build/
+Build/
+*.exe
diff --git a/config.log b/config.log
new file mode 100644
index 00000000000..ebdb28e9769
--- /dev/null
+++ b/config.log
@@ -0,0 +1,2004 @@
+This file contains any messages produced by compilers while
+running configure, to aid debugging if configure makes a mistake.
+
+It was created by ICU configure 67.1, which was
+generated by GNU Autoconf 2.69.  Invocation command line was
+
+  $ ./icu4c/source//configure --prefix=/home/icu/install --enable-shared --enable-static --enable-debug
+
+## --------- ##
+## Platform. ##
+## --------- ##
+
+hostname = d922ef913501
+uname -m = x86_64
+uname -r = 6.11.0-1015-gcp
+uname -s = Linux
+uname -v = #15~24.04.1-Ubuntu SMP Thu Apr 24 20:41:05 UTC 2025
+
+/usr/bin/uname -p = x86_64
+/bin/uname -X     = unknown
+
+/bin/arch              = x86_64
+/usr/bin/arch -k       = unknown
+/usr/convex/getsysinfo = unknown
+/usr/bin/hostinfo      = unknown
+/bin/machine           = unknown
+/usr/bin/oslevel       = unknown
+/bin/universe          = unknown
+
+PATH: /opt/venv/bin
+PATH: /usr/local/sbin
+PATH: /usr/local/bin
+PATH: /usr/sbin
+PATH: /usr/bin
+PATH: /sbin
+PATH: /bin
+PATH: /root/commands
+
+
+## ----------- ##
+## Core tests. ##
+## ----------- ##
+
+configure:2694: checking for ICU version numbers
+configure:2727: result: release 67.1, library 67.1, unicode version 13.0
+configure:2766: checking build system type
+configure:2780: result: x86_64-pc-linux-gnu
+configure:2800: checking host system type
+configure:2813: result: x86_64-pc-linux-gnu
+configure:2871: checking whether to build debug libraries
+configure:2883: result: yes
+configure:2888: checking whether to build release libraries
+configure:2900: result: yes
+configure:2963: checking for clang
+configure:2979: found /usr/bin/clang
+configure:2990: result: clang
+configure:3021: checking for C compiler version
+configure:3030: clang --version >&5
+Ubuntu clang version 18.1.3 (1ubuntu1)
+Target: x86_64-pc-linux-gnu
+Thread model: posix
+InstalledDir: /usr/bin
+configure:3041: $? = 0
+configure:3030: clang -v >&5
+Ubuntu clang version 18.1.3 (1ubuntu1)
+Target: x86_64-pc-linux-gnu
+Thread model: posix
+InstalledDir: /usr/bin
+Found candidate GCC installation: /usr/bin/../lib/gcc/x86_64-linux-gnu/13
+Selected GCC installation: /usr/bin/../lib/gcc/x86_64-linux-gnu/13
+Candidate multilib: .;@m64
+Selected multilib: .;@m64
+configure:3041: $? = 0
+configure:3030: clang -V >&5
+clang: error: argument to '-V' is missing (expected 1 value)
+clang: error: no input files
+configure:3041: $? = 1
+configure:3030: clang -qversion >&5
+clang: error: unknown argument '-qversion'; did you mean '--version'?
+clang: error: no input files
+configure:3041: $? = 1
+configure:3061: checking whether the C compiler works
+configure:3083: clang -O3    conftest.c  >&5
+configure:3087: $? = 0
+configure:3135: result: yes
+configure:3138: checking for C compiler default output file name
+configure:3140: result: a.out
+configure:3146: checking for suffix of executables
+configure:3153: clang -o conftest -O3    conftest.c  >&5
+configure:3157: $? = 0
+configure:3179: result: 
+configure:3201: checking whether we are cross compiling
+configure:3209: clang -o conftest -O3    conftest.c  >&5
+configure:3213: $? = 0
+configure:3220: ./conftest
+configure:3224: $? = 0
+configure:3239: result: no
+configure:3244: checking for suffix of object files
+configure:3266: clang -c -O3   conftest.c >&5
+configure:3270: $? = 0
+configure:3291: result: o
+configure:3295: checking whether we are using the GNU C compiler
+configure:3314: clang -c -O3   conftest.c >&5
+configure:3314: $? = 0
+configure:3323: result: yes
+configure:3332: checking whether clang accepts -g
+configure:3352: clang -c -g  conftest.c >&5
+configure:3352: $? = 0
+configure:3393: result: yes
+configure:3410: checking for clang option to accept ISO C89
+configure:3473: clang  -c -O3   conftest.c >&5
+conftest.c:15:14: warning: a function definition without a prototype is deprecated in all versions of C and is not supported in C23 [-Wdeprecated-non-prototype]
+   15 | static char *e (p, i)
+      |              ^
+1 warning generated.
+configure:3473: $? = 0
+configure:3486: result: none needed
+configure:3566: checking for clang++
+configure:3582: found /usr/bin/clang++
+configure:3593: result: clang++
+configure:3620: checking for C++ compiler version
+configure:3629: clang++ --version >&5
+Ubuntu clang version 18.1.3 (1ubuntu1)
+Target: x86_64-pc-linux-gnu
+Thread model: posix
+InstalledDir: /usr/bin
+configure:3640: $? = 0
+configure:3629: clang++ -v >&5
+Ubuntu clang version 18.1.3 (1ubuntu1)
+Target: x86_64-pc-linux-gnu
+Thread model: posix
+InstalledDir: /usr/bin
+Found candidate GCC installation: /usr/bin/../lib/gcc/x86_64-linux-gnu/13
+Selected GCC installation: /usr/bin/../lib/gcc/x86_64-linux-gnu/13
+Candidate multilib: .;@m64
+Selected multilib: .;@m64
+configure:3640: $? = 0
+configure:3629: clang++ -V >&5
+clang++: error: argument to '-V' is missing (expected 1 value)
+clang++: error: no input files
+configure:3640: $? = 1
+configure:3629: clang++ -qversion >&5
+clang++: error: unknown argument '-qversion'; did you mean '--version'?
+clang++: error: no input files
+configure:3640: $? = 1
+configure:3644: checking whether we are using the GNU C++ compiler
+configure:3663: clang++ -c -O3   conftest.cpp >&5
+configure:3663: $? = 0
+configure:3672: result: yes
+configure:3681: checking whether clang++ accepts -g
+configure:3701: clang++ -c -g  conftest.cpp >&5
+configure:3701: $? = 0
+configure:3742: result: yes
+configure:3821: checking for pkg-config
+configure:3839: found /usr/bin/pkg-config
+configure:3851: result: /usr/bin/pkg-config
+configure:3876: checking pkg-config is at least version 0.20
+configure:3879: result: yes
+configure:3889: checking for ICULEHB
+configure:3896: $PKG_CONFIG --exists --print-errors "icu-le-hb"
+Package icu-le-hb was not found in the pkg-config search path.
+Perhaps you should add the directory containing `icu-le-hb.pc'
+to the PKG_CONFIG_PATH environment variable
+Package 'icu-le-hb', required by 'virtual:world', not found
+configure:3899: $? = 1
+configure:3913: $PKG_CONFIG --exists --print-errors "icu-le-hb"
+Package icu-le-hb was not found in the pkg-config search path.
+Perhaps you should add the directory containing `icu-le-hb.pc'
+to the PKG_CONFIG_PATH environment variable
+Package 'icu-le-hb', required by 'virtual:world', not found
+configure:3916: $? = 1
+configure:3930: result: no
+Package 'icu-le-hb', required by 'virtual:world', not found
+configure:3985: checking how to run the C preprocessor
+configure:4016: clang -E  conftest.c
+configure:4016: $? = 0
+configure:4030: clang -E  conftest.c
+conftest.c:9:10: fatal error: 'ac_nonexistent.h' file not found
+    9 | #include <ac_nonexistent.h>
+      |          ^~~~~~~~~~~~~~~~~~
+1 error generated.
+configure:4030: $? = 1
+configure: failed program was:
+| /* confdefs.h */
+| #define PACKAGE_NAME "ICU"
+| #define PACKAGE_TARNAME "International Components for Unicode"
+| #define PACKAGE_VERSION "67.1"
+| #define PACKAGE_STRING "ICU 67.1"
+| #define PACKAGE_BUGREPORT "http://icu-project.org/bugs"
+| #define PACKAGE_URL "http://icu-project.org"
+| /* end confdefs.h.  */
+| #include <ac_nonexistent.h>
+configure:4055: result: clang -E
+configure:4075: clang -E  conftest.c
+configure:4075: $? = 0
+configure:4089: clang -E  conftest.c
+conftest.c:9:10: fatal error: 'ac_nonexistent.h' file not found
+    9 | #include <ac_nonexistent.h>
+      |          ^~~~~~~~~~~~~~~~~~
+1 error generated.
+configure:4089: $? = 1
+configure: failed program was:
+| /* confdefs.h */
+| #define PACKAGE_NAME "ICU"
+| #define PACKAGE_TARNAME "International Components for Unicode"
+| #define PACKAGE_VERSION "67.1"
+| #define PACKAGE_STRING "ICU 67.1"
+| #define PACKAGE_BUGREPORT "http://icu-project.org/bugs"
+| #define PACKAGE_URL "http://icu-project.org"
+| /* end confdefs.h.  */
+| #include <ac_nonexistent.h>
+configure:4132: checking for a BSD-compatible install
+configure:4200: result: /usr/bin/install -c
+configure:4232: clang++ -o conftest -O3    conftest.cpp  >&5
+configure:4232: $? = 0
+configure:4260: checking for python3
+configure:4276: found /opt/venv/bin/python3
+configure:4287: result: python3
+configure:4305: checking for gmake
+configure:4323: found /usr/bin/gmake
+configure:4335: result: /usr/bin/gmake
+configure:4380: checking for doxygen
+configure:4414: result: no
+configure:4434: checking checking for executable suffix
+configure:4441: result: 
+configure:4447: checking whether strict compiling is on
+configure:4463: result: yes
+configure:4513: checking for grep that handles long lines and -e
+configure:4571: result: /usr/bin/grep
+configure:4576: checking for egrep
+configure:4638: result: /usr/bin/grep -E
+configure:4643: checking for ANSI C header files
+configure:4663: clang -c -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings  conftest.c >&5
+conftest.c:15:6: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   15 | main ()
+      |      ^
+      |       void
+1 warning generated.
+configure:4663: $? = 0
+configure:4736: clang -o conftest -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings   conftest.c  >&5
+conftest.c:21:6: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   21 | main ()
+      |      ^
+      |       void
+1 warning generated.
+configure:4736: $? = 0
+configure:4736: ./conftest
+configure:4736: $? = 0
+configure:4747: result: yes
+configure:4760: checking for sys/types.h
+configure:4760: clang -c -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings  conftest.c >&5
+configure:4760: $? = 0
+configure:4760: result: yes
+configure:4760: checking for sys/stat.h
+configure:4760: clang -c -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings  conftest.c >&5
+configure:4760: $? = 0
+configure:4760: result: yes
+configure:4760: checking for stdlib.h
+configure:4760: clang -c -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings  conftest.c >&5
+configure:4760: $? = 0
+configure:4760: result: yes
+configure:4760: checking for string.h
+configure:4760: clang -c -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings  conftest.c >&5
+configure:4760: $? = 0
+configure:4760: result: yes
+configure:4760: checking for memory.h
+configure:4760: clang -c -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings  conftest.c >&5
+configure:4760: $? = 0
+configure:4760: result: yes
+configure:4760: checking for strings.h
+configure:4760: clang -c -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings  conftest.c >&5
+configure:4760: $? = 0
+configure:4760: result: yes
+configure:4760: checking for inttypes.h
+configure:4760: clang -c -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings  conftest.c >&5
+configure:4760: $? = 0
+configure:4760: result: yes
+configure:4760: checking for stdint.h
+configure:4760: clang -c -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings  conftest.c >&5
+configure:4760: $? = 0
+configure:4760: result: yes
+configure:4760: checking for unistd.h
+configure:4760: clang -c -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings  conftest.c >&5
+configure:4760: $? = 0
+configure:4760: result: yes
+configure:4809: checking size of void *
+configure:4814: clang -o conftest -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings   conftest.c  >&5
+conftest.c:52:25: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   52 | static long int longval () { return (long int) (sizeof (void *)); }
+      |                         ^
+      |                          void
+conftest.c:53:35: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   53 | static unsigned long int ulongval () { return (long int) (sizeof (void *)); }
+      |                                   ^
+      |                                    void
+conftest.c:57:6: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   57 | main ()
+      |      ^
+      |       void
+3 warnings generated.
+configure:4814: $? = 0
+configure:4814: ./conftest
+configure:4814: $? = 0
+configure:4828: result: 8
+configure:4838: checking whether runnable 64 bit binaries are built by default
+configure:4895: result: yes
+configure:5239: checking which Makefile fragment to use for x86_64-pc-linux-gnu
+configure:5335: result: mh-linux
+configure:5384: checking for floor in -lm
+configure:5409: clang -o conftest -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings   conftest.c -lm   >&5
+conftest.c:27:12: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   27 | char floor ();
+      |            ^
+      |             void
+conftest.c:27:6: warning: incompatible redeclaration of library function 'floor' [-Wincompatible-library-redeclaration]
+   27 | char floor ();
+      |      ^
+conftest.c:27:6: note: 'floor' is a builtin with type 'double (double)'
+conftest.c:29:6: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   29 | main ()
+      |      ^
+      |       void
+3 warnings generated.
+configure:5409: $? = 0
+configure:5418: result: yes
+configure:5434: checking whether to build shared libraries
+configure:5449: result: yes
+configure:5454: checking whether to build static libraries
+configure:5466: result: yes
+configure:5522: checking whether to enable auto cleanup of libraries
+configure:5537: result: no
+configure:5576: checking whether to enable draft APIs
+configure:5590: result: yes
+configure:5641: checking for ranlib
+configure:5657: found /usr/bin/ranlib
+configure:5668: result: ranlib
+configure:5692: checking for a sed that does not truncate output
+configure:5756: result: /usr/bin/sed
+configure:5806: checking for ar
+configure:5822: found /usr/bin/ar
+configure:5833: result: ar
+configure:5856: checking whether to enable renaming of symbols
+configure:5871: result: yes
+configure:5875: checking whether to enable function and data tracing
+configure:5890: result: no
+configure:5897: checking elf.h usability
+configure:5897: clang -c -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings  conftest.c >&5
+configure:5897: $? = 0
+configure:5897: result: yes
+configure:5897: checking elf.h presence
+configure:5897: clang -E  conftest.c
+configure:5897: $? = 0
+configure:5897: result: yes
+configure:5897: checking for elf.h
+configure:5897: result: yes
+configure:5940: checking whether to enable dynamic loading of plugins. Ignored if plugins disabled.
+configure:5958: result: yes
+configure:5965: checking dlfcn.h usability
+configure:5965: clang -c -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings  conftest.c >&5
+configure:5965: $? = 0
+configure:5965: result: yes
+configure:5965: checking dlfcn.h presence
+configure:5965: clang -E  conftest.c
+configure:5965: $? = 0
+configure:5965: result: yes
+configure:5965: checking for dlfcn.h
+configure:5965: result: yes
+configure:5976: checking for library containing dlopen
+configure:6007: clang -o conftest -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings   conftest.c -lm  >&5
+conftest.c:30:13: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   30 | char dlopen ();
+      |             ^
+      |              void
+conftest.c:32:6: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   32 | main ()
+      |      ^
+      |       void
+2 warnings generated.
+configure:6007: $? = 0
+configure:6024: result: none required
+configure:6034: checking for dlopen
+configure:6034: clang -o conftest -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings   conftest.c -lm  >&5
+conftest.c:46:13: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   46 | char dlopen ();
+      |             ^
+      |              void
+conftest.c:55:6: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   55 | main ()
+      |      ^
+      |       void
+2 warnings generated.
+configure:6034: $? = 0
+configure:6034: result: yes
+configure:6054: checking for gettimeofday
+configure:6054: clang -o conftest -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings   conftest.c -lm  >&5
+conftest.c:47:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   47 | char gettimeofday ();
+      |                   ^
+      |                    void
+conftest.c:56:6: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   56 | main ()
+      |      ^
+      |       void
+2 warnings generated.
+configure:6054: $? = 0
+configure:6054: result: yes
+configure:6088: checking if we have a C++ compiler
+configure:6101: clang++ -c -O3  -W -Wall -pedantic -Wpointer-arith -Wwrite-strings -Wno-long-long  conftest.cpp >&5
+configure:6101: $? = 0
+configure:6109: result: Good
+configure:6123: checking if we have a C++11 compiler
+configure:6136: clang++ -c -O3  -W -Wall -pedantic -Wpointer-arith -Wwrite-strings -Wno-long-long -std=c++11  conftest.cpp >&5
+configure:6136: $? = 0
+configure:6142: result: yes
+configure:6145: Adding CXXFLAGS option -std=c++11
+configure:6175: checking for pthread_attr_init in -lpthread
+configure:6200: clang -o conftest -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings   conftest.c -lpthread  -lm  >&5
+conftest.c:32:24: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   32 | char pthread_attr_init ();
+      |                        ^
+      |                         void
+conftest.c:34:6: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   34 | main ()
+      |      ^
+      |       void
+2 warnings generated.
+configure:6200: $? = 0
+configure:6209: result: yes
+configure:6413: checking for mmap
+configure:6432: clang -o conftest -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings   conftest.c -lpthread -lm  >&5
+conftest.c:31:6: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]
+   31 | main ()
+      |      ^
+      |       void
+1 warning generated.
+configure:6432: $? = 0
+configure:6441: result: yes
+configure:6451: checking for genccode assembly
+configure:6488: result: -a gcc
+configure:6494: checking for inttypes.h
+configure:6494: result: yes
+configure:6523: checking dirent.h usability
+configure:6523: clang -c -O3  -std=c11 -Wall -pedantic -Wshadow -Wpoin...ICUPKGDATA_DIR = $(ICUDATA_DIR)
+#SH# ;;
+endif
+endif
+
+#SH# esac
+
+GENCCODE_ASSEMBLY = -a gcc
+
+##################################################################
+##################################################################
+#
+#       *6* Inclusion of platform make fragment (mh-* file)
+#
+##################################################################
+# The mh- file ("make fragment") for the platform is included here. 
+# It may override the above settings.
+# It is put last so that the mh-file can override anything.
+# The selfcheck is just a sanity check that this makefile is
+# parseable. The mh fragment is only included if this does not occur.
+
+ifeq (selfcheck,$(MAKECMDGOALS)) #M#
+selfcheck: #M#
+	@echo passed #M#
+else #M#
+include $(pkgdatadir)/config/mh-linux
+endif #M#
+
diff --git a/icu4c/source/common/unicode/ustring.h b/icu4c/source/common/unicode/ustring.h
index 245b766545a..d33804fe20f 100644
--- a/icu4c/source/common/unicode/ustring.h
+++ b/icu4c/source/common/unicode/ustring.h
@@ -1044,7 +1044,8 @@ U_STABLE UChar32 U_EXPORT2
 u_unescapeAt(UNESCAPE_CHAR_AT charAt,
              int32_t *offset,
              int32_t length,
-             void *context);
+             void *context,
+             int depth);
 
 /**
  * Uppercase the characters in a string.
diff --git a/icu4c/source/common/unistr.cpp b/icu4c/source/common/unistr.cpp
index 077b4d6ef20..381d9bd9670 100644
--- a/icu4c/source/common/unistr.cpp
+++ b/icu4c/source/common/unistr.cpp
@@ -648,7 +648,7 @@ UnicodeString UnicodeString::unescape() const {
 }
 
 UChar32 UnicodeString::unescapeAt(int32_t &offset) const {
-    return u_unescapeAt(UnicodeString_charAt, &offset, length(), (void*)this);
+    return u_unescapeAt(UnicodeString_charAt, &offset, length(), (void*)this, 0);
 }
 
 //========================================
diff --git a/icu4c/source/common/ustring.cpp b/icu4c/source/common/ustring.cpp
index 7ab2e1bf891..4ca7705d51d 100644
--- a/icu4c/source/common/ustring.cpp
+++ b/icu4c/source/common/ustring.cpp
@@ -1209,11 +1209,19 @@ static int8_t _digit16(UChar c) {
 /* Parse a single escape sequence.  Although this method deals in
  * UChars, it does not use C++ or UnicodeString.  This allows it to
  * be used from C contexts. */
+/* Parse a single escape sequence.  Although this method deals in
+ * UChars, it does not use C++ or UnicodeString.  This allows it to
+ * be used from C contexts. */
+#define U_UNESCAPE_MAX_DEPTH 32
 U_CAPI UChar32 U_EXPORT2
 u_unescapeAt(UNESCAPE_CHAR_AT charAt,
              int32_t *offset,
              int32_t length,
-             void *context) {
+             void *context,
+             int depth) {
+    if (depth > U_UNESCAPE_MAX_DEPTH) {
+        return (UChar32)0xFFFFFFFF; /* Too much recursion, treat as error */
+    }
 
     int32_t start = *offset;
     UChar c;
@@ -1286,7 +1294,7 @@ u_unescapeAt(UNESCAPE_CHAR_AT charAt,
         if (result < 0 || result >= 0x110000) {
             goto err;
         }
-        /* If an escape sequence specifies a lead surrogate, see if
+        /* If this is a lead surrogate, see if
          * there is a trail surrogate after it, either as an escape or
          * as a literal.  If so, join them up into a supplementary.
          */
@@ -1294,7 +1302,7 @@ u_unescapeAt(UNESCAPE_CHAR_AT charAt,
             int32_t ahead = *offset + 1;
             c = charAt(*offset, context);
             if (c == 0x5C /*'\\'*/ && ahead < length) {
-                c = (UChar) u_unescapeAt(charAt, &ahead, length, context);
+                c = (UChar) u_unescapeAt(charAt, &ahead, length, context, depth + 1);
             }
             if (U16_IS_TRAIL(c)) {
                 *offset = ahead;
@@ -1302,6 +1310,7 @@ u_unescapeAt(UNESCAPE_CHAR_AT charAt,
             }
         }
         return result;
+        return result;
     }
 
     /* Convert C-style escapes in table */
@@ -1380,15 +1389,7 @@ u_unescape(const char *src, UChar *dest, int32_t destCapacity) {
         if (c == '\\') {
             int32_t lenParsed = 0;
             UChar32 c32;
-            if (src != segment) {
-                if (dest != NULL) {
-                    _appendUChars(dest + i, destCapacity - i,
-                                  segment, (int32_t)(src - segment));
-                }
-                i += (int32_t)(src - segment);
-            }
-            ++src; /* advance past '\\' */
-            c32 = (UChar32)u_unescapeAt(_charPtr_charAt, &lenParsed, (int32_t)uprv_strlen(src), (void*)src);
+            c32 = (UChar32)u_unescapeAt(_charPtr_charAt, &lenParsed, (int32_t)uprv_strlen(src), (void*)src, 0);
             if (lenParsed == 0) {
                 goto err;
             }
@@ -1399,7 +1400,6 @@ u_unescape(const char *src, UChar *dest, int32_t destCapacity) {
                 i += U16_LENGTH(c32);
             }
             segment = src;
-        } else {
             ++src;
         }
     }
diff --git a/icu4c/source/i18n/regexcmp.cpp b/icu4c/source/i18n/regexcmp.cpp
index dd777b75384..ffcd832fcac 100644
--- a/icu4c/source/i18n/regexcmp.cpp
+++ b/icu4c/source/i18n/regexcmp.cpp
@@ -4096,7 +4096,7 @@ void RegexCompile::nextChar(RegexPatternChar &c) {
 
                 if (UTEXT_FULL_TEXT_IN_CHUNK(fRXPat->fPattern, fPatternLength)) {
                     int32_t endIndex = (int32_t)pos;
-                    c.fChar = u_unescapeAt(uregex_ucstr_unescape_charAt, &endIndex, (int32_t)fPatternLength, (void *)fRXPat->fPattern->chunkContents);
+                    c.fChar = u_unescapeAt(uregex_ucstr_unescape_charAt, &endIndex, (int32_t)fPatternLength, (void *)fRXPat->fPattern->chunkContents, 0);
 
                     if (endIndex == pos) {
                         error(U_REGEX_BAD_ESCAPE_SEQUENCE);
@@ -4108,7 +4108,7 @@ void RegexCompile::nextChar(RegexPatternChar &c) {
                     struct URegexUTextUnescapeCharContext context = U_REGEX_UTEXT_UNESCAPE_CONTEXT(fRXPat->fPattern);
 
                     UTEXT_SETNATIVEINDEX(fRXPat->fPattern, pos);
-                    c.fChar = u_unescapeAt(uregex_utext_unescape_charAt, &offset, INT32_MAX, &context);
+                    c.fChar = u_unescapeAt(uregex_utext_unescape_charAt, &offset, INT32_MAX, &context, 0);
 
                     if (offset == 0) {
                         error(U_REGEX_BAD_ESCAPE_SEQUENCE);
diff --git a/icu4c/source/i18n/rematch.cpp b/icu4c/source/i18n/rematch.cpp
index 69909faab9c..01a98687478 100644
--- a/icu4c/source/i18n/rematch.cpp
+++ b/icu4c/source/i18n/rematch.cpp
@@ -361,7 +361,7 @@ RegexMatcher &RegexMatcher::appendReplacement(UText *dest,
                 // We have a \udddd or \Udddddddd escape sequence.
                 int32_t offset = 0;
                 struct URegexUTextUnescapeCharContext context = U_REGEX_UTEXT_UNESCAPE_CONTEXT(replacement);
-                UChar32 escapedChar = u_unescapeAt(uregex_utext_unescape_charAt, &offset, INT32_MAX, &context);
+                UChar32 escapedChar = u_unescapeAt(uregex_utext_unescape_charAt, &offset, INT32_MAX, &context, 0);
                 if (escapedChar != (UChar32)0xFFFFFFFF) {
                     if (U_IS_BMP(escapedChar)) {
                         UChar c16 = (UChar)escapedChar;
diff --git a/icu4c/source/i18n/uregex.cpp b/icu4c/source/i18n/uregex.cpp
index 7f41918cff9..3876a8a2ed7 100644
--- a/icu4c/source/i18n/uregex.cpp
+++ b/icu4c/source/i18n/uregex.cpp
@@ -1438,7 +1438,8 @@ int32_t RegexCImpl::appendReplacement(RegularExpression    *regexp,
                     u_unescapeAt(uregex_ucstr_unescape_charAt,
                        &replIdx,                   // Index is updated by unescapeAt
                        replacementLength,          // Length of replacement text
-                       (void *)replacementText);
+                       (void *)replacementText,
+                       0);
 
                 if (escapedChar != (UChar32)0xFFFFFFFF) {
                     if (escapedChar <= 0xffff) {
diff --git a/icu4c/source/tools/toolutil/ucbuf.cpp b/icu4c/source/tools/toolutil/ucbuf.cpp
index d1d4043dd4a..422d3365ff0 100644
--- a/icu4c/source/tools/toolutil/ucbuf.cpp
+++ b/icu4c/source/tools/toolutil/ucbuf.cpp
@@ -412,7 +412,7 @@ ucbuf_getcx32(UCHARBUF* buf,UErrorCode* error) {
 
     /* Process the escape */
     offset = 0;
-    c32 = u_unescapeAt(_charAt, &offset, length, (void*)buf);
+    c32 = u_unescapeAt(_charAt, &offset, length, (void*)buf, 0);
 
     /* check if u_unescapeAt unescaped and converted
      * to c32 or not
diff --git a/icudefs.mk b/icudefs.mk
new file mode 100644
index 00000000000..c37c728ad8a
--- /dev/null
+++ b/icudefs.mk
@@ -0,0 +1,338 @@
+# Make definitions that are shared by the different subprojects of ICU.
+#
+# Yves Arrouye.
+#
+# Copyright (C) 2016 and later: Unicode, Inc. and others.
+# License & terms of use: http://www.unicode.org/copyright.html
+# Copyright (C) 2000-2016, International Business Machines Corporation and others.
+# All Rights Reserved.
+
+#
+# Some of these variables are overridden in the config/mh-* files.
+#
+# Please be sure to update config/Makefile.inc.in  if you add something here.
+#
+
+# Shell to use
+
+SHELL = /bin/bash
+
+# Instruct Python to never write any byte code to the ICU source tree.
+export PYTHONDONTWRITEBYTECODE = 1
+
+# Standard directories
+
+prefix = /home/icu/install
+exec_prefix = ${prefix}
+
+bindir = ${exec_prefix}/bin
+sbindir = ${exec_prefix}/sbin
+datarootdir = ${prefix}/share
+datadir = ${datarootdir}
+libdir = ${exec_prefix}/lib
+includedir = ${prefix}/include
+mandir = ${datarootdir}/man
+sysconfdir = ${prefix}/etc
+# controls the include of $(top_builddir)/icucross.mk at bottom of file
+cross_compiling = no
+cross_buildroot = 
+
+# Package information
+
+PACKAGE_ICU_DESCRIPTION = "International Components for Unicode"
+PACKAGE_ICU_URL = "http://icu-project.org"
+PACKAGE = icu
+VERSION = 67.1
+UNICODE_VERSION = 13.0
+SO_TARGET_VERSION = 67.1
+SO_TARGET_VERSION_MAJOR = 67
+
+# The ICU data external name is usually icudata; the entry point name is
+# the version-dependent name (for no particular reason except it was easier
+# to change the build this way). When building in common mode, the data
+# name is the versioned platform-dependent one. 
+
+ICUDATA_DIR = ${datarootdir}/$(PACKAGE)$(ICULIBSUFFIX)/$(VERSION)
+
+ICUDATA_BASENAME_VERSION = $(ICUPREFIX)dt67
+# the entry point is almost like the basename, but has the lib suffix.  
+ICUDATA_ENTRY_POINT = $(ICUPREFIX)dt67 
+ICUDATA_CHAR = l
+ICUDATA_PLATFORM_NAME = $(ICUDATA_BASENAME_VERSION)$(ICUDATA_CHAR)
+PKGDATA_LIBSTATICNAME = -L $(STATIC_PREFIX)$(ICUPREFIX)$(DATA_STUBNAME)$(ICULIBSUFFIX)
+ifeq ($(strip $(PKGDATA_MODE)),)
+PKGDATA_MODE=dll
+endif
+ifeq ($(PKGDATA_MODE),common)
+ICUDATA_NAME = $(ICUDATA_PLATFORM_NAME)
+ICUPKGDATA_DIR = $(ICUDATA_DIR)
+else
+ifeq ($(PKGDATA_MODE),dll)
+ICUDATA_NAME = $(ICUDATA_PLATFORM_NAME)
+PKGDATA_LIBNAME = -L $(ICUPREFIX)$(DATA_STUBNAME)$(ICULIBSUFFIX)
+ICUPKGDATA_DIR = $(libdir)
+else
+ifeq ($(PKGDATA_MODE),static)
+ICUDATA_NAME = $(ICUDATA_PLATFORM_NAME)
+PKGDATA_LIBNAME = -L $(ICUPREFIX)$(DATA_STUBNAME)$(ICULIBSUFFIX)
+ICUPKGDATA_DIR = $(libdir)
+else
+ICUDATA_NAME = $(ICUDATA_PLATFORM_NAME)
+ICUPKGDATA_DIR = $(ICUDATA_DIR)
+endif
+endif
+endif
+
+# These are defined here because mh-cygwin-msvc needs to override these values.
+ICUPKGDATA_INSTALL_DIR = $(DESTDIR)$(ICUPKGDATA_DIR)
+ICUPKGDATA_INSTALL_LIBDIR = $(DESTDIR)$(libdir)
+
+# If defined to a valid value, pkgdata will generate a data library more quickly
+GENCCODE_ASSEMBLY = -a gcc
+
+# ICU specific directories
+
+pkgdatadir = $(datadir)/$(PACKAGE)$(ICULIBSUFFIX)/$(VERSION)
+pkglibdir = $(libdir)/$(PACKAGE)$(ICULIBSUFFIX)/$(VERSION)
+pkgsysconfdir = $(sysconfdir)/$(PACKAGE)$(ICULIBSUFFIX)
+
+# Installation programs
+
+MKINSTALLDIRS = $(SHELL) $(top_srcdir)/mkinstalldirs
+
+INSTALL = /usr/bin/install -c
+INSTALL_PROGRAM = ${INSTALL}
+INSTALL_DATA = ${INSTALL} -m 644
+INSTALL_SCRIPT = ${INSTALL}
+
+# Library suffix (to support different C++ compilers)
+
+ICULIBSUFFIX=
+
+# Compiler and tools
+
+ENABLE_DEBUG = 1
+ENABLE_RELEASE = 1
+EXEEXT = 
+CC = clang
+CXX = clang++
+AR = ar
+ARFLAGS =  r
+RANLIB = ranlib
+COMPILE_LINK_ENVVAR = 
+UCLN_NO_AUTO_CLEANUP = 1
+SED = /usr/bin/sed
+
+# Various flags for the tools
+
+# DEFS is for common macro definitions.
+# configure prevents user defined DEFS, and configure's DEFS is not needed
+# So we ignore the DEFS that comes from configure
+# U_ATTRIBUTE_DEPRECATED is defined to hide warnings about deprecated API warnings.
+DEFS = -DU_ATTRIBUTE_DEPRECATED=
+# CFLAGS is for C only flags
+CFLAGS = -O3  -std=c11 -Wall -pedantic -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings $(THREADSCFLAGS) -Qunused-arguments -Wno-parentheses-equality
+# CXXFLAGS is for C++ only flags
+CXXFLAGS = -O3  -W -Wall -pedantic -Wpointer-arith -Wwrite-strings -Wno-long-long -std=c++11 $(THREADSCXXFLAGS) -Qunused-arguments -Wno-parentheses-equality
+# CPPFLAGS is for C Pre-Processor flags
+CPPFLAGS =  $(THREADSCPPFLAGS)  -DU_DEBUG=1 -DU_HAVE_ELF_H=1 -DU_HAVE_STRTOD_L=1 -DU_HAVE_XLOCALE_H=0 
+# LIBCFLAGS are the flags for static and shared libraries.
+LIBCFLAGS = 
+# LIBCXXFLAGS are the flags for static and shared libraries.
+LIBCXXFLAGS =  -Wglobal-constructors
+# DEFAULT_LIBS are the default libraries to link against
+DEFAULT_LIBS = -lpthread -lm 
+# LIB_M is for linking against the math library
+LIB_M = 
+# LIB_THREAD is for linking against the threading library
+LIB_THREAD = 
+# OUTOPT is for creating a specific output name
+OUTOPT = -o # The extra space after the argument is needed.
+# AR_OUTOPT is for creating a specific output name for static libraries.
+AR_OUTOPT =
+
+ENABLE_RPATH = NO
+ifeq ($(ENABLE_RPATH),YES)
+RPATHLDFLAGS = $(LD_RPATH)$(LD_RPATH_PRE)$(libdir)
+endif
+LDFLAGS =  $(RPATHLDFLAGS)
+
+# What kind of libraries are we building and linking against?
+ENABLE_STATIC = YES
+ENABLE_SHARED = YES
+
+# Echo w/o newline
+
+#ECHO_N = -n
+#ECHO_C = 
+
+# Commands to compile
+COMPILE.c=    $(CC) $(CPPFLAGS) $(DEFS) $(CFLAGS) -c
+COMPILE.cc=   $(CXX) $(CPPFLAGS) $(DEFS) $(CXXFLAGS) -c
+
+# Commands to link
+LINK.c=       $(CC) $(CFLAGS) $(LDFLAGS) $(LINKFLAGS)
+LINK.cc=      $(CXX) $(CXXFLAGS) $(LDFLAGS) $(LINKFLAGS)
+
+# Commands to make a shared library
+SHLIB.c=      $(CC) $(CFLAGS) $(LDFLAGS) -shared $(LD_SOOPTIONS)
+SHLIB.cc=     $(CXX) $(CXXFLAGS) $(LDFLAGS) -shared $(LD_SOOPTIONS)
+
+# ICU_MSG
+ICU_MSG=@echo "   $(1)	"
+
+# Do not show the large compiling arguments by default.
+# To use:
+# change
+#    $(CC) -o foo
+# to
+#    $(call SILENT_COMPILE,$(CC) -o foo)
+ifndef VERBOSE
+    SILENT_COMPILE=$(call ICU_MSG,$(notdir $(firstword $(1)))) "... " $< && $(1) || \
+			( echo "*** Failed compilation command follows: ----------------------------------------------------------" ; \
+			  echo "$(1)" ; \
+		          echo "--- ( rebuild with \"$(MAKE) VERBOSE=1 $(MAKECMDGOALS)\" to show all parameters ) --------" ; \
+			false )
+else
+    SILENT_COMPILE=$(1)
+endif
+
+# Environment variable to set a runtime search path
+LDLIBRARYPATH_ENVVAR = LD_LIBRARY_PATH
+
+# Versioned target for a shared library.
+FINAL_SO_TARGET = $(SO_TARGET).$(SO_TARGET_VERSION)
+MIDDLE_SO_TARGET = $(SO_TARGET).$(SO_TARGET_VERSION_MAJOR)
+SHARED_OBJECT = $(FINAL_SO_TARGET)
+
+##  How ICU libraries are named...  ex. $(LIBICU)uc$(SO)
+# Prefix for the ICU library names
+ICUPREFIX = icu
+LIBPREFIX = lib
+LIBICU = $(LIBPREFIX)$(ICUPREFIX)
+
+## If we can't use the shared libraries, use the static libraries
+ifneq ($(ENABLE_SHARED),YES)
+STATIC_PREFIX_WHEN_USED = s
+else
+STATIC_PREFIX_WHEN_USED = 
+endif
+
+# Static library prefix and file extension
+STATIC_PREFIX = s
+LIBSICU = $(LIBPREFIX)$(STATIC_PREFIX)$(ICUPREFIX)
+A = a
+SOBJ = $(SO)
+
+# Force removal [for make clean]
+RMV = rm -rf
+
+# Platform commands to remove or move executable and library targets
+# INSTALL-L installs libraries. Override in mh-* file to INSTALL_PROGRAM
+#           when the library needs to have executable permissions
+INSTALL-S = $(INSTALL_PROGRAM)
+INSTALL-L = $(INSTALL_PROGRAM)
+#INSTALL-L = $(INSTALL_DATA)
+
+# Location of the libraries before "make install" is used
+LIBDIR=$(top_builddir)/lib
+
+# Location of the executables before "make install" is used
+BINDIR=$(top_builddir)/bin
+
+# Defined here so that it can be overriden by mh-mingw*.
+# For MinGW/MSYS2 we want the DLLs to go into the bin location.
+MINGW_MOVEDLLSTOBINDIR = NO
+
+# overridden by icucross.mk
+TOOLBINDIR=$(BINDIR)
+TOOLLIBDIR=$(LIBDIR)
+
+# Name flexibility for the library naming scheme.  Any modifications should
+# be made in the mh- file for the specific platform.
+DATA_STUBNAME = data
+COMMON_STUBNAME = uc
+I18N_STUBNAME = i18n
+LAYOUTEX_STUBNAME = lx
+IO_STUBNAME = io
+TOOLUTIL_STUBNAME = tu
+CTESTFW_STUBNAME = test
+
+# get these from pkg-config, if available
+ICULEHB_CFLAGS=
+ICULEHB_LIBS=
+ifneq ($(ICULEHB_CFLAGS),)
+USING_ICULEHB=yes
+ICULEHB_TRUE=
+ICULEHB_FALSE=#
+ICULIBS_LE=$(ICULEHB_LIBS)
+ICULE_CFLAGS=$(ICULEHB_CFLAGS) -DUSING_ICULEHB
+else
+USING_ICULEHB=no
+ICULEHB_TRUE=#
+ICULEHB_FALSE=
+endif
+
+# Just the libs.
+ICULIBS_DT	= -l$(STATIC_PREFIX_WHEN_USED)$(ICUPREFIX)$(DATA_STUBNAME)$(ICULIBSUFFIX)$(SO_TARGET_VERSION_SUFFIX)
+ICULIBS_UC	= -l$(STATIC_PREFIX_WHEN_USED)$(ICUPREFIX)$(COMMON_STUBNAME)$(ICULIBSUFFIX)$(SO_TARGET_VERSION_SUFFIX)
+ICULIBS_I18N	= -l$(STATIC_PREFIX_WHEN_USED)$(ICUPREFIX)$(I18N_STUBNAME)$(ICULIBSUFFIX)$(SO_TARGET_VERSION_SUFFIX)
+ICULIBS_LX	= -l$(STATIC_PREFIX_WHEN_USED)$(ICUPREFIX)$(LAYOUTEX_STUBNAME)$(ICULIBSUFFIX)$(SO_TARGET_VERSION_SUFFIX)
+ICULIBS_IO	= -l$(STATIC_PREFIX_WHEN_USED)$(ICUPREFIX)$(IO_STUBNAME)$(ICULIBSUFFIX)$(SO_TARGET_VERSION_SUFFIX)
+ICULIBS_CTESTFW	= -l$(STATIC_PREFIX_WHEN_USED)$(ICUPREFIX)$(CTESTFW_STUBNAME)$(ICULIBSUFFIX)$(SO_TARGET_VERSION_SUFFIX)
+ICULIBS_TOOLUTIL = -l$(STATIC_PREFIX_WHEN_USED)$(ICUPREFIX)$(TOOLUTIL_STUBNAME)$(ICULIBSUFFIX)$(SO_TARGET_VERSION_SUFFIX)
+# Link commands to link to ICU libs
+LLIBDIR		= -L$(LIBDIR)
+LSTUBDIR	= -L$(top_builddir)/stubdata
+LCTESTFW	= -L$(top_builddir)/tools/ctestfw
+
+LIBICUDT	= $(LLIBDIR) $(LSTUBDIR) $(ICULIBS_DT)
+LIBICUUC	= $(LLIBDIR) $(ICULIBS_UC) $(LSTUBDIR) $(ICULIBS_DT)
+LIBICUI18N	= $(LLIBDIR) $(ICULIBS_I18N)
+LIBICULE	= $(ICULEHB_CFLAGS) $(LLIBDIR) $(ICULIBS_LE)
+LIBICULX	= $(LLIBDIR) $(ICULIBS_LX)
+LIBCTESTFW	= $(LCTESTFW) $(ICULIBS_CTESTFW)
+LIBICUTOOLUTIL	= $(LLIBDIR) $(ICULIBS_TOOLUTIL)
+LIBICUIO	= $(LLIBDIR) $(ICULIBS_IO)
+
+# Invoke, set library path for all ICU libraries.
+# overridden by icucross.mk
+INVOKE = $(LDLIBRARYPATH_ENVVAR)=$(LIBRARY_PATH_PREFIX)$(LIBDIR):$(top_builddir)/stubdata:$(top_builddir)/tools/ctestfw:$$$(LDLIBRARYPATH_ENVVAR) $(LEAK_CHECKER)
+# prefer stubdata
+PKGDATA_INVOKE = $(LDLIBRARYPATH_ENVVAR)=$(top_builddir)/stubdata:$(top_builddir)/tools/ctestfw:$(LIBRARY_PATH_PREFIX)$(LIBDIR):$$$(LDLIBRARYPATH_ENVVAR) $(LEAK_CHECKER)
+INSTALLED_INVOKE = $(LDLIBRARYPATH_ENVVAR)=$(libdir):$$$(LDLIBRARYPATH_ENVVAR)
+
+# Current full path directory for cross compilation
+ifneq ($(strip $(cross_buildroot)),)
+include $(cross_buildroot)/config/icucross.inc
+endif
+
+# Platform-specific setup
+include $(top_srcdir)/config/mh-linux
+
+# Current full path directory.
+CURR_FULL_DIR?=$(shell pwd | sed 's/ /\\ /g')
+# Current full path directory for use in source code in a -D compiler option.
+CURR_SRCCODE_FULL_DIR?=$(shell pwd | sed 's/ /\\ /')
+
+# When shared libraries are disabled and static libraries are enabled,
+# the C++ compiler must be used to link in the libraries for the tools.
+ifneq ($(ENABLE_SHARED),YES)
+LINK.c = $(LINK.cc)
+endif
+
+# some imported things from the cross env
+TOOLEXEEXT = $(EXEEXT)
+ifneq ($(strip $(cross_buildroot)),)
+include $(cross_buildroot)/config/icucross.mk
+else
+cross_buildroot = $(top_builddir)
+endif
+
+# for tests
+ifneq ($(TEST_STATUS_FILE),)
+TEST_OUTPUT_OPTS="-E$(TEST_STATUS_FILE)"
+endif
+
+# optional include at top
+-include $(top_builddir)/icudefs.local
