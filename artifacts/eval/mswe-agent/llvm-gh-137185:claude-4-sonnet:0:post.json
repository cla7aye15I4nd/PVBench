{"patch": "diff --git a/.gitignore b/.gitignore\nindex a84268a7f686..ff15b5180e1f 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -73,3 +73,14 @@ pythonenv*\n /clang/utils/analyzer/projects/*/RefScanBuildResults\n # automodapi puts generated documentation files here.\n /lldb/docs/python_api/\n+build/\n+Build/\n+bin/\n+lib/\n+*.o\n+*.out\n+*.obj\n+*.exe\n+*.dll\n+*.so\n+*.dylib\ndiff --git a/llvm/lib/Transforms/Vectorize/VPlanRecipes.cpp b/llvm/lib/Transforms/Vectorize/VPlanRecipes.cpp\nindex 6027572f1e84..7d06da53f5b8 100644\n--- a/llvm/lib/Transforms/Vectorize/VPlanRecipes.cpp\n+++ b/llvm/lib/Transforms/Vectorize/VPlanRecipes.cpp\n@@ -2127,7 +2127,11 @@ void VPScalarIVStepsRecipe::execute(VPTransformState &State) {\n           Builder.CreateMul(StartIdx0, ConstantInt::get(StartIdx0->getType(),\n                                                         getUnrollPart(*this)));\n     }\n-    StartIdx0 = Builder.CreateTrunc(StartIdx0, IntStepTy);\n+    if (StartIdx0->getType()->getScalarSizeInBits() > IntStepTy->getScalarSizeInBits())\n+      StartIdx0 = Builder.CreateTrunc(StartIdx0, IntStepTy);\n+    else if (StartIdx0->getType()->getScalarSizeInBits() < IntStepTy->getScalarSizeInBits())\n+      StartIdx0 = Builder.CreateZExt(StartIdx0, IntStepTy);\n+    // If bit widths are equal, no cast is needed\n   }\n \n   if (!FirstLaneOnly && State.VF.isScalable()) {\n", "result": true}