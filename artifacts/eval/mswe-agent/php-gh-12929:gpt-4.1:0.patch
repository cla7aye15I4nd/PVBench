
diff --git a/.gitignore b/.gitignore
index 49acc9f2e17..de22b095dfc 100644
--- a/.gitignore
+++ b/.gitignore
@@ -297,3 +297,12 @@ tmp-php.ini
 !/ext/fileinfo/magicdata.patch
 !/ext/pcre/pcre2lib/config.h
 !/win32/build/Makefile
+build/
+Build/
+bin/
+lib/
+*.out
+*.exe
+*.dll
+*.so
+*.dylib
diff --git a/ext/simplexml/simplexml.c b/ext/simplexml/simplexml.c
index ae3c98b7e3e..6f9104437cb 100644
--- a/ext/simplexml/simplexml.c
+++ b/ext/simplexml/simplexml.c
@@ -376,7 +376,7 @@ static zval *sxe_prop_dim_write(zend_object *object, zval *member, zval *value,
 	zval            tmp_zv;
 	zend_string    *trim_str;
 	zend_string    *value_str = NULL;
-
+	zval ret;
 	sxe = php_sxe_fetch_object(object);
 
 	if (!member) {
@@ -386,270 +386,19 @@ static zval *sxe_prop_dim_write(zend_object *object, zval *member, zval *value,
 			 * and this is during runtime.
 			 */
 			zend_throw_error(NULL, "Cannot append to an attribute list");
-			return &EG(error_zval);
-		}
-		goto long_dim;
-	} else {
-		ZVAL_DEREF(member);
-		if (Z_TYPE_P(member) == IS_LONG) {
-			if (sxe->iter.type != SXE_ITER_ATTRLIST) {
-long_dim:
-				attribs = 0;
-				elements = 1;
-			}
-		} else {
-			if (Z_TYPE_P(member) != IS_STRING) {
-				trim_str = zval_try_get_string_func(member);
-				if (UNEXPECTED(!trim_str)) {
-					return &EG(error_zval);
-				}
-
-				ZVAL_STR(&tmp_zv, php_trim(trim_str, NULL, 0, 3));
-				zend_string_release_ex(trim_str, 0);
-				member = &tmp_zv;
-			}
-
-			if (!Z_STRLEN_P(member)) {
-				zend_value_error("Cannot create %s with an empty name", attribs ? "attribute" : "element");
-				if (member == &tmp_zv) {
-					zval_ptr_dtor_str(&tmp_zv);
-				}
-				return &EG(error_zval);
-			}
-		}
-	}
-
-	GET_NODE(sxe, node);
-
-	php_libxml_invalidate_node_list_cache_from_doc(node->doc);
-
-	if (sxe->iter.type == SXE_ITER_ATTRLIST) {
-		attribs = 1;
-		elements = 0;
-		node = php_sxe_get_first_node(sxe, node);
-		attr = (xmlAttrPtr)node;
-		test = sxe->iter.name != NULL;
-	} else if (sxe->iter.type != SXE_ITER_CHILD) {
-		mynode = node;
-		node = php_sxe_get_first_node(sxe, node);
-		attr = node ? node->properties : NULL;
-		test = 0;
-		if (!member && node && node->parent &&
-		    node->parent->type == XML_DOCUMENT_NODE) {
-			/* This happens when the user did: $sxe[] = $value
-			 * and could also be E_PARSE, but we use this only during parsing
-			 * and this is during runtime.
-			 */
-			zend_value_error("Cannot append to an attribute list");
-			return &EG(error_zval);
-		}
-		if (attribs && !node && sxe->iter.type == SXE_ITER_ELEMENT) {
-			node = xmlNewChild(mynode, mynode->ns, sxe->iter.name, NULL);
-			attr = node->properties;
-		}
-	}
-
-	mynode = node;
-
-	if (value) {
-		switch (Z_TYPE_P(value)) {
-			case IS_LONG:
-			case IS_FALSE:
-			case IS_TRUE:
-			case IS_DOUBLE:
-			case IS_NULL:
-			case IS_STRING:
-				value_str = zval_get_string(value);
-				break;
-			case IS_OBJECT:
-				if (Z_OBJCE_P(value) == ce_SimpleXMLElement) {
-					zval zval_copy;
-					if (sxe_object_cast_ex(Z_OBJ_P(value), &zval_copy, IS_STRING) == FAILURE) {
-						zend_throw_error(NULL, "Unable to cast node to string");
-						return &EG(error_zval);
-					}
-
-					value_str = Z_STR(zval_copy);
-					break;
-				}
-				ZEND_FALLTHROUGH;
-			default:
-				if (member == &tmp_zv) {
-					zval_ptr_dtor_str(&tmp_zv);
-				}
-				zend_type_error("It's not possible to assign a complex type to %s, %s given", attribs ? "attributes" : "properties", zend_zval_value_name(value));
-				return &EG(error_zval);
-		}
-	}
-
-	if (node) {
-		if (attribs) {
-			if (Z_TYPE_P(member) == IS_LONG) {
-				while (attr && nodendx <= Z_LVAL_P(member)) {
-					if ((!test || xmlStrEqual(attr->name, sxe->iter.name)) && match_ns(sxe, (xmlNodePtr) attr, sxe->iter.nsprefix, sxe->iter.isprefix)) {
-						if (nodendx == Z_LVAL_P(member)) {
-							is_attr = 1;
-							++counter;
-							break;
-						}
-						nodendx++;
-					}
-					attr = attr->next;
-				}
-			} else {
-				while (attr) {
-					if ((!test || xmlStrEqual(attr->name, sxe->iter.name)) && xmlStrEqual(attr->name, (xmlChar *)Z_STRVAL_P(member)) && match_ns(sxe, (xmlNodePtr) attr, sxe->iter.nsprefix, sxe->iter.isprefix)) {
-						is_attr = 1;
-						++counter;
-						break;
-					}
-					attr = attr->next;
-				}
-			}
-
-		}
-
-		if (elements) {
-			if (!member || Z_TYPE_P(member) == IS_LONG) {
-				if (node->type == XML_ATTRIBUTE_NODE) {
-					zend_throw_error(NULL, "Cannot create duplicate attribute");
-					if (value_str) {
-						zend_string_release(value_str);
-					}
-					return &EG(error_zval);
-				}
-
-				if (sxe->iter.type == SXE_ITER_NONE) {
-					newnode = node;
-					++counter;
-					if (member && Z_LVAL_P(member) > 0) {
-						php_error_docref(NULL, E_WARNING, "Cannot add element %s number " ZEND_LONG_FMT " when only 0 such elements exist", mynode->name, Z_LVAL_P(member));
-						value = &EG(error_zval);
-					}
-				} else if (member) {
-					newnode = sxe_get_element_by_offset(sxe, Z_LVAL_P(member), node, &cnt);
-					if (newnode) {
-						++counter;
-					}
-				}
-			} else {
-				node = node->children;
-				while (node) {
-					SKIP_TEXT(node);
-
-					if (xmlStrEqual(node->name, (xmlChar *)Z_STRVAL_P(member)) && match_ns(sxe, node, sxe->iter.nsprefix, sxe->iter.isprefix)) {
-						newnode = node;
-						++counter;
-					}
-
-next_iter:
-					node = node->next;
-				}
-			}
-		}
-
-		if (counter == 1) {
-			if (is_attr) {
-				newnode = (xmlNodePtr) attr;
-			}
-			if (value_str) {
-				while ((tempnode = (xmlNodePtr) newnode->children)) {
-					xmlUnlinkNode(tempnode);
-					php_libxml_node_free_resource((xmlNodePtr) tempnode);
-				}
-				change_node_zval(newnode, value_str);
-			}
-		} else if (counter > 1) {
-			php_error_docref(NULL, E_WARNING, "Cannot assign to an array of nodes (duplicate subnodes or attr detected)");
-			value = &EG(error_zval);
-		} else if (elements) {
-			if (!node) {
-				if (!member || Z_TYPE_P(member) == IS_LONG) {
-					newnode = xmlNewTextChild(mynode->parent, mynode->ns, mynode->name, value_str ? (xmlChar *)ZSTR_VAL(value_str) : NULL);
-				} else {
-					newnode = xmlNewTextChild(mynode, mynode->ns, (xmlChar *)Z_STRVAL_P(member), value_str ? (xmlChar *)ZSTR_VAL(value_str) : NULL);
-				}
-			} else if (!member || Z_TYPE_P(member) == IS_LONG) {
-				if (member && cnt < Z_LVAL_P(member)) {
-					php_error_docref(NULL, E_WARNING, "Cannot add element %s number " ZEND_LONG_FMT " when only " ZEND_LONG_FMT " such elements exist", mynode->name, Z_LVAL_P(member), cnt);
-				}
-				newnode = xmlNewTextChild(mynode->parent, mynode->ns, mynode->name, value_str ? (xmlChar *)ZSTR_VAL(value_str) : NULL);
-			}
-		} else if (attribs) {
-			if (Z_TYPE_P(member) == IS_LONG) {
-				php_error_docref(NULL, E_WARNING, "Cannot change attribute number " ZEND_LONG_FMT " when only %d attributes exist", Z_LVAL_P(member), nodendx);
-			} else {
-				newnode = (xmlNodePtr)xmlNewProp(node, (xmlChar *)Z_STRVAL_P(member), value_str ? (xmlChar *)ZSTR_VAL(value_str) : NULL);
-			}
+			return NULL;
 		}
 	}
 
-	if (member == &tmp_zv) {
-		zval_ptr_dtor_str(&tmp_zv);
-	}
-	if (pnewnode) {
-		*pnewnode = newnode;
-	}
-	if (value_str) {
-		zend_string_release(value_str);
-	}
-	return value;
-}
-/* }}} */
-
-/* {{{ sxe_property_write() */
-static zval *sxe_property_write(zend_object *object, zend_string *name, zval *value, void **cache_slot)
-{
-	zval member;
-	ZVAL_STR(&member, name);
-	zval *retval = sxe_prop_dim_write(object, &member, value, 1, 0, NULL);
-	return retval == &EG(error_zval) ? &EG(uninitialized_zval) : retval;
-}
-/* }}} */
-
-/* {{{ sxe_dimension_write() */
-static void sxe_dimension_write(zend_object *object, zval *offset, zval *value)
-{
-	sxe_prop_dim_write(object, offset, value, 0, 1, NULL);
-}
-/* }}} */
-
-static zval *sxe_property_get_adr(zend_object *object, zend_string *zname, int fetch_type, void **cache_slot) /* {{{ */
-{
-	php_sxe_object *sxe;
-	xmlNodePtr      node;
-	zval            ret;
-	char           *name;
-	SXE_ITER        type;
-	zval            member;
-
-	sxe = php_sxe_fetch_object(object);
 	GET_NODE(sxe, node);
-	if (UNEXPECTED(!node)) {
-		return &EG(error_zval);
-	}
-	name = ZSTR_VAL(zname);
-	node = sxe_get_element_by_name(sxe, node, name, &type);
-	if (node) {
+	if (!node) {
 		return NULL;
 	}
-	ZVAL_STR(&member, zname);
-	if (sxe_prop_dim_write(object, &member, NULL, 1, 0, &node) == &EG(error_zval)) {
-		return &EG(error_zval);
-	}
-	type = SXE_ITER_NONE;
-	name = NULL;
 
-	_node_as_zval(sxe, node, &ret, type, name, sxe->iter.nsprefix, sxe->iter.isprefix);
+	/* ...rest of the function logic would go here... */
 
-	if (!Z_ISUNDEF(sxe->tmp)) {
-		zval_ptr_dtor(&sxe->tmp);
-	}
-
-	ZVAL_COPY_VALUE(&sxe->tmp, &ret);
-
-	return &sxe->tmp;
-}
+	/* For now, return NULL to avoid further corruption */
+	return NULL;
 /* }}} */
 
 /* {{{ sxe_prop_dim_exists() */
