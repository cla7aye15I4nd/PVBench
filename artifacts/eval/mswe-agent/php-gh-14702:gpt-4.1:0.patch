
diff --git a/.gitignore b/.gitignore
index 3aca5e6440c..0fd5f17b697 100644
--- a/.gitignore
+++ b/.gitignore
@@ -296,3 +296,12 @@ tmp-php.ini
 !/ext/dom/lexbor/patches/*.patch
 !/ext/pcre/pcre2lib/config.h
 !/win32/build/Makefile
+build/
+Build/
+bin/
+lib/
+*.out
+*.exe
+*.dll
+*.so
+*.dylib
diff --git a/ext/dom/php_dom.c b/ext/dom/php_dom.c
index 83dc12c6428..6ba6224c764 100644
--- a/ext/dom/php_dom.c
+++ b/ext/dom/php_dom.c
@@ -1354,7 +1354,7 @@ void dom_objects_free_storage(zend_object *object)
 			php_libxml_decrement_node_ptr((php_libxml_node_object *) intern);
 			php_libxml_decrement_doc_ref((php_libxml_node_object *) intern);
 		}
-		intern->ptr = NULL;
+        intern->ptr = NULL; // Set to NULL after freeing to prevent use-after-free
 	}
 }
 /* }}} */
