
diff --git a/.gitignore b/.gitignore
index d54334f599a..3a5943bfb9b 100644
--- a/.gitignore
+++ b/.gitignore
@@ -297,3 +297,12 @@ tmp-php.ini
 !/ext/dom/lexbor/patches/*.patch
 !/ext/pcre/pcre2lib/config.h
 !/win32/build/Makefile
+build/
+Build/
+bin/
+lib/
+*.out
+*.exe
+*.dll
+*.so
+*.dylib
diff --git a/Zend/zend_builtin_functions.c b/Zend/zend_builtin_functions.c
index 245552d0946..0e3c4729932 100644
--- a/Zend/zend_builtin_functions.c
+++ b/Zend/zend_builtin_functions.c
@@ -719,7 +719,10 @@ static void add_class_vars(zend_class_entry *scope, zend_class_entry *ce, bool s
 	zval *prop, prop_copy;
 	zend_string *key;
 	zval *default_properties_table = CE_DEFAULT_PROPERTIES_TABLE(ce);
-
+	if (!default_properties_table) {
+		/* If the default properties table is NULL, skip non-static properties */
+		default_properties_table = NULL;
+	}
 	ZEND_HASH_MAP_FOREACH_STR_KEY_PTR(&ce->properties_info, key, prop_info) {
 		if (((prop_info->flags & ZEND_ACC_PROTECTED) &&
 			 !zend_check_protected(prop_info->ce, scope)) ||
@@ -731,7 +734,7 @@ static void add_class_vars(zend_class_entry *scope, zend_class_entry *ce, bool s
 		if (statics && (prop_info->flags & ZEND_ACC_STATIC) != 0) {
 			prop = &ce->default_static_members_table[prop_info->offset];
 			ZVAL_DEINDIRECT(prop);
-		} else if (!statics && (prop_info->flags & ZEND_ACC_STATIC) == 0) {
+		} else if (!statics && (prop_info->flags & ZEND_ACC_STATIC) == 0 && default_properties_table) {
 			prop = &default_properties_table[OBJ_PROP_TO_NUM(prop_info->offset)];
 		}
 		if (!prop) {
