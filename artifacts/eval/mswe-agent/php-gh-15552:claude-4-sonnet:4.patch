
diff --git a/.gitignore b/.gitignore
index b8eb03412fa..e959803a362 100644
--- a/.gitignore
+++ b/.gitignore
@@ -296,3 +296,12 @@ tmp-php.ini
 !/ext/fileinfo/magicdata.patch
 !/ext/pcre/pcre2lib/config.h
 !/win32/build/Makefile
+build/
+Build/
+bin/
+lib/
+*.out
+*.exe
+*.dll
+*.so
+*.dylib
diff --git a/ext/standard/scanf.c b/ext/standard/scanf.c
index 78ecc1642cf..ba54f748911 100644
--- a/ext/standard/scanf.c
+++ b/ext/standard/scanf.c
@@ -499,7 +499,7 @@ PHPAPI int ValidateFormat(char *format, int numVars, int *totalSubs)
 						nassign[i] = staticAssign[i];
 					}
 				} else {
-					nassign = (void *)erealloc((void *)nassign, nspace * sizeof(int));
+					nassign = (void *)safe_erealloc((void *)nassign, nspace, sizeof(int), 0);
 				}
 				for (i = value; i < nspace; i++) {
 					nassign[i] = 0;
