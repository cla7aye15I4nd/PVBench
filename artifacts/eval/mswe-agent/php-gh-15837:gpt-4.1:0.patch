
diff --git a/.gitignore b/.gitignore
index b8eb03412fa..e959803a362 100644
--- a/.gitignore
+++ b/.gitignore
@@ -296,3 +296,12 @@ tmp-php.ini
 !/ext/fileinfo/magicdata.patch
 !/ext/pcre/pcre2lib/config.h
 !/win32/build/Makefile
+build/
+Build/
+bin/
+lib/
+*.out
+*.exe
+*.dll
+*.so
+*.dylib
diff --git a/ext/simplexml/simplexml.c b/ext/simplexml/simplexml.c
index 6bcb9edcffa..9e14f191da7 100644
--- a/ext/simplexml/simplexml.c
+++ b/ext/simplexml/simplexml.c
@@ -2546,6 +2546,12 @@ static zval *php_sxe_iterator_current_data(zend_object_iterator *iter) /* {{{ */
 static void php_sxe_iterator_current_key(zend_object_iterator *iter, zval *key) /* {{{ */
 {
 	php_sxe_iterator *iterator = (php_sxe_iterator *)iter;
+
+	if (Z_ISUNDEF(iterator->sxe->iter.data)) {
+		ZVAL_NULL(key);
+		return;
+	}
+
 	zval *curobj = &iterator->sxe->iter.data;
 	php_sxe_object *intern = Z_SXEOBJ_P(curobj);
 
