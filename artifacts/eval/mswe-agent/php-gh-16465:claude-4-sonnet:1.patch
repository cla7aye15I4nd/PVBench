
diff --git a/.gitignore b/.gitignore
index d54334f599a..3a5943bfb9b 100644
--- a/.gitignore
+++ b/.gitignore
@@ -297,3 +297,12 @@ tmp-php.ini
 !/ext/dom/lexbor/patches/*.patch
 !/ext/pcre/pcre2lib/config.h
 !/win32/build/Makefile
+build/
+Build/
+bin/
+lib/
+*.out
+*.exe
+*.dll
+*.so
+*.dylib
diff --git a/ext/dom/php_dom.c b/ext/dom/php_dom.c
index 939c1794520..feeccc346a4 100644
--- a/ext/dom/php_dom.c
+++ b/ext/dom/php_dom.c
@@ -1484,7 +1484,7 @@ void dom_namednode_iter(dom_object *basenode, int ntype, dom_object *intern, xml
 		if (len < 0) {
 			zend_str_tolower((char *) mapptr->local_lower, strlen((const char *) mapptr->local_lower));
 		} else {
-			zend_str_tolower((char *) mapptr->local_lower, len);
+			zend_str_tolower((char *) mapptr->local_lower, strlen((const char *) mapptr->local_lower));
 		}
 	}
 
