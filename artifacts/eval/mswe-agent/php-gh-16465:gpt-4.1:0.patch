
diff --git a/.gitignore b/.gitignore
index d54334f599a..3a5943bfb9b 100644
--- a/.gitignore
+++ b/.gitignore
@@ -297,3 +297,12 @@ tmp-php.ini
 !/ext/dom/lexbor/patches/*.patch
 !/ext/pcre/pcre2lib/config.h
 !/win32/build/Makefile
+build/
+Build/
+bin/
+lib/
+*.out
+*.exe
+*.dll
+*.so
+*.dylib
diff --git a/Zend/zend_alloc.c b/Zend/zend_alloc.c
index 2c8023e6257..b0342d44d0d 100644
--- a/Zend/zend_alloc.c
+++ b/Zend/zend_alloc.c
@@ -1480,7 +1480,7 @@ static zend_always_inline void *zend_mm_alloc_heap(zend_mm_heap *heap, size_t si
 	size = MAX(size, 1);
 	size = ZEND_MM_ALIGNED_SIZE(size) + ZEND_MM_ALIGNED_SIZE(sizeof(zend_mm_debug_info));
 	if (UNEXPECTED(size < real_size)) {
-		zend_error_noreturn(E_ERROR, "Possible integer overflow in memory allocation (%zu + %zu)", ZEND_MM_ALIGNED_SIZE(real_size), ZEND_MM_ALIGNED_SIZE(sizeof(zend_mm_debug_info)));
+        return NULL;
 		return NULL;
 	}
 #endif
diff --git a/ext/dom/php_dom.c b/ext/dom/php_dom.c
index 939c1794520..0ca40eeee29 100644
--- a/ext/dom/php_dom.c
+++ b/ext/dom/php_dom.c
@@ -1480,7 +1480,11 @@ void dom_namednode_iter(dom_object *basenode, int ntype, dom_object *intern, xml
 			mapptr->local = xmlCharStrndup(local, len);
 			mapptr->free_local = true;
 		}
-		mapptr->local_lower = BAD_CAST estrdup(local);
+        if (len < 0) {
+            mapptr->local_lower = BAD_CAST estrdup(local);
+        } else {
+            mapptr->local_lower = BAD_CAST estrndup(local, len);
+        }
 		if (len < 0) {
 			zend_str_tolower((char *) mapptr->local_lower, strlen((const char *) mapptr->local_lower));
 		} else {
