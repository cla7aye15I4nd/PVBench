[{"patch": "diff --git a/.gitignore b/.gitignore\nindex b8eb03412fa..e959803a362 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -296,3 +296,12 @@ tmp-php.ini\n !/ext/fileinfo/magicdata.patch\n !/ext/pcre/pcre2lib/config.h\n !/win32/build/Makefile\n+build/\n+Build/\n+bin/\n+lib/\n+*.out\n+*.exe\n+*.dll\n+*.so\n+*.dylib\ndiff --git a/ext/spl/spl_dllist.c b/ext/spl/spl_dllist.c\nindex 6592efc4e5e..d8cbb98a6dc 100644\n--- a/ext/spl/spl_dllist.c\n+++ b/ext/spl/spl_dllist.c\n@@ -1024,8 +1024,28 @@ PHP_METHOD(SplDoublyLinkedList, serialize)\n \t\tsmart_str_appendc(&buf, ':');\n \t\tnext = current->next;\n \n+\n \t\tphp_var_serialize(&buf, &current->data, &var_hash);\n \n+\t\t/* Check if current element is still valid after serialization */\n+\t\t/* We need to verify that 'current' is still in the list before accessing current->next */\n+\t\tspl_ptr_llist_element *temp = intern->llist->head;\n+\t\tint current_found = 0;\n+\t\twhile (temp) {\n+\t\t\tif (temp == current) {\n+\t\t\t\tcurrent_found = 1;\n+\t\t\t\t/* current is still valid, use its next pointer */\n+\t\t\t\tnext = current->next;\n+\t\t\t\tbreak;\n+\t\t\t}\n+\t\t\ttemp = temp->next;\n+\t\t}\n+\t\t\n+\t\tif (!current_found) {\n+\t\t\t/* current was removed during serialization, we need to find where to continue */\n+\t\t\t/* Since we can't safely determine the next element, we'll stop here */\n+\t\t\tbreak;\n+\t\t}\n \t\tcurrent = next;\n \t}\n \n"}]