[{"patch": "diff --git a/.gitignore b/.gitignore\nindex d42e111666f..6df96840d41 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -151,3 +151,9 @@ Python/frozen_modules/MANIFEST\n # Ignore ./python binary on Unix but still look into ./Python/ directory.\n /python\n !/Python/\n+build/\n+Build/\n+bin/\n+lib/\n+*.out\n+*.obj\ndiff --git a/Modules/Setup b/Modules/Setup\nindex d3647ecb995..dfe140569ba 100644\n--- a/Modules/Setup\n+++ b/Modules/Setup\n@@ -144,7 +144,7 @@ PYTHONPATH=$(COREPYTHONPATH)\n #_pickle _pickle.c\n #_queue _queuemodule.c\n #_random _randommodule.c\n-#_socket socketmodule.c\n+_socket socketmodule.c\n #_statistics _statisticsmodule.c\n #_struct _struct.c\n #_typing _typingmodule.c\ndiff --git a/Modules/signalmodule.c b/Modules/signalmodule.c\nindex 60a8067fc8c..6d1b3d7636a 100644\n--- a/Modules/signalmodule.c\n+++ b/Modules/signalmodule.c\n@@ -178,10 +178,16 @@ get_signal_state(PyObject *module)\n }\n \n \n-static inline int\n-compare_handler(PyObject *func, PyObject *dfl_ign_handler)\n+\n+static inline int compare_handler(PyObject *func, PyObject *dfl_ign_handler)\n+\n {\n-    assert(PyLong_CheckExact(dfl_ign_handler));\n+    if (func == NULL || dfl_ign_handler == NULL) {\n+        return 0;\n+    }\n+    if (!PyLong_CheckExact(dfl_ign_handler)) {\n+        return 0;\n+    }\n     if (!PyLong_CheckExact(func)) {\n         return 0;\n     }\n"}]