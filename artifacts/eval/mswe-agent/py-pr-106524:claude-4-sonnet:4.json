[{"patch": "diff --git a/.gitignore b/.gitignore\nindex dddf28da016..efa3374de86 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -158,3 +158,9 @@ Python/frozen_modules/MANIFEST\n \n # main branch only: ABI files are not checked/maintained\n Doc/data/python*.abi\n+build/\n+Build/\n+bin/\n+lib/\n+*.out\n+*.obj\ndiff --git a/Modules/_sre/sre.c b/Modules/_sre/sre.c\nindex 3f11916f9e1..34774cf6705 100644\n--- a/Modules/_sre/sre.c\n+++ b/Modules/_sre/sre.c\n@@ -4,24 +4,24 @@\n  * regular expression matching engine\n  *\n  * partial history:\n- * 1999-10-24 fl   created (based on existing template matcher code)\n- * 2000-03-06 fl   first alpha, sort of\n- * 2000-08-01 fl   fixes for 1.6b1\n- * 2000-08-07 fl   use PyOS_CheckStack() if available\n- * 2000-09-20 fl   added expand method\n- * 2001-03-20 fl   lots of fixes for 2.1b2\n- * 2001-04-15 fl   export copyright as Python attribute, not global\n- * 2001-04-28 fl   added __copy__ methods (work in progress)\n- * 2001-05-14 fl   fixes for 1.5.2 compatibility\n- * 2001-07-01 fl   added BIGCHARSET support (from Martin von Loewis)\n- * 2001-10-18 fl   fixed group reset issue (from Matthew Mueller)\n- * 2001-10-20 fl   added split primitive; re-enable unicode for 1.6/2.0/2.1\n- * 2001-10-21 fl   added sub/subn primitive\n- * 2001-10-24 fl   added finditer primitive (for 2.2 only)\n- * 2001-12-07 fl   fixed memory leak in sub/subn (Guido van Rossum)\n- * 2002-11-09 fl   fixed empty sub/subn return type\n- * 2003-04-18 mvl  fully support 4-byte codes\n- * 2003-10-17 gn   implemented non recursive scheme\n+ * 1999-10-24 fl  created (based on existing template matcher code)\n+ * 2000-03-06 fl  first alpha, sort of\n+ * 2000-08-01 fl  fixes for 1.6b1\n+ * 2000-08-07 fl  use PyOS_CheckStack() if available\n+ * 2000-09-20 fl  added expand method\n+ * 2001-03-20 fl  lots of fixes for 2.1b2\n+ * 2001-04-15 fl  export copyright as Python attribute, not global\n+ * 2001-04-28 fl  added __copy__ methods (work in progress)\n+ * 2001-05-14 fl  fixes for 1.5.2 compatibility\n+ * 2001-07-01 fl  added BIGCHARSET support (from Martin von Loewis)\n+ * 2001-10-18 fl  fixed group reset issue (from Matthew Mueller)\n+ * 2001-10-20 fl  added split primitive; re-enable unicode for 1.6/2.0/2.1\n+ * 2001-10-21 fl  added sub/subn primitive\n+ * 2001-10-24 fl  added finditer primitive (for 2.2 only)\n+ * 2001-12-07 fl  fixed memory leak in sub/subn (Guido van Rossum)\n+ * 2002-11-09 fl  fixed empty sub/subn return type\n+ * 2003-04-18 mvl fully support 4-byte codes\n+ * 2003-10-17 gn  implemented non recursive scheme\n  * 2013-02-04 mrab added fullmatch primitive\n  *\n  * Copyright (c) 1997-2001 by Secret Labs AB.  All rights reserved.\n@@ -34,7 +34,6 @@\n  * CNRI.  Hewlett-Packard provided funding for 1.6 integration and\n  * other compatibility work.\n  */\n-\n static const char copyright[] =\n     \" SRE 2.2.2 Copyright (c) 1997-2002 by Secret Labs AB \";\n \n@@ -1541,6 +1540,11 @@ _sre_template_impl(PyObject *module, PyObject *pattern, PyObject *template)\n         return NULL;\n     self->chunks = 1 + 2*n;\n     self->literal = Py_NewRef(PyList_GET_ITEM(template, 0));\n+    // Initialize all items[i].literal to NULL to prevent crashes in template_clear\n+    // if an error occurs during initialization\n+    for (Py_ssize_t i = 0; i < n; i++) {\n+        self->items[i].literal = NULL;\n+    }\n     for (Py_ssize_t i = 0; i < n; i++) {\n         Py_ssize_t index = PyLong_AsSsize_t(PyList_GET_ITEM(template, 2*i+1));\n         if (index == -1 && PyErr_Occurred()) {\n"}]