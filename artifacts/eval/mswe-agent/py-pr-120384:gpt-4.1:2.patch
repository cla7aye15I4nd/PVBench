
diff --git a/.gitignore b/.gitignore
index 8872e9d5508..959a12bbd57 100644
--- a/.gitignore
+++ b/.gitignore
@@ -171,3 +171,9 @@ Python/frozen_modules/MANIFEST
 
 # main branch only: ABI files are not checked/maintained.
 Doc/data/python*.abi
+build/
+Build/
+bin/
+lib/
+*.out
+*.obj
diff --git a/Include/cpython/listobject.h b/Include/cpython/listobject.h
index 49f5e8d6d1a..112541c1836 100644
--- a/Include/cpython/listobject.h
+++ b/Include/cpython/listobject.h
@@ -51,3 +51,4 @@ PyList_SET_ITEM(PyObject *op, Py_ssize_t index, PyObject *value) {
 
 PyAPI_FUNC(int) PyList_Extend(PyObject *self, PyObject *iterable);
 PyAPI_FUNC(int) PyList_Clear(PyObject *self);
+
diff --git a/Objects/listobject.c b/Objects/listobject.c
index 6829d5d2865..ede57c2d2cb 100644
--- a/Objects/listobject.c
+++ b/Objects/listobject.c
@@ -3584,7 +3584,12 @@ list_subscript(PyObject* _self, PyObject* item)
 static int
 list_ass_subscript(PyObject* _self, PyObject* item, PyObject* value)
 {
+    if (!Py_IS_TYPE(_self, &PyList_Type)) {
+        PyErr_SetString(PyExc_SystemError, "list_ass_subscript called with non-list object");
+        return -1;
+    }
     PyListObject *self = (PyListObject *)_self;
+
     if (_PyIndex_Check(item)) {
         Py_ssize_t i = PyNumber_AsSsize_t(item, PyExc_IndexError);
         if (i == -1 && PyErr_Occurred())
@@ -3721,13 +3726,25 @@ list_ass_subscript(PyObject* _self, PyObject* item, PyObject* value)
 
             selfitems = self->ob_item;
             seqitems = PySequence_Fast_ITEMS(seq);
-            for (cur = start, i = 0; i < slicelength;
-                 cur += (size_t)step, i++) {
+
+            if (selfitems == NULL || garbage == NULL || seqitems == NULL) {
+                PyMem_Free(garbage);
+                Py_DECREF(seq);
+                PyErr_SetString(PyExc_SystemError, "list assignment: NULL pointer in selfitems, garbage, or seqitems");
+                return -1;
+            }
+
+            for (cur = start, i = 0; i < slicelength; cur += (size_t)step, i++) {
+                if (cur >= (size_t)Py_SIZE(self)) {
+                    PyMem_Free(garbage);
+                    Py_DECREF(seq);
+                    PyErr_SetString(PyExc_IndexError, "list assignment index out of range (corrupted list?)");
+                    return -1;
+                }
                 garbage[i] = selfitems[cur];
                 ins = Py_NewRef(seqitems[i]);
                 selfitems[cur] = ins;
             }
-
             for (i = 0; i < slicelength; i++) {
                 Py_DECREF(garbage[i]);
             }
