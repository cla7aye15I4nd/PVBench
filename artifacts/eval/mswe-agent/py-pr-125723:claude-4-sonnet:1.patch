
diff --git a/.gitignore b/.gitignore
index 8872e9d5508..959a12bbd57 100644
--- a/.gitignore
+++ b/.gitignore
@@ -171,3 +171,9 @@ Python/frozen_modules/MANIFEST
 
 # main branch only: ABI files are not checked/maintained.
 Doc/data/python*.abi
+build/
+Build/
+bin/
+lib/
+*.out
+*.obj
diff --git a/Objects/frameobject.c b/Objects/frameobject.c
index d6b4065e130..80903a469b4 100644
--- a/Objects/frameobject.c
+++ b/Objects/frameobject.c
@@ -136,6 +136,17 @@ framelocalsproxy_getitem(PyObject *self, PyObject *key)
     if (i >= 0) {
         PyObject *value = framelocalsproxy_getval(frame->f_frame, co, i);
         assert(value != NULL);
+        
+        // For cell objects, we need to get a new reference to avoid use-after-free
+        _PyLocals_Kind kind = _PyLocals_GetKind(co->co_localspluskinds, i);
+        if (kind & CO_FAST_CELL || kind == CO_FAST_FREE) {
+            _PyStackRef *fast = _PyFrame_GetLocalsArray(frame->f_frame);
+            PyObject *cell = PyStackRef_AsPyObjectBorrow(fast[i]);
+            if (PyCell_Check(cell)) {
+                return PyCell_GetRef((PyCellObject *)cell);
+            }
+        }
+        
         return Py_NewRef(value);
     }
 
