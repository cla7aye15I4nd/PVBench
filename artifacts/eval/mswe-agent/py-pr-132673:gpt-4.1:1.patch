
diff --git a/.gitignore b/.gitignore
index 307814a276a..3127999a700 100644
--- a/.gitignore
+++ b/.gitignore
@@ -170,3 +170,9 @@ Python/frozen_modules/MANIFEST
 /python
 !/Python/
 
+build/
+Build/
+bin/
+lib/
+*.out
+*.obj
diff --git a/Modules/_ctypes/stgdict.c b/Modules/_ctypes/stgdict.c
index ad82e4891c5..625dd3aa2b8 100644
--- a/Modules/_ctypes/stgdict.c
+++ b/Modules/_ctypes/stgdict.c
@@ -569,7 +569,10 @@ PyCStructUnionType_update_stginfo(PyObject *type, PyObject *fields, int isStruct
         size = union_size;
     }
 
-    /* Adjust the size according to the alignment requirements */
+    /* Ensure total_align is never zero to avoid divide-by-zero */
+    if (total_align == 0) {
+        total_align = 1;
+    }
     aligned_size = ((size + total_align - 1) / total_align) * total_align;
 
     if (isStruct) {
