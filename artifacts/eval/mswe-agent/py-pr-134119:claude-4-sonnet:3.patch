
diff --git a/.gitignore b/.gitignore
index 2a6f249275c..b3c9b7a4ed8 100644
--- a/.gitignore
+++ b/.gitignore
@@ -173,3 +173,9 @@ Python/frozen_modules/MANIFEST
 
 # main branch only: ABI files are not checked/maintained.
 Doc/data/python*.abi
+build/
+Build/
+bin/
+lib/
+*.out
+*.obj
diff --git a/Objects/templateobject.c b/Objects/templateobject.c
index 06cb19e0b6d..4ccdc8d3118 100644
--- a/Objects/templateobject.c
+++ b/Objects/templateobject.c
@@ -22,13 +22,22 @@ templateiter_next(PyObject *op)
     PyObject *item;
     if (self->from_strings) {
         item = PyIter_Next(self->stringsiter);
+        if (item == NULL) {
+            return NULL;
+        }
         self->from_strings = 0;
         if (PyUnicode_GET_LENGTH(item) == 0) {
             Py_SETREF(item, PyIter_Next(self->interpolationsiter));
+            if (item == NULL) {
+                return NULL;
+            }
             self->from_strings = 1;
         }
     } else {
         item = PyIter_Next(self->interpolationsiter);
+        if (item == NULL) {
+            return NULL;
+        }
         self->from_strings = 1;
     }
     return item;
