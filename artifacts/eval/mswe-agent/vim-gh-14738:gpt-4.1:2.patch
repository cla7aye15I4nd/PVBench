
diff --git a/.gitignore b/.gitignore
index 241e96eaf..6bdb4f440 100644
--- a/.gitignore
+++ b/.gitignore
@@ -117,3 +117,11 @@ src/cscope.out
 /.cache/clangd/
 /.ccls-cache/
 /compile_commands.json
+build/
+Build/
+bin/
+lib/
+*.out
+*.dll
+*.so
+*.dylib
diff --git a/src/xxd/xxd.c b/src/xxd/xxd.c
index cf8b4ea6a..695db1172 100644
--- a/src/xxd/xxd.c
+++ b/src/xxd/xxd.c
@@ -1062,7 +1062,7 @@ main(int argc, char *argv[])
 	{
           if (color)
             {
-	      COLOR_PROLOGUE
+              if (c + 5 <= LLEN) { COLOR_PROLOGUE }
 	      begin_coloring_char(l,&c,e,ebcdic);
 	      l[c++] = hexx[(e >> 4) & 0xf];
 	      l[c++] = hexx[e & 0xf];
@@ -1098,7 +1098,7 @@ main(int argc, char *argv[])
           if (hextype == HEX_LITTLEENDIAN)
             c += 1;
 
-          COLOR_PROLOGUE
+          if (c + 5 <= LLEN) { COLOR_PROLOGUE }
           begin_coloring_char(l,&c,e,ebcdic);
 #if defined(__MVS__) && __CHARSET_LIB == 0
           if (e >= 64)
@@ -1163,7 +1163,7 @@ main(int argc, char *argv[])
 
               for (i = 0; i < fill;i++)
                 {
-                  COLOR_PROLOGUE
+                  if (c + 5 <= LLEN) { COLOR_PROLOGUE }
                   l[c++] = COLOR_RED;
                   l[c++] = 'm';
                   l[c++] = ' '; /* empty space */
@@ -1181,7 +1181,7 @@ main(int argc, char *argv[])
 
               for (i = cols - p; i > 0;i--)
                 {
-                  COLOR_PROLOGUE
+                  if (c + 5 <= LLEN) { COLOR_PROLOGUE }
                   l[c++] = COLOR_RED;
                   l[c++] = 'm';
                   l[c++] = ' '; /* empty space */
