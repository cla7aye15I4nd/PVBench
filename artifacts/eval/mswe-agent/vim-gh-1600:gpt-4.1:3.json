[{"patch": "diff --git a/.gitignore b/.gitignore\nindex 07adcb61a..0ff76b4d5 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -83,3 +83,11 @@ src/memfile_test\n src/json_test\n src/message_test\n src/kword_test\n+build/\n+Build/\n+bin/\n+lib/\n+*.out\n+*.dll\n+*.so\n+*.dylib\ndiff --git a/src/edit.c b/src/edit.c\nindex cdde11e40..d4621e17d 100644\n--- a/src/edit.c\n+++ b/src/edit.c\n@@ -4948,13 +4948,16 @@ ins_compl_next(\n      */\n     if (compl_shown_match->cp_fname != NULL)\n     {\n-\tSTRCPY(IObuff, \"match in file \");\n-\ti = (vim_strsize(compl_shown_match->cp_fname) + 16) - sc_col;\n-\tif (i <= 0)\n-\t    i = 0;\n-\telse\n-\t    STRCAT(IObuff, \"<\");\n-\tSTRCAT(IObuff, compl_shown_match->cp_fname + i);\n+        size_t fname_len = STRLEN(compl_shown_match->cp_fname);\n+        i = (vim_strsize(compl_shown_match->cp_fname) + 16) - sc_col;\n+        if (i <= 0)\n+            i = 0;\n+        else if ((size_t)i > fname_len)\n+            i = fname_len;\n+        if (i > 0)\n+            vim_snprintf((char *)IObuff, IOSIZE, \"match in file <%s\", compl_shown_match->cp_fname + i);\n+        else\n+            vim_snprintf((char *)IObuff, IOSIZE, \"match in file %s\", compl_shown_match->cp_fname);\n \tmsg(IObuff);\n \tredraw_cmdline = FALSE;\t    /* don't overwrite! */\n     }\n"}]