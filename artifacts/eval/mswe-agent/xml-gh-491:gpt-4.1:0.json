[{"patch": "diff --git a/.gitignore b/.gitignore\nindex 6f5dc0b4..07196a6f 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -116,3 +116,12 @@ xstc/Makefile\n xstc/Makefile.in\n xstc/Tests\n xstc/xsts-*.tar.gz\n+build/\n+Build/\n+bin/\n+lib/\n+*.out\n+*.obj\n+*.dll\n+*.so\n+*.dylib\ndiff --git a/xmlschemas.c b/xmlschemas.c\nindex 6a353858..c1259a6c 100644\n--- a/xmlschemas.c\n+++ b/xmlschemas.c\n@@ -18657,7 +18657,15 @@ xmlSchemaFixupComplexType(xmlSchemaParserCtxtPtr pctxt,\n \t\t    * Create a duplicate of the base type's particle\n \t\t    * and assign its \"term\" to it.\n \t\t    */\n-\t\t    particle->children->children =\n+                    /* Prevent NULL dereference of baseType or baseType->subtypes */\n+                    if (baseType == NULL || baseType->subtypes == NULL) {\n+                        goto exit_failure;\n+                    }\n+                    particle->children->children =\n+                        (xmlSchemaTreeItemPtr) xmlSchemaAddParticle(pctxt,\n+                        type->node,\n+                        ((xmlSchemaParticlePtr) baseType->subtypes)->minOccurs,\n+                        ((xmlSchemaParticlePtr) baseType->subtypes)->maxOccurs);\n \t\t\t(xmlSchemaTreeItemPtr) xmlSchemaAddParticle(pctxt,\n \t\t\ttype->node,\n \t\t\t((xmlSchemaParticlePtr) baseType->subtypes)->minOccurs,\n"}]