{"patch": "diff --git a/lib/AST/ES6Class.cpp b/lib/AST/ES6Class.cpp\nindex 42155e587..525ed17ad 100644\n--- a/lib/AST/ES6Class.cpp\n+++ b/lib/AST/ES6Class.cpp\n@@ -137,7 +137,10 @@ namespace hermes {\n class ES6ClassesTransformations {\n  public:\n   ES6ClassesTransformations(Context &context)\n-      : context_(context),\n+      : recursionDepth_(0),\n+        maxRecursionDepth_(100),\n+        hasError_(false),\n+        context_(context),\n         identVar_(context.getIdentifier(\"var\").getUnderlyingPointer()) {}\n \n   ESTree::VisitResult visit(ESTree::ClassDeclarationNode *classDecl) {\n@@ -222,13 +225,30 @@ class ES6ClassesTransformations {\n     visitESTreeChildren(*this, node);\n   }\n \n-  bool incRecursionDepth(ESTree::Node *) {\n+  bool incRecursionDepth(ESTree::Node *node) {\n+    if (hasError_) {\n+      return false;\n+    }\n+    if (recursionDepth_ >= maxRecursionDepth_) {\n+      context_.getSourceErrorManager().error(\n+          node->getSourceRange(), \"Maximum recursion depth exceeded\");\n+      hasError_ = true;\n+      return false;\n+    }\n+    ++recursionDepth_;\n     return true;\n   }\n \n-  void decRecursionDepth() {}\n+  void decRecursionDepth() {\n+    if (!hasError_ && recursionDepth_ > 0) {\n+      --recursionDepth_;\n+    }\n+  }\n \n  private:\n+  unsigned recursionDepth_;\n+  unsigned maxRecursionDepth_;\n+  bool hasError_;\n   Context &context_;\n   UniqueString *const identVar_;\n   VisitedClass *_currentProcessingClass = nullptr;\n", "result": true}