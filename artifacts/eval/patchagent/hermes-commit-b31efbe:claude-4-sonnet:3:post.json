{"patch": "diff --git a/lib/AST/ES6Class.cpp b/lib/AST/ES6Class.cpp\nindex 42155e587..60f691c9e 100644\n--- a/lib/AST/ES6Class.cpp\n+++ b/lib/AST/ES6Class.cpp\n@@ -138,7 +138,10 @@ class ES6ClassesTransformations {\n  public:\n   ES6ClassesTransformations(Context &context)\n       : context_(context),\n-        identVar_(context.getIdentifier(\"var\").getUnderlyingPointer()) {}\n+        identVar_(context.getIdentifier(\"var\").getUnderlyingPointer()),\n+        recursionDepth_(0),\n+        maxRecursionDepth_(100),\n+        recursionLimitExceeded_(false) {}\n \n   ESTree::VisitResult visit(ESTree::ClassDeclarationNode *classDecl) {\n     auto *classBody = llvh::dyn_cast<ESTree::ClassBodyNode>(classDecl->_body);\n@@ -223,14 +226,29 @@ class ES6ClassesTransformations {\n   }\n \n   bool incRecursionDepth(ESTree::Node *) {\n+    if (recursionLimitExceeded_) {\n+      return false;\n+    }\n+    if (recursionDepth_ >= maxRecursionDepth_) {\n+      recursionLimitExceeded_ = true;\n+      return false;\n+    }\n+    ++recursionDepth_;\n     return true;\n   }\n \n-  void decRecursionDepth() {}\n+  void decRecursionDepth() {\n+    if (recursionDepth_ > 0) {\n+      --recursionDepth_;\n+    }\n+  }\n \n  private:\n   Context &context_;\n   UniqueString *const identVar_;\n+  unsigned recursionDepth_;\n+  const unsigned maxRecursionDepth_;\n+  bool recursionLimitExceeded_;\n   VisitedClass *_currentProcessingClass = nullptr;\n   const ResolvedClassMember *_currentClassMember = nullptr;\n \n", "result": true}