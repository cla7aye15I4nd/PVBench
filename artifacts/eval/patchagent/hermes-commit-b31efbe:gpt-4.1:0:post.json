{"patch": "diff --git a/lib/AST/ES6Class.cpp b/lib/AST/ES6Class.cpp\nindex 42155e587..258c5c4f5 100644\n--- a/lib/AST/ES6Class.cpp\n+++ b/lib/AST/ES6Class.cpp\n@@ -140,6 +140,24 @@ class ES6ClassesTransformations {\n       : context_(context),\n         identVar_(context.getIdentifier(\"var\").getUnderlyingPointer()) {}\n \n+  static constexpr int kMaxRecursionDepth = 512; // You can tune this value as needed\n+  int recursionDepth_ = 0;\n+  bool recursionLimitHit_ = false;\n+\n+  bool incRecursionDepth(ESTree::Node *) {\n+    if (recursionLimitHit_) return false;\n+    if (++recursionDepth_ >= kMaxRecursionDepth) {\n+      recursionLimitHit_ = true;\n+      return false;\n+    }\n+    return true;\n+  }\n+\n+  void decRecursionDepth() {\n+    if (!recursionLimitHit_ && recursionDepth_ > 0)\n+      --recursionDepth_;\n+  }\n+\n   ESTree::VisitResult visit(ESTree::ClassDeclarationNode *classDecl) {\n     auto *classBody = llvh::dyn_cast<ESTree::ClassBodyNode>(classDecl->_body);\n     if (classBody == nullptr) {\n@@ -222,11 +240,6 @@ class ES6ClassesTransformations {\n     visitESTreeChildren(*this, node);\n   }\n \n-  bool incRecursionDepth(ESTree::Node *) {\n-    return true;\n-  }\n-\n-  void decRecursionDepth() {}\n \n  private:\n   Context &context_;\n", "result": true}