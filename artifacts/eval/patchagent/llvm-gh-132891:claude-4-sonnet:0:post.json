{"patch": "diff --git a/mlir/lib/AsmParser/AttributeParser.cpp b/mlir/lib/AsmParser/AttributeParser.cpp\nindex 89b5970cf5e2..0c519f4b9319 100644\n--- a/mlir/lib/AsmParser/AttributeParser.cpp\n+++ b/mlir/lib/AsmParser/AttributeParser.cpp\n@@ -1092,6 +1092,11 @@ Attribute Parser::parseSparseElementsAttr(Type attrType) {\n           : RankedTensorType::get(valuesParser.getShape(), valuesEltType);\n   auto values = valuesParser.getAttr(valuesLoc, valuesType);\n \n+  // Check for parsing failures before creating the sparse elements attribute.\n+  if (!indices || !values)\n+    return nullptr;\n+\n+\n   // Build the sparse elements attribute by the indices and values.\n   return getChecked<SparseElementsAttr>(loc, type, indices, values);\n }\n", "result": true}