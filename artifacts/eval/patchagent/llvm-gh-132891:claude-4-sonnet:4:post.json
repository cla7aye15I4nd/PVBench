{"patch": "diff --git a/mlir/lib/AsmParser/AttributeParser.cpp b/mlir/lib/AsmParser/AttributeParser.cpp\nindex 89b5970cf5e2..27f93d8040d7 100644\n--- a/mlir/lib/AsmParser/AttributeParser.cpp\n+++ b/mlir/lib/AsmParser/AttributeParser.cpp\n@@ -1082,6 +1082,10 @@ Attribute Parser::parseSparseElementsAttr(Type attrType) {\n   }\n   auto indices = indiceParser.getAttr(indicesLoc, indicesType);\n \n+  // Check if indices parsing failed.\n+  if (!indices)\n+    return nullptr;\n+\n   // If the values are a splat, set the shape explicitly based on the number of\n   // indices. The number of indices is encoded in the first dimension of the\n   // indice shape type.\n@@ -1092,6 +1096,10 @@ Attribute Parser::parseSparseElementsAttr(Type attrType) {\n           : RankedTensorType::get(valuesParser.getShape(), valuesEltType);\n   auto values = valuesParser.getAttr(valuesLoc, valuesType);\n \n+  // Check if values parsing failed.\n+  if (!values)\n+    return nullptr;\n+\n   // Build the sparse elements attribute by the indices and values.\n   return getChecked<SparseElementsAttr>(loc, type, indices, values);\n }\n", "result": true}