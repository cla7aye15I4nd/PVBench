{"patch": "diff --git a/llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp b/llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp\nindex 838e952c024c..48936804d793 100644\n--- a/llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp\n+++ b/llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp\n@@ -14699,6 +14699,8 @@ BoUpSLP::isGatherShuffledSingleRegisterEntry(\n   for (const std::pair<unsigned, int> &Pair : EntryLanes) {\n     unsigned Idx = Part * VL.size() + Pair.second;\n     Mask[Idx] =\n+        // Check bounds before accessing Entries[Pair.first]\n+        Pair.first >= Entries.size() ? PoisonMaskElem :\n         Pair.first * VF +\n         (ForOrder ? std::distance(\n                         Entries[Pair.first]->Scalars.begin(),\n", "result": true}