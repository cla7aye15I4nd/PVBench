{"patch": "diff --git a/clang/lib/Sema/SemaOpenMP.cpp b/clang/lib/Sema/SemaOpenMP.cpp\nindex 15d568fcb9cc..5a7ee0200f70 100644\n--- a/clang/lib/Sema/SemaOpenMP.cpp\n+++ b/clang/lib/Sema/SemaOpenMP.cpp\n@@ -2998,8 +2998,11 @@ static bool FinishOpenMPLinearClause(OMPLinearClause &Clause, DeclRefExpr *IV,\n static bool finishLinearClauses(Sema &SemaRef, ArrayRef<OMPClause *> Clauses,\n                                 OMPLoopBasedDirective::HelperExprs &B,\n                                 DSAStackTy *Stack) {\n-  assert((SemaRef.CurContext->isDependentContext() || B.builtAll()) &&\n-         \"loop exprs were not built\");\n+  // If we're not in a dependent context and the loop expressions weren't built,\n+  // it means there were semantic errors (e.g., undeclared identifiers in\n+  // collapse clause). In such cases, we should skip finishing linear clauses.\n+  if (!SemaRef.CurContext->isDependentContext() && !B.builtAll())\n+    return false;\n \n   if (SemaRef.CurContext->isDependentContext())\n     return false;\n", "result": true}