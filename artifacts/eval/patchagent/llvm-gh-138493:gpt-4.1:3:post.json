{"patch": "diff --git a/clang/lib/Sema/SemaOpenMP.cpp b/clang/lib/Sema/SemaOpenMP.cpp\nindex 15d568fcb9cc..6cec9bb830ec 100644\n--- a/clang/lib/Sema/SemaOpenMP.cpp\n+++ b/clang/lib/Sema/SemaOpenMP.cpp\n@@ -10425,6 +10425,10 @@ StmtResult SemaOpenMP::ActOnOpenMPSimdDirective(\n   if (NestedLoopCount == 0)\n     return StmtError();\n \n+  // If loop expressions were not built (e.g. due to invalid collapse argument), error out early.\n+  if (!SemaRef.CurContext->isDependentContext() && !B.builtAll())\n+    return StmtError();\n+\n   if (finishLinearClauses(SemaRef, Clauses, B, DSAStack))\n     return StmtError();\n \n", "result": true}