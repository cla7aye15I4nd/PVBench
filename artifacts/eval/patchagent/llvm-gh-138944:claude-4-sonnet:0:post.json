{"patch": "diff --git a/llvm/lib/Target/X86/X86ISelLowering.cpp b/llvm/lib/Target/X86/X86ISelLowering.cpp\nindex f04603867a58..11096991f377 100644\n--- a/llvm/lib/Target/X86/X86ISelLowering.cpp\n+++ b/llvm/lib/Target/X86/X86ISelLowering.cpp\n@@ -54745,6 +54745,11 @@ SDValue X86TargetLowering::getNegatedExpression(SDValue Op, SelectionDAG &DAG,\n     for (int i = 0, e = Op.getNumOperands(); i != e; ++i)\n       if (!NewOps[i])\n         NewOps[i] = Op.getOperand(i);\n+    \n+    // Validate that all operands are still valid before creating the node\n+    for (const SDValue &Operand : NewOps)\n+      if (!Operand || Operand.getOpcode() == ISD::DELETED_NODE)\n+        return SDValue();\n     return DAG.getNode(NewOpc, SDLoc(Op), VT, NewOps);\n   }\n   case X86ISD::FRCP:\n", "result": true}