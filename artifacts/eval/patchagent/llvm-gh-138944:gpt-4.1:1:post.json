{"patch": "diff --git a/llvm/lib/CodeGen/SelectionDAG/SelectionDAG.cpp b/llvm/lib/CodeGen/SelectionDAG/SelectionDAG.cpp\nindex bbf1b0fd590e..ba73bbd948b4 100644\n--- a/llvm/lib/CodeGen/SelectionDAG/SelectionDAG.cpp\n+++ b/llvm/lib/CodeGen/SelectionDAG/SelectionDAG.cpp\n@@ -7786,10 +7786,11 @@ SDValue SelectionDAG::getNode(unsigned Opcode, const SDLoc &DL, EVT VT,\n SDValue SelectionDAG::getNode(unsigned Opcode, const SDLoc &DL, EVT VT,\n                               SDValue N1, SDValue N2, SDValue N3,\n                               const SDNodeFlags Flags) {\n-  assert(N1.getOpcode() != ISD::DELETED_NODE &&\n-         N2.getOpcode() != ISD::DELETED_NODE &&\n-         N3.getOpcode() != ISD::DELETED_NODE &&\n-         \"Operand is DELETED_NODE!\");\n+  if (!N1.getNode() || N1.getOpcode() == ISD::DELETED_NODE ||\n+      !N2.getNode() || N2.getOpcode() == ISD::DELETED_NODE ||\n+      !N3.getNode() || N3.getOpcode() == ISD::DELETED_NODE) {\n+    return SDValue();\n+  }\n   // Perform various simplifications.\n   switch (Opcode) {\n   case ISD::FMA:\n@@ -10410,8 +10411,8 @@ SDValue SelectionDAG::getNode(unsigned Opcode, const SDLoc &DL, EVT VT,\n \n #ifndef NDEBUG\n   for (const auto &Op : Ops)\n-    assert(Op.getOpcode() != ISD::DELETED_NODE &&\n-           \"Operand is DELETED_NODE!\");\n+    if (!Op.getNode() || Op.getOpcode() == ISD::DELETED_NODE)\n+      return SDValue();\n #endif\n \n   switch (Opcode) {\n", "result": true}