{"patch": "diff --git a/clang/lib/Sema/SemaOpenMP.cpp b/clang/lib/Sema/SemaOpenMP.cpp\nindex 50211c5cf3ed..8e92beb336a2 100644\n--- a/clang/lib/Sema/SemaOpenMP.cpp\n+++ b/clang/lib/Sema/SemaOpenMP.cpp\n@@ -14913,7 +14913,12 @@ StmtResult SemaOpenMP::ActOnOpenMPUnrollDirective(ArrayRef<OMPClause *> Clauses,\n   uint64_t Factor;\n   SourceLocation FactorLoc;\n   if (Expr *FactorVal = PartialClause->getFactor()) {\n-    Factor = FactorVal->getIntegerConstantExpr(Context)->getZExtValue();\n+    std::optional<llvm::APSInt> FactorInt = \n+        FactorVal->getIntegerConstantExpr(Context);\n+    if (!FactorInt.has_value()) {\n+      return StmtError();\n+    }\n+    Factor = FactorInt->getZExtValue();\n     FactorLoc = FactorVal->getExprLoc();\n   } else {\n     // TODO: Use a better profitability model.\n", "result": true}