{"patch": "diff --git a/clang/lib/Sema/SemaOpenMP.cpp b/clang/lib/Sema/SemaOpenMP.cpp\nindex 50211c5cf3ed..8a6e2a537cea 100644\n--- a/clang/lib/Sema/SemaOpenMP.cpp\n+++ b/clang/lib/Sema/SemaOpenMP.cpp\n@@ -14913,7 +14913,15 @@ StmtResult SemaOpenMP::ActOnOpenMPUnrollDirective(ArrayRef<OMPClause *> Clauses,\n   uint64_t Factor;\n   SourceLocation FactorLoc;\n   if (Expr *FactorVal = PartialClause->getFactor()) {\n-    Factor = FactorVal->getIntegerConstantExpr(Context)->getZExtValue();\n+    ExprResult FactorResult = VerifyPositiveIntegerConstantInClause(\n+        FactorVal, OMPC_partial, /*StrictlyPositive=*/true);\n+    if (FactorResult.isInvalid())\n+      return StmtError();\n+    \n+    auto FactorInt = FactorVal->getIntegerConstantExpr(Context);\n+    if (!FactorInt.has_value())\n+      return StmtError();\n+    Factor = FactorInt->getZExtValue();\n     FactorLoc = FactorVal->getExprLoc();\n   } else {\n     // TODO: Use a better profitability model.\n", "result": true}