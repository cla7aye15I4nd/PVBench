{"patch": "diff --git a/ext/simplexml/simplexml.c b/ext/simplexml/simplexml.c\nindex ce7c96a0d46..6d2f4a818db 100644\n--- a/ext/simplexml/simplexml.c\n+++ b/ext/simplexml/simplexml.c\n@@ -2377,11 +2377,13 @@ PHP_METHOD(SimpleXMLElement, __construct)\n \tdocp = is_url ? xmlReadFile(data, NULL, (int)options) : xmlReadMemory(data, (int)data_len, NULL, NULL, (int)options);\n \tPHP_LIBXML_RESTORE_GLOBALS(read_file_or_memory);\n \n-\tif (!docp) {\n-\t\t((php_libxml_node_object *)sxe)->document = NULL;\n-\t\tzend_throw_exception(zend_ce_exception, \"String could not be parsed as XML\", 0);\n-\t\tRETURN_THROWS();\n-\t}\n+    if (!docp) {\n+        php_libxml_decrement_node_ptr((php_libxml_node_object *)sxe);\n+        php_libxml_decrement_doc_ref((php_libxml_node_object *)sxe);\n+        ((php_libxml_node_object *)sxe)->document = NULL;\n+        zend_throw_exception(zend_ce_exception, \"String could not be parsed as XML\", 0);\n+        RETURN_THROWS();\n+    }\n \n \tsxe->iter.nsprefix = ns_len ? (xmlChar*)estrdup(ns) : NULL;\n \tsxe->iter.isprefix = isprefix;\n", "result": true}