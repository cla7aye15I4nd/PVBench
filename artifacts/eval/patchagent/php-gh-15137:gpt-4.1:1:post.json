{"patch": "diff --git a/ext/dom/text.c b/ext/dom/text.c\nindex fe0cc8cd5a5..1662109b660 100644\n--- a/ext/dom/text.c\n+++ b/ext/dom/text.c\n@@ -76,10 +76,12 @@ zend_result dom_text_whole_text_read(dom_object *obj, zval *retval)\n \t}\n \n \t/* concatenate all adjacent text and cdata nodes */\n-\twhile (node && ((node->type == XML_TEXT_NODE) || (node->type == XML_CDATA_SECTION_NODE))) {\n-\t\tsmart_str_appends(&str, (const char *) node->content);\n-\t\tnode = node->next;\n-\t}\n+    while (node && ((node->type == XML_TEXT_NODE) || (node->type == XML_CDATA_SECTION_NODE))) {\n+        if (node->content != NULL) {\n+            smart_str_appends(&str, (const char *) node->content);\n+        }\n+        node = node->next;\n+    }\n \n \tZVAL_STR(retval, smart_str_extract(&str));\n \n", "result": true}