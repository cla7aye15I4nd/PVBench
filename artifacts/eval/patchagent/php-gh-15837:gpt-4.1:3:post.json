{"patch": "diff --git a/ext/simplexml/simplexml.c b/ext/simplexml/simplexml.c\nindex 6bcb9edcffa..205fa1623d2 100644\n--- a/ext/simplexml/simplexml.c\n+++ b/ext/simplexml/simplexml.c\n@@ -2546,19 +2546,23 @@ static zval *php_sxe_iterator_current_data(zend_object_iterator *iter) /* {{{ */\n static void php_sxe_iterator_current_key(zend_object_iterator *iter, zval *key) /* {{{ */\n {\n \tphp_sxe_iterator *iterator = (php_sxe_iterator *)iter;\n-\tzval *curobj = &iterator->sxe->iter.data;\n-\tphp_sxe_object *intern = Z_SXEOBJ_P(curobj);\n-\n-\txmlNodePtr curnode = NULL;\n-\tif (intern != NULL && intern->node != NULL) {\n-\t\tcurnode = (xmlNodePtr)((php_libxml_node_ptr *)intern->node)->node;\n-\t}\n-\n-\tif (curnode) {\n-\t\tZVAL_STRINGL(key, (char *) curnode->name, xmlStrlen(curnode->name));\n-\t} else {\n-\t\tZVAL_NULL(key);\n-\t}\n+    if (Z_ISUNDEF(iterator->sxe->iter.data)) {\n+        ZVAL_NULL(key);\n+        return;\n+    }\n+    zval *curobj = &iterator->sxe->iter.data;\n+    php_sxe_object *intern = Z_SXEOBJ_P(curobj);\n+\n+    xmlNodePtr curnode = NULL;\n+    if (intern != NULL && intern->node != NULL) {\n+        curnode = (xmlNodePtr)((php_libxml_node_ptr *)intern->node)->node;\n+    }\n+\n+    if (curnode) {\n+        ZVAL_STRINGL(key, (char *) curnode->name, xmlStrlen(curnode->name));\n+    } else {\n+        ZVAL_NULL(key);\n+    }\n }\n /* }}} */\n \n", "result": true}