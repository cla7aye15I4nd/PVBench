{"patch": "diff --git a/ext/reflection/php_reflection.c b/ext/reflection/php_reflection.c\nindex f24b00a2857..f5ba5cdfddc 100644\n--- a/ext/reflection/php_reflection.c\n+++ b/ext/reflection/php_reflection.c\n@@ -472,16 +472,18 @@ static void _class_string(smart_str *str, zend_class_entry *ce, zval *obj, char\n \n \tif (obj && Z_TYPE_P(obj) == IS_OBJECT) {\n \t\tHashTable    *properties = Z_OBJ_HT_P(obj)->get_properties(Z_OBJ_P(obj));\n-\t\tzend_string  *prop_name;\n+\t\tzend_string  *key;\n+\t\tzend_ulong    h;\n+\t\tzval         *val;\n \t\tsmart_str prop_str = {0};\n \n \t\tcount = 0;\n \t\tif (properties && zend_hash_num_elements(properties)) {\n-\t\t\tZEND_HASH_MAP_FOREACH_STR_KEY(properties, prop_name) {\n-\t\t\t\tif (prop_name && ZSTR_LEN(prop_name) && ZSTR_VAL(prop_name)[0]) { /* skip all private and protected properties */\n-\t\t\t\t\tif (!zend_hash_exists(&ce->properties_info, prop_name)) {\n+\t\t\tZEND_HASH_FOREACH_KEY_VAL(properties, h, key, val) {\n+\t\t\t\tif (key && ZSTR_LEN(key) > 0 && ZSTR_VAL(key)[0] != '\\0') { /* skip all private and protected properties */\n+\t\t\t\t\tif (!zend_hash_exists(&ce->properties_info, key)) {\n \t\t\t\t\t\tcount++;\n-\t\t\t\t\t\t_property_string(&prop_str, NULL, ZSTR_VAL(prop_name), ZSTR_VAL(sub_indent));\n+\t\t\t\t\t\t_property_string(&prop_str, NULL, ZSTR_VAL(key), ZSTR_VAL(sub_indent));\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t} ZEND_HASH_FOREACH_END();\n", "result": true}