{"patch": "diff --git a/ext/reflection/php_reflection.c b/ext/reflection/php_reflection.c\nindex f24b00a2857..a7d19793353 100644\n--- a/ext/reflection/php_reflection.c\n+++ b/ext/reflection/php_reflection.c\n@@ -476,16 +476,19 @@ static void _class_string(smart_str *str, zend_class_entry *ce, zval *obj, char\n \t\tsmart_str prop_str = {0};\n \n \t\tcount = 0;\n-\t\tif (properties && zend_hash_num_elements(properties)) {\n-\t\t\tZEND_HASH_MAP_FOREACH_STR_KEY(properties, prop_name) {\n-\t\t\t\tif (prop_name && ZSTR_LEN(prop_name) && ZSTR_VAL(prop_name)[0]) { /* skip all private and protected properties */\n-\t\t\t\t\tif (!zend_hash_exists(&ce->properties_info, prop_name)) {\n-\t\t\t\t\t\tcount++;\n-\t\t\t\t\t\t_property_string(&prop_str, NULL, ZSTR_VAL(prop_name), ZSTR_VAL(sub_indent));\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t} ZEND_HASH_FOREACH_END();\n-\t\t}\n+        if (properties && zend_hash_num_elements(properties)) {\n+            zend_ulong prop_index;\n+            zval *prop_val;\n+            ZEND_HASH_FOREACH_KEY_VAL(properties, prop_index, prop_name, prop_val) {\n+                if (prop_name && ZSTR_LEN(prop_name) && ZSTR_VAL(prop_name)[0]) { /* string key */\n+                    if (!zend_hash_exists(&ce->properties_info, prop_name)) {\n+                        count++;\n+                        _property_string(&prop_str, NULL, ZSTR_VAL(prop_name), ZSTR_VAL(sub_indent));\n+                    }\n+                }\n+                /* skip integer keys (prop_name == NULL) */\n+            } ZEND_HASH_FOREACH_END();\n+        }\n \n \t\tsmart_str_append_printf(str, \"\\n%s  - Dynamic properties [%d] {\\n\", indent, count);\n \t\tsmart_str_append_smart_str(str, &prop_str);\n", "result": true}