{"patch": "diff --git a/ext/spl/spl_observer.c b/ext/spl/spl_observer.c\nindex 21b19cffa38..7d359b9fe5e 100644\n--- a/ext/spl/spl_observer.c\n+++ b/ext/spl/spl_observer.c\n@@ -737,6 +737,7 @@ PHP_METHOD(SplObjectStorage, setInfo)\n {\n \tspl_SplObjectStorageElement *element;\n \tspl_SplObjectStorage *intern = Z_SPLOBJSTORAGE_P(ZEND_THIS);\n+\tzval old_inf;\n \tzval *inf;\n \n \tif (zend_parse_parameters(ZEND_NUM_ARGS(), \"z\", &inf) == FAILURE) {\n@@ -746,8 +747,11 @@ PHP_METHOD(SplObjectStorage, setInfo)\n \tif ((element = zend_hash_get_current_data_ptr_ex(&intern->storage, &intern->pos)) == NULL) {\n \t\tRETURN_NULL();\n \t}\n-\tzval_ptr_dtor(&element->inf);\n+\t/* Save old value and replace with new one before destroying old */\n+\tZVAL_COPY_VALUE(&old_inf, &element->inf);\n \tZVAL_COPY(&element->inf, inf);\n+\t/* Now destroy the old value */\n+\tzval_ptr_dtor(&old_inf);\n } /* }}} */\n \n /* {{{ Moves position forward */\n", "result": true}