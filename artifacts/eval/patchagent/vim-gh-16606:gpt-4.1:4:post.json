{"patch": "diff --git a/src/message.c b/src/message.c\nindex 24984123b..a2f62e2c7 100644\n--- a/src/message.c\n+++ b/src/message.c\n@@ -555,20 +555,22 @@ msg_source(int attr)\n \tmsg_attr((char *)p, attr);\n \tvim_free(p);\n     }\n-    p = get_emsg_lnum();\n-    if (p != NULL)\n-    {\n-\tmsg_attr((char *)p, HL_ATTR(HLF_N));\n-\tvim_free(p);\n-\tlast_sourcing_lnum = SOURCING_LNUM;  // only once for each line\n-    }\n-\n-    // remember the last sourcing name printed, also when it's empty\n-    if (SOURCING_NAME == NULL || other_sourcing_name())\n-    {\n-\tVIM_CLEAR(last_sourcing_name);\n-\tif (SOURCING_NAME != NULL)\n-\t    last_sourcing_name = vim_strsave(SOURCING_NAME);\n+    if (HAVE_SOURCING_INFO) {\n+        p = get_emsg_lnum();\n+        if (p != NULL)\n+        {\n+            msg_attr((char *)p, HL_ATTR(HLF_N));\n+            vim_free(p);\n+            last_sourcing_lnum = SOURCING_LNUM;  // only once for each line\n+        }\n+\n+        // remember the last sourcing name printed, also when it's empty\n+        if (SOURCING_NAME == NULL || other_sourcing_name())\n+        {\n+            VIM_CLEAR(last_sourcing_name);\n+            if (SOURCING_NAME != NULL)\n+                last_sourcing_name = vim_strsave(SOURCING_NAME);\n+        }\n     }\n     --no_wait_return;\n \n", "result": true}