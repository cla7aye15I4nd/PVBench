{"patch": "diff --git a/parser.c b/parser.c\nindex 4464e2e8..7839a9d3 100644\n--- a/parser.c\n+++ b/parser.c\n@@ -3527,7 +3527,9 @@ xmlParseNCNameComplex(xmlParserCtxtPtr ctxt) {\n         xmlFatalErr(ctxt, XML_ERR_NAME_TOO_LONG, \"NCName\");\n         return(NULL);\n     }\n-    return(xmlDictLookup(ctxt->dict, end - len, len));\n+    if ((*ctxt->input->cur == '\\n') && (ctxt->input->cur[-1] == '\\r'))\n+        return(xmlDictLookup(ctxt->dict, ctxt->input->cur - (len + 1), len));\n+    return(xmlDictLookup(ctxt->dict, ctxt->input->cur - len, len));\n }\n \n /**\n", "result": true}