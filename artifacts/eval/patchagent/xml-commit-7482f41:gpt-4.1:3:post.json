{"patch": "diff --git a/xpath.c b/xpath.c\nindex a60a6237..1c3fa1af 100644\n--- a/xpath.c\n+++ b/xpath.c\n@@ -3104,9 +3104,9 @@ xmlXPathFormatNumber(double number, char buffer[], int buffersize)\n \tif (xmlXPathIsNaN(number)) {\n \t    if (buffersize > (int)sizeof(\"NaN\"))\n \t\tsnprintf(buffer, buffersize, \"NaN\");\n-\t} else if (number == 0 && xmlXPathGetSign(number) != 0) {\n-\t    snprintf(buffer, buffersize, \"0\");\n-\t} else if (number == ((int) number)) {\n+    } else if (number == 0 && xmlXPathGetSign(number) != 0) {\n+        snprintf(buffer, buffersize, \"0\");\n+    } else if (number >= INT_MIN && number <= INT_MAX && number == ((int) number)) {\n \t    char work[30];\n \t    char *ptr, *cur;\n \t    int value = (int) number;\n", "result": true}