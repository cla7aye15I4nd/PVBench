{"patch": "diff --git a/lib/Parser/JSParserImpl.cpp b/lib/Parser/JSParserImpl.cpp\nindex 0589efb3a..5d4b16daf 100644\n--- a/lib/Parser/JSParserImpl.cpp\n+++ b/lib/Parser/JSParserImpl.cpp\n@@ -4217,7 +4217,7 @@ Optional<ESTree::Node *> JSParserImpl::parseConditionalExpression(\n       consequent = *optConsequent;\n     } else {\n       // Parsing with typed arrow functions failed because we don't have a :,\n-      // so reset and try again.\n+              // so reset and try again.\n       savePoint.restore();\n     }\n   }\n@@ -4237,8 +4237,7 @@ Optional<ESTree::Node *> JSParserImpl::parseConditionalExpression(\n   }\n \n   if (!eat(\n-          TokenKind::colon,\n-          JSLexer::AllowRegExp,\n+          TokenKind::colon,          JSLexer::AllowRegExp,\n           \"in conditional expression after '... ? ...'\",\n           \"location of '?'\",\n           questionRange.Start))\n@@ -5615,7 +5614,7 @@ Optional<ESTree::Node *> JSParserImpl::parseAssignmentExpression(\n                 typeParams->getSourceRange(),\n                 \"type parameters must be used in an arrow function expression\");\n             return None;\n-          }\n+                  }\n         } else {\n           // Invalid type params, and also invalid JSX. Bail.\n           savePoint.restore();\n@@ -5625,6 +5624,7 @@ Optional<ESTree::Node *> JSParserImpl::parseAssignmentExpression(\n #endif\n \n     state.leftStartLoc = tok_->getStartLoc();\n+    CHECK_RECURSION;\n     state.optLeftExpr = parseConditionalExpression(param, coverTypedParameters);\n     if (!state.optLeftExpr)\n       return None;\n@@ -5635,8 +5635,7 @@ Optional<ESTree::Node *> JSParserImpl::parseAssignmentExpression(\n     if (context_.getParseFlow()) {\n       if (allowTypedArrowFunction == AllowTypedArrowFunction::Yes &&\n           ((*state.optLeftExpr)->getParens() != 0 ||\n-           isa<ESTree::CoverEmptyArgsNode>(*state.optLeftExpr)) &&\n-          check(TokenKind::colon)) {\n+           isa<ESTree::CoverEmptyArgsNode>(*state.optLeftExpr)) &&          check(TokenKind::colon)) {\n         JSLexer::SavePoint savePoint{&lexer_};\n         // Defer our decision on whether to show or suppress messages for this\n         // next section.\n", "result": true}