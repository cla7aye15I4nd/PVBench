{"patch": "diff --git a/clang/lib/CodeGen/CGExprAgg.cpp b/clang/lib/CodeGen/CGExprAgg.cpp\nindex 87b2a73fb0c0..8b9f1a351e92 100644\n--- a/clang/lib/CodeGen/CGExprAgg.cpp\n+++ b/clang/lib/CodeGen/CGExprAgg.cpp\n@@ -1663,7 +1663,7 @@ static bool isSimpleZero(const Expr *E, CodeGenFunction &CGF) {\n \n   // 0\n   if (const IntegerLiteral *IL = dyn_cast<IntegerLiteral>(E))\n-    return IL->getValue() == 0;\n+return IL->getValue() == 0;\n   // +0.0\n   if (const FloatingLiteral *FL = dyn_cast<FloatingLiteral>(E))\n     return FL->getValue().isPosZero();\n@@ -1671,11 +1671,16 @@ static bool isSimpleZero(const Expr *E, CodeGenFunction &CGF) {\n   if ((isa<ImplicitValueInitExpr>(E) || isa<CXXScalarValueInitExpr>(E)) &&\n       CGF.getTypes().isZeroInitializable(E->getType()))\n     return true;\n-  // (int*)0 - Null pointer expressions.\n-  if (const CastExpr *ICE = dyn_cast<CastExpr>(E))\n+// FIXME: Crash CWE-754: Improper Check for Unusual or Exceptional Conditions\n+   // (int*)0 - Null pointer expressions.\n+  if (const CastExpr *ICE = dyn_cast<CastExpr>(E)) {\n+    QualType CTy = E->getType();\n+    if (!CTy->isPointerType() && !CTy->isBlockPointerType())\n+      return false;\n     return ICE->getCastKind() == CK_NullToPointer &&\n-           CGF.getTypes().isPointerZeroInitializable(E->getType()) &&\n+           CGF.getTypes().isPointerZeroInitializable(CTy) &&\n            !E->HasSideEffects(CGF.getContext());\n+  }\n   // '\\0'\n   if (const CharacterLiteral *CL = dyn_cast<CharacterLiteral>(E))\n     return CL->getValue() == 0;\n@@ -1684,7 +1689,6 @@ static bool isSimpleZero(const Expr *E, CodeGenFunction &CGF) {\n   return false;\n }\n \n-\n void\n AggExprEmitter::EmitInitializationToLValue(Expr *E, LValue LV) {\n   QualType type = LV.getType();\n", "result": true}