[{"patch": "diff --git a/clang/lib/Sema/SemaOpenMP.cpp b/clang/lib/Sema/SemaOpenMP.cpp\nindex 15d568fcb9cc..72aa14d50c75 100644\n--- a/clang/lib/Sema/SemaOpenMP.cpp\n+++ b/clang/lib/Sema/SemaOpenMP.cpp\n@@ -2998,12 +2998,20 @@ static bool FinishOpenMPLinearClause(OMPLinearClause &Clause, DeclRefExpr *IV,\n static bool finishLinearClauses(Sema &SemaRef, ArrayRef<OMPClause *> Clauses,\n                                 OMPLoopBasedDirective::HelperExprs &B,\n                                 DSAStackTy *Stack) {\n-  assert((SemaRef.CurContext->isDependentContext() || B.builtAll()) &&\n-         \"loop exprs were not built\");\n-\n+  // Handle dependent context and error states before asserting\n   if (SemaRef.CurContext->isDependentContext())\n     return false;\n \n+  // Replace assertion with graceful error handling\n+  if (!B.builtAll()) {\n+    // If we have errors, return false instead of asserting\n+    if (SemaRef.getDiagnostics().hasErrorOccurred())\n+      return false;\n+    // If no errors but expressions not built, this is unexpected\n+    // but handle gracefully by returning false\n+    return false;\n+  }\n+\n   // Finalize the clauses that need pre-built expressions for CodeGen.\n   for (OMPClause *C : Clauses) {\n     auto *LC = dyn_cast<OMPLinearClause>(C);\n"}]