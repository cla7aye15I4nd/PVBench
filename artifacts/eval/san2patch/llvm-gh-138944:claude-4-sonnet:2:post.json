{"patch": "diff --git a/llvm/lib/CodeGen/SelectionDAG/SelectionDAG.cpp b/llvm/lib/CodeGen/SelectionDAG/SelectionDAG.cpp\nindex bbf1b0fd590e..c54b9b9b7b2e 100644\n--- a/llvm/lib/CodeGen/SelectionDAG/SelectionDAG.cpp\n+++ b/llvm/lib/CodeGen/SelectionDAG/SelectionDAG.cpp\n@@ -10392,6 +10392,13 @@ SDValue SelectionDAG::getNode(unsigned Opcode, const SDLoc &DL, EVT VT,\n SDValue SelectionDAG::getNode(unsigned Opcode, const SDLoc &DL, EVT VT,\n                               ArrayRef<SDValue> Ops) {\n   SDNodeFlags Flags;\n+// FIXME: Crash CWE-825: Expired Pointer Dereference\n+  // Validate operands before proceeding to prevent expired pointer dereference\n+  for (const SDValue &Op : Ops) {\n+    if (Op.getNode() && Op.getOpcode() == ISD::DELETED_NODE) {\n+      return SDValue();\n+    }\n+  }\n   if (Inserter)\n     Flags = Inserter->getFlags();\n   return getNode(Opcode, DL, VT, Ops, Flags);\n@@ -10404,8 +10411,7 @@ SDValue SelectionDAG::getNode(unsigned Opcode, const SDLoc &DL, EVT VT,\n   case 0: return getNode(Opcode, DL, VT);\n   case 1: return getNode(Opcode, DL, VT, Ops[0], Flags);\n   case 2: return getNode(Opcode, DL, VT, Ops[0], Ops[1], Flags);\n-  case 3: return getNode(Opcode, DL, VT, Ops[0], Ops[1], Ops[2], Flags);\n-  default: break;\n+  case 3: return getNode(Opcode, DL, VT, Ops[0], Ops[1], Ops[2], Flags);  default: break;\n   }\n \n #ifndef NDEBUG\n", "result": true}