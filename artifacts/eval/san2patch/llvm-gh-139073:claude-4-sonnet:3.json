[{"patch": "diff --git a/clang/lib/Sema/SemaOpenMP.cpp b/clang/lib/Sema/SemaOpenMP.cpp\nindex 835dba22a858..2be9d1bdf5b3 100644\n--- a/clang/lib/Sema/SemaOpenMP.cpp\n+++ b/clang/lib/Sema/SemaOpenMP.cpp\n@@ -14348,7 +14348,35 @@ StmtResult SemaOpenMP::ActOnOpenMPTileDirective(ArrayRef<OMPClause *> Clauses,\n     //   (TS <= 0) ? 1 : TS\n     // \\endcode\n     QualType DimTy = DimTileSizeExpr->getType();\n+    \n+    // Validate that the type is complete and has a known size to prevent crashes\n+    if (DimTy.isNull() || DimTy->isIncompleteType() || !DimTy->isIntegerType()) {\n+        // Return a safe default value for invalid types\n+        IntegerLiteral *One = IntegerLiteral::Create(\n+            Context, llvm::APInt(Context.getIntWidth(Context.IntTy), 1), \n+            Context.IntTy, {});\n+        return One;\n+    }\n+    \n+    // Use getTypeSizeInChars for safer type size retrieval\n+    CharUnits TypeSize = Context.getTypeSizeInChars(DimTy);\n+    if (TypeSize.isZero()) {\n+        // If type size is 0, use a safe default\n+        IntegerLiteral *One = IntegerLiteral::Create(\n+            Context, llvm::APInt(Context.getIntWidth(Context.IntTy), 1), \n+            Context.IntTy, {});\n+        return One;\n+    }\n+    \n     uint64_t DimWidth = Context.getTypeSize(DimTy);\n+    if (DimWidth == 0) {\n+        // Additional safety check for zero width\n+        IntegerLiteral *One = IntegerLiteral::Create(\n+            Context, llvm::APInt(Context.getIntWidth(Context.IntTy), 1), \n+            Context.IntTy, {});\n+        return One;\n+    }\n+    \n     IntegerLiteral *Zero = IntegerLiteral::Create(\n         Context, llvm::APInt::getZero(DimWidth), DimTy, {});\n     IntegerLiteral *One =\n"}]