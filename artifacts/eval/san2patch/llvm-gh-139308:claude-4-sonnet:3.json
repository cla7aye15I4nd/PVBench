[{"patch": "diff --git a/llvm/lib/Analysis/MemorySSAUpdater.cpp b/llvm/lib/Analysis/MemorySSAUpdater.cpp\nindex aa9f0b6e100c..69debd266283 100644\n--- a/llvm/lib/Analysis/MemorySSAUpdater.cpp\n+++ b/llvm/lib/Analysis/MemorySSAUpdater.cpp\n@@ -567,7 +567,12 @@ static MemoryAccess *onlySingleValue(MemoryPhi *MP) {\n \n static MemoryAccess *getNewDefiningAccessForClone(\n     MemoryAccess *MA, const ValueToValueMapTy &VMap, PhiToDefMap &MPhiMap,\n-    MemorySSA *MSSA, function_ref<bool(BasicBlock *BB)> IsInClonedRegion) {\n+    MemorySSA *MSSA, function_ref<bool(BasicBlock *BB)> IsInClonedRegion,\n+    unsigned RecursionDepth = 0) {\n+  // Prevent excessive recursion by limiting depth\n+  if (RecursionDepth > 1000)\n+    return MA;\n+    \n   MemoryAccess *InsnDefining = MA;\n   if (MemoryDef *DefMUD = dyn_cast<MemoryDef>(InsnDefining)) {\n     if (MSSA->isLiveOnEntryDef(DefMUD))\n@@ -581,10 +586,11 @@ static MemoryAccess *getNewDefiningAccessForClone(\n \n     auto *NewDefMUDI = cast_or_null<Instruction>(VMap.lookup(DefMUDI));\n     InsnDefining = NewDefMUDI ? MSSA->getMemoryAccess(NewDefMUDI) : nullptr;\n-    if (!InsnDefining || isa<MemoryUse>(InsnDefining)) {\n+// FIXME: Crash CWE-834: Excessive Iteration\n+     if (!InsnDefining || isa<MemoryUse>(InsnDefining)) {\n       // The clone was simplified, it's no longer a MemoryDef, look up.\n       InsnDefining = getNewDefiningAccessForClone(\n-          DefMUD->getDefiningAccess(), VMap, MPhiMap, MSSA, IsInClonedRegion);\n+          DefMUD->getDefiningAccess(), VMap, MPhiMap, MSSA, IsInClonedRegion, RecursionDepth + 1);\n     }\n   } else {\n     MemoryPhi *DefPhi = cast<MemoryPhi>(InsnDefining);\n"}]