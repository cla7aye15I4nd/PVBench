[{"patch": "diff --git a/llvm/lib/Analysis/MemorySSAUpdater.cpp b/llvm/lib/Analysis/MemorySSAUpdater.cpp\nindex aa9f0b6e100c..d7af981b8bb8 100644\n--- a/llvm/lib/Analysis/MemorySSAUpdater.cpp\n+++ b/llvm/lib/Analysis/MemorySSAUpdater.cpp\n@@ -567,7 +567,13 @@ static MemoryAccess *onlySingleValue(MemoryPhi *MP) {\n \n static MemoryAccess *getNewDefiningAccessForClone(\n     MemoryAccess *MA, const ValueToValueMapTy &VMap, PhiToDefMap &MPhiMap,\n-    MemorySSA *MSSA, function_ref<bool(BasicBlock *BB)> IsInClonedRegion) {\n+    MemorySSA *MSSA, function_ref<bool(BasicBlock *BB)> IsInClonedRegion, int RecursionDepth = 0) {\n+  const int MAX_RECURSION_DEPTH = 1000;\n+  if (RecursionDepth >= MAX_RECURSION_DEPTH) {\n+    // Return LiveOnEntry to prevent infinite recursion\n+    return MSSA->getLiveOnEntryDef();\n+  }\n+  \n   MemoryAccess *InsnDefining = MA;\n   if (MemoryDef *DefMUD = dyn_cast<MemoryDef>(InsnDefining)) {\n     if (MSSA->isLiveOnEntryDef(DefMUD))\n@@ -581,10 +587,11 @@ static MemoryAccess *getNewDefiningAccessForClone(\n \n     auto *NewDefMUDI = cast_or_null<Instruction>(VMap.lookup(DefMUDI));\n     InsnDefining = NewDefMUDI ? MSSA->getMemoryAccess(NewDefMUDI) : nullptr;\n-    if (!InsnDefining || isa<MemoryUse>(InsnDefining)) {\n+// FIXME: Crash CWE-834: Excessive Iteration\n+     if (!InsnDefining || isa<MemoryUse>(InsnDefining)) {\n       // The clone was simplified, it's no longer a MemoryDef, look up.\n       InsnDefining = getNewDefiningAccessForClone(\n-          DefMUD->getDefiningAccess(), VMap, MPhiMap, MSSA, IsInClonedRegion);\n+          DefMUD->getDefiningAccess(), VMap, MPhiMap, MSSA, IsInClonedRegion, RecursionDepth + 1);\n     }\n   } else {\n     MemoryPhi *DefPhi = cast<MemoryPhi>(InsnDefining);\n"}]