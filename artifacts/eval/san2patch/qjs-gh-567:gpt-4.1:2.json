[{"patch": "diff --git a/quickjs.c b/quickjs.c\nindex 7d80009..6457a92 100644\n--- a/quickjs.c\n+++ b/quickjs.c\n@@ -26774,13 +26774,18 @@ static JSValue js_build_module_ns(JSContext *ctx, JSModuleDef *m)\n         case EXPORTED_NAME_NORMAL:\n             {\n                 JSVarRef *var_ref = en->u.var_ref;\n-                pr = add_property(ctx, p, en->export_name,\n-                                  JS_PROP_ENUMERABLE | JS_PROP_WRITABLE |\n-                                  JS_PROP_VARREF);\n-                if (!pr)\n+                if (var_ref) {\n+                    pr = add_property(ctx, p, en->export_name,\n+                                      JS_PROP_ENUMERABLE | JS_PROP_WRITABLE |\n+                                      JS_PROP_VARREF);\n+// FIXME: Crash CWE-476: NULL Pointer Dereference\n+                    if (!pr)\n+                        goto fail;\n+                    var_ref->header.ref_count++;\n+                    pr->u.var_ref = var_ref;\n+                } else {\n                     goto fail;\n-                var_ref->header.ref_count++;\n-                pr->u.var_ref = var_ref;\n+                }\n             }\n             break;\n         case EXPORTED_NAME_NS:\n"}]