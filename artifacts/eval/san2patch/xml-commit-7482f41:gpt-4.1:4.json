[{"patch": "diff --git a/xpath.c b/xpath.c\nindex a60a6237..6d9cf7af 100644\n--- a/xpath.c\n+++ b/xpath.c\n@@ -5712,8 +5712,12 @@ xmlXPathCastNumberToString (double val) {\n \t    ret = xmlStrdup((const xmlChar *) \"0\");\n \t} else {\n \t    /* could be improved */\n-\t    char buf[100];\n-\t    xmlXPathFormatNumber(val, buf, 99);\n+// FIXME: Crash CWE-681: Incorrect Conversion between Numeric Types\n+  \t    char buf[100];\n+            double safe_val = val;\n+            if (val > (double)INT_MAX) safe_val = (double)INT_MAX;\n+            else if (val < (double)INT_MIN) safe_val = (double)INT_MIN;\n+\t    xmlXPathFormatNumber(safe_val, buf, 99);\n \t    buf[99] = 0;\n \t    ret = xmlStrdup((const xmlChar *) buf);\n \t}\n"}]