{"patch": "diff --git a/xmlschemas.c b/xmlschemas.c\nindex 6a353858..e9d52367 100644\n--- a/xmlschemas.c\n+++ b/xmlschemas.c\n@@ -18657,17 +18657,19 @@ xmlSchemaFixupComplexType(xmlSchemaParserCtxtPtr pctxt,\n \t\t    * Create a duplicate of the base type's particle\n \t\t    * and assign its \"term\" to it.\n \t\t    */\n-\t\t    particle->children->children =\n-\t\t\t(xmlSchemaTreeItemPtr) xmlSchemaAddParticle(pctxt,\n-\t\t\ttype->node,\n-\t\t\t((xmlSchemaParticlePtr) baseType->subtypes)->minOccurs,\n-\t\t\t((xmlSchemaParticlePtr) baseType->subtypes)->maxOccurs);\n-\t\t    if (particle->children->children == NULL)\n-\t\t\tgoto exit_failure;\n-\t\t    particle = (xmlSchemaParticlePtr)\n-\t\t\tparticle->children->children;\n-\t\t    particle->children =\n-\t\t\t((xmlSchemaParticlePtr) baseType->subtypes)->children;\n+\t\t    if (baseType->subtypes != NULL) {\n+\t\t        particle->children->children =\n+\t\t\t    (xmlSchemaTreeItemPtr) xmlSchemaAddParticle(pctxt,\n+\t\t\t    type->node,\n+\t\t\t    ((xmlSchemaParticlePtr) baseType->subtypes)->minOccurs,\n+\t\t\t    ((xmlSchemaParticlePtr) baseType->subtypes)->maxOccurs);\n+\t\t        if (particle->children->children == NULL)\n+\t\t\t    goto exit_failure;\n+\t\t        particle = (xmlSchemaParticlePtr)\n+\t\t\t    particle->children->children;\n+\t\t        particle->children =\n+\t\t\t    ((xmlSchemaParticlePtr) baseType->subtypes)->children;\n+\t\t    }\n \t\t    /*\n \t\t    * SPEC \"followed by the `effective content`.\"\n \t\t    */\n@@ -18692,8 +18694,10 @@ xmlSchemaFixupComplexType(xmlSchemaParserCtxtPtr pctxt,\n \t\t    * neither the regex compilation of the content model,\n \t\t    * nor to the complex type constraints.\n \t\t    */\n-\t\t    particle->children->children =\n-\t\t\t(xmlSchemaTreeItemPtr) baseType->subtypes;\n+\t\t    if (baseType->subtypes != NULL) {\n+\t\t        particle->children->children =\n+\t\t\t    (xmlSchemaTreeItemPtr) baseType->subtypes;\n+\t\t    }\n \t\t}\n \t    }\n \t}\n", "result": true}