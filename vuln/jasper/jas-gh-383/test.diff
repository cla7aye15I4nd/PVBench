diff --git a/data/test/bad/383.heic b/data/test/bad/383.heic
new file mode 100644
index 0000000000000000000000000000000000000000..f2f587956ed96f5352d6f30d20b7771e4bd35efa
GIT binary patch
literal 7414
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

literal 0
HcmV?d00001

diff --git a/test/bin/run_test_1 b/test/bin/run_test_1
index 24cb987..eb8172c 100755
--- a/test/bin/run_test_1
+++ b/test/bin/run_test_1
@@ -46,10 +46,15 @@ has_jpg="$(is_supported_format jpg)" || \
   panic "cannot determine if JPG is supported format"
 has_mif="$(is_supported_format mif)" || \
   panic "cannot determine if MIF is supported format"
+has_heic="$(is_supported_format heic)" || \
+  panic "cannot determine if HEIF is supported format"
 
 if [ "$internal_testing_mode" -ne 0 -a "$has_mif" -eq 0 ]; then
 	echo "warning: MIF support is missing"
 fi
+if [ "$internal_testing_mode" -ne 0 -a "$has_heic" -eq 0 ]; then
+	echo "warning: HEIF support is missing"
+fi
 if [ "$has_jpg" -eq 0 ]; then
 	echo "warning: JPEG support is missing"
 fi
@@ -70,6 +75,11 @@ for file in "$data_dir"/test/good/*.*; do
 			skip=1
 		fi
 		;;
+	*.heic)
+		if [ "$has_heic" -eq 0 ]; then
+			skip=1
+		fi
+		;;
 	*.txt)
 		skip=1
 		;;
