<unknown>:0: error: integer type bit width (32) doesn't match value bit width (64)
mlir-opt: /tmp/llvm-gh-135289/build/mlir/include/mlir/IR/StorageUniquerSupport.h:179: static ConcreteT mlir::detail::StorageUserBase<ConcreteT, BaseT, StorageT, UniquerT, Traits>::get(mlir::MLIRContext*, Args&& ...) [with Args = {mlir::Type&, const llvm::APInt&}; ConcreteT = mlir::IntegerAttr; BaseT = mlir::Attribute; StorageT = mlir::detail::IntegerAttrStorage; UniquerT = mlir::detail::AttributeUniquer; Traits = {mlir::TypedAttr::Trait}]: Assertion `succeeded( ConcreteT::verifyInvariants(getDefaultDiagnosticEmitFn(ctx), args...))' failed.
PLEASE submit a bug report to https://github.com/llvm/llvm-project/issues/ and include the crash backtrace.
Stack dump:
0.	Program arguments: ./build/bin/mlir-opt -canonicalize /testcases/llvm-gh-135289/input/poc.mlir
 #0 0x000055555789f766 llvm::sys::PrintStackTrace(llvm::raw_ostream&, int) /tmp/llvm-gh-135289/build/llvm/lib/Support/Unix/Signals.inc:804:22
 #1 0x000055555789fb7d PrintStackTraceSignalHandler(void*) /tmp/llvm-gh-135289/build/llvm/lib/Support/Unix/Signals.inc:880:1
 #2 0x000055555789cf2b llvm::sys::RunSignalHandlers() /tmp/llvm-gh-135289/build/llvm/lib/Support/Signals.cpp:105:20
 #3 0x000055555789efe8 SignalHandler(int, siginfo_t*, void*) /tmp/llvm-gh-135289/build/llvm/lib/Support/Unix/Signals.inc:418:13
 #4 0x00007ffff7a39330 (/lib/x86_64-linux-gnu/libc.so.6+0x45330)
 #5 0x00007ffff7a92b2c pthread_kill (/lib/x86_64-linux-gnu/libc.so.6+0x9eb2c)
 #6 0x00007ffff7a3927e raise (/lib/x86_64-linux-gnu/libc.so.6+0x4527e)
 #7 0x00007ffff7a1c8ff abort (/lib/x86_64-linux-gnu/libc.so.6+0x288ff)
 #8 0x00007ffff7a1c81b (/lib/x86_64-linux-gnu/libc.so.6+0x2881b)
 #9 0x00007ffff7a2f517 (/lib/x86_64-linux-gnu/libc.so.6+0x3b517)
#10 0x000055555d6910c0 mlir::IntegerAttr mlir::detail::StorageUserBase<mlir::IntegerAttr, mlir::Attribute, mlir::detail::IntegerAttrStorage, mlir::detail::AttributeUniquer, mlir::TypedAttr::Trait>::get<mlir::Type&, llvm::APInt const&>(mlir::MLIRContext*, mlir::Type&, llvm::APInt const&) /tmp/llvm-gh-135289/build/mlir/include/mlir/IR/StorageUniquerSupport.h:179:5
#11 0x000055555d67ca74 mlir::IntegerAttr::get(mlir::Type, llvm::APInt const&) /tmp/llvm-gh-135289/build/build/tools/mlir/include/mlir/IR/BuiltinAttributes.cpp.inc:371:50
#12 0x0000555557ccc03a applyToIntegerAttrs(mlir::PatternRewriter&, mlir::Value, mlir::Attribute, mlir::Attribute, llvm::function_ref<llvm::APInt (llvm::APInt const&, llvm::APInt const&)>) /tmp/llvm-gh-135289/build/mlir/lib/Dialect/Arith/IR/ArithOps.cpp:49:26
#13 0x0000555557ccc1ec mulIntegerAttrs(mlir::PatternRewriter&, mlir::Value, mlir::Attribute, mlir::Attribute) /tmp/llvm-gh-135289/build/mlir/lib/Dialect/Arith/IR/ArithOps.cpp:65:1
#14 0x0000555557cd76f9 (anonymous namespace)::MulIMulIConstant::matchAndRewrite(mlir::Operation*, mlir::PatternRewriter&) const /tmp/llvm-gh-135289/build/build/tools/mlir/lib/Dialect/Arith/IR/ArithCanonicalization.inc:1632:39
#15 0x0000555561d5e669 mlir::PatternApplicator::matchAndRewrite(mlir::Operation*, mlir::PatternRewriter&, llvm::function_ref<bool (mlir::Pattern const&)>, llvm::function_ref<void (mlir::Pattern const&)>, llvm::function_ref<llvm::LogicalResult (mlir::Pattern const&)>)::'lambda'()::operator()() const /tmp/llvm-gh-135289/build/mlir/lib/Rewrite/PatternApplicator.cpp:212:46
#16 0x0000555561d5f0c1 void llvm::function_ref<void ()>::callback_fn<mlir::PatternApplicator::matchAndRewrite(mlir::Operation*, mlir::PatternRewriter&, llvm::function_ref<bool (mlir::Pattern const&)>, llvm::function_ref<void (mlir::Pattern const&)>, llvm::function_ref<llvm::LogicalResult (mlir::Pattern const&)>)::'lambda'()>(long) /tmp/llvm-gh-135289/build/llvm/include/llvm/ADT/STLFunctionalExtras.h:47:40
#17 0x00005555578c2ad2 llvm::function_ref<void ()>::operator()() const /tmp/llvm-gh-135289/build/llvm/include/llvm/ADT/STLFunctionalExtras.h:69:62
#18 0x0000555561d62979 void mlir::MLIRContext::executeAction<mlir::ApplyPatternAction, mlir::Pattern const&>(llvm::function_ref<void ()>, llvm::ArrayRef<mlir::IRUnit>, mlir::Pattern const&) /tmp/llvm-gh-135289/build/mlir/include/mlir/IR/MLIRContext.h:281:3
#19 0x0000555561d5eded mlir::PatternApplicator::matchAndRewrite(mlir::Operation*, mlir::PatternRewriter&, llvm::function_ref<bool (mlir::Pattern const&)>, llvm::function_ref<void (mlir::Pattern const&)>, llvm::function_ref<llvm::LogicalResult (mlir::Pattern const&)>) /tmp/llvm-gh-135289/build/mlir/lib/Rewrite/PatternApplicator.cpp:233:5
#20 0x000055555d58b8e3 (anonymous namespace)::GreedyPatternRewriteDriver::processWorklist() /tmp/llvm-gh-135289/build/mlir/lib/Transforms/Utils/GreedyPatternRewriteDriver.cpp:615:32
#21 0x000055555d58cad8 (anonymous namespace)::RegionPatternRewriteDriver::simplify(bool*) &&::'lambda'()::operator()() const /tmp/llvm-gh-135289/build/mlir/lib/Transforms/Utils/GreedyPatternRewriteDriver.cpp:874:28
#22 0x000055555d58ddb4 void llvm::function_ref<void ()>::callback_fn<(anonymous namespace)::RegionPatternRewriteDriver::simplify(bool*) &&::'lambda'()>(long) /tmp/llvm-gh-135289/build/llvm/include/llvm/ADT/STLFunctionalExtras.h:47:40
#23 0x00005555578c2ad2 llvm::function_ref<void ()>::operator()() const /tmp/llvm-gh-135289/build/llvm/include/llvm/ADT/STLFunctionalExtras.h:69:62
#24 0x000055555d58dafd void mlir::MLIRContext::executeAction<(anonymous namespace)::GreedyPatternRewriteIteration, long&>(llvm::function_ref<void ()>, llvm::ArrayRef<mlir::IRUnit>, long&) /tmp/llvm-gh-135289/build/mlir/include/mlir/IR/MLIRContext.h:281:3
#25 0x000055555d58cdce (anonymous namespace)::RegionPatternRewriteDriver::simplify(bool*) && /tmp/llvm-gh-135289/build/mlir/lib/Transforms/Utils/GreedyPatternRewriteDriver.cpp:887:3
#26 0x000055555d58cf88 mlir::applyPatternsGreedily(mlir::Region&, mlir::FrozenRewritePatternSet const&, mlir::GreedyRewriteConfig, bool*) /tmp/llvm-gh-135289/build/mlir/lib/Transforms/Utils/GreedyPatternRewriteDriver.cpp:919:55
#27 0x0000555557ad4d02 mlir::applyPatternsGreedily(mlir::Operation*, mlir::FrozenRewritePatternSet const&, mlir::GreedyRewriteConfig, bool*) /tmp/llvm-gh-135289/build/mlir/include/mlir/Transforms/GreedyPatternRewriteDriver.h:174:36
#28 0x000055555d4bc726 (anonymous namespace)::Canonicalizer::runOnOperation() /tmp/llvm-gh-135289/build/mlir/lib/Transforms/Canonicalizer.cpp:64:30
#29 0x000055555d461383 mlir::detail::OpToOpPassAdaptor::run(mlir::Pass*, mlir::Operation*, mlir::AnalysisManager, bool, unsigned int)::'lambda'()::operator()() const /tmp/llvm-gh-135289/build/mlir/lib/Pass/Pass.cpp:527:22
#30 0x000055555d4650e2 void llvm::function_ref<void ()>::callback_fn<mlir::detail::OpToOpPassAdaptor::run(mlir::Pass*, mlir::Operation*, mlir::AnalysisManager, bool, unsigned int)::'lambda'()>(long) /tmp/llvm-gh-135289/build/llvm/include/llvm/ADT/STLFunctionalExtras.h:47:40
#31 0x00005555578c2ad2 llvm::function_ref<void ()>::operator()() const /tmp/llvm-gh-135289/build/llvm/include/llvm/ADT/STLFunctionalExtras.h:69:62
#32 0x000055555d46d73b void mlir::MLIRContext::executeAction<mlir::PassExecutionAction, mlir::Pass&>(llvm::function_ref<void ()>, llvm::ArrayRef<mlir::IRUnit>, mlir::Pass&) /tmp/llvm-gh-135289/build/mlir/include/mlir/IR/MLIRContext.h:281:3
#33 0x000055555d4617ae mlir::detail::OpToOpPassAdaptor::run(mlir::Pass*, mlir::Operation*, mlir::AnalysisManager, bool, unsigned int) /tmp/llvm-gh-135289/build/mlir/lib/Pass/Pass.cpp:532:23
#34 0x000055555d461a8c mlir::detail::OpToOpPassAdaptor::runPipeline(mlir::OpPassManager&, mlir::Operation*, mlir::AnalysisManager, bool, unsigned int, mlir::PassInstrumentor*, mlir::PassInstrumentation::PipelineParentInfo const*) /tmp/llvm-gh-135289/build/mlir/lib/Pass/Pass.cpp:592:15
#35 0x000055555d463994 mlir::PassManager::runPasses(mlir::Operation*, mlir::AnalysisManager) /tmp/llvm-gh-135289/build/mlir/lib/Pass/Pass.cpp:905:40
#36 0x000055555d4637eb mlir::PassManager::run(mlir::Operation*) /tmp/llvm-gh-135289/build/mlir/lib/Pass/Pass.cpp:885:69
#37 0x000055555d44ecf6 performActions(llvm::raw_ostream&, std::shared_ptr<llvm::SourceMgr> const&, mlir::MLIRContext*, mlir::MlirOptMainConfig const&) /tmp/llvm-gh-135289/build/mlir/lib/Tools/mlir-opt/MlirOptMain.cpp:484:13
#38 0x000055555d44f41d processBuffer(llvm::raw_ostream&, std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, mlir::MlirOptMainConfig const&, mlir::DialectRegistry&, llvm::ThreadPoolInterface*) /tmp/llvm-gh-135289/build/mlir/lib/Tools/mlir-opt/MlirOptMain.cpp:552:26
#39 0x000055555d44f9f3 mlir::MlirOptMain(llvm::raw_ostream&, std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, mlir::DialectRegistry&, mlir::MlirOptMainConfig const&)::'lambda'(std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, llvm::raw_ostream&)::operator()(std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, llvm::raw_ostream&) const /tmp/llvm-gh-135289/build/mlir/lib/Tools/mlir-opt/MlirOptMain.cpp:636:25
#40 0x000055555d450be3 llvm::LogicalResult llvm::function_ref<llvm::LogicalResult (std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, llvm::raw_ostream&)>::callback_fn<mlir::MlirOptMain(llvm::raw_ostream&, std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, mlir::DialectRegistry&, mlir::MlirOptMainConfig const&)::'lambda'(std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, llvm::raw_ostream&)>(long, std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, llvm::raw_ostream&) /tmp/llvm-gh-135289/build/llvm/include/llvm/ADT/STLFunctionalExtras.h:46:52
#41 0x000055555d5f2f9d llvm::function_ref<llvm::LogicalResult (std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, llvm::raw_ostream&)>::operator()(std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, llvm::raw_ostream&) const /tmp/llvm-gh-135289/build/llvm/include/llvm/ADT/STLFunctionalExtras.h:69:12
#42 0x000055555d5f27f2 mlir::splitAndProcessBuffer(std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, llvm::function_ref<llvm::LogicalResult (std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, llvm::raw_ostream&)>, llvm::raw_ostream&, llvm::StringRef, llvm::StringRef) /tmp/llvm-gh-135289/build/mlir/lib/Support/ToolUtilities.cpp:27:30
#43 0x000055555d44fb8c mlir::MlirOptMain(llvm::raw_ostream&, std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, mlir::DialectRegistry&, mlir::MlirOptMainConfig const&) /tmp/llvm-gh-135289/build/mlir/lib/Tools/mlir-opt/MlirOptMain.cpp:639:31
#44 0x000055555d44fe85 mlir::MlirOptMain(int, char**, llvm::StringRef, llvm::StringRef, mlir::DialectRegistry&) /tmp/llvm-gh-135289/build/mlir/lib/Tools/mlir-opt/MlirOptMain.cpp:680:13
#45 0x000055555d45007c mlir::MlirOptMain(int, char**, llvm::StringRef, mlir::DialectRegistry&) /tmp/llvm-gh-135289/build/mlir/lib/Tools/mlir-opt/MlirOptMain.cpp:696:21
#46 0x00005555577faae0 main /tmp/llvm-gh-135289/build/mlir/tools/mlir-opt/mlir-opt.cpp:335:0
#47 0x00007ffff7a1e1ca (/lib/x86_64-linux-gnu/libc.so.6+0x2a1ca)
#48 0x00007ffff7a1e28b __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2a28b)
#49 0x00005555577fa4e5 _start (./build/bin/mlir-opt+0x22a64e5)
/testcases/llvm-gh-135289/exp.sh: line 2: 260490 Aborted                 (core dumped) ./build/bin/mlir-opt -canonicalize $1
